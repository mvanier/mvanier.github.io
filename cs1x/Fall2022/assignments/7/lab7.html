<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.16">
<meta name="copyright" content="icon:copyright[] 2022 California Institute of Technology.  All rights reserved.">
<title>CS 1x Assignment 7: Stack calculator</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;-webkit-tap-highlight-color:transparent}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
pre.pygments .hll { background-color: #ffffcc }
pre.pygments { background: #f8f8f8; }
pre.pygments .tok-c { color: #408080; font-style: italic } /* Comment */
pre.pygments .tok-err { border: 1px solid #FF0000 } /* Error */
pre.pygments .tok-k { color: #008000; font-weight: bold } /* Keyword */
pre.pygments .tok-o { color: #666666 } /* Operator */
pre.pygments .tok-ch { color: #408080; font-style: italic } /* Comment.Hashbang */
pre.pygments .tok-cm { color: #408080; font-style: italic } /* Comment.Multiline */
pre.pygments .tok-cp { color: #BC7A00 } /* Comment.Preproc */
pre.pygments .tok-cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
pre.pygments .tok-c1 { color: #408080; font-style: italic } /* Comment.Single */
pre.pygments .tok-cs { color: #408080; font-style: italic } /* Comment.Special */
pre.pygments .tok-gd { color: #A00000 } /* Generic.Deleted */
pre.pygments .tok-ge { font-style: italic } /* Generic.Emph */
pre.pygments .tok-gr { color: #FF0000 } /* Generic.Error */
pre.pygments .tok-gh { color: #000080; font-weight: bold } /* Generic.Heading */
pre.pygments .tok-gi { color: #00A000 } /* Generic.Inserted */
pre.pygments .tok-go { color: #888888 } /* Generic.Output */
pre.pygments .tok-gp { color: #000080; font-weight: bold } /* Generic.Prompt */
pre.pygments .tok-gs { font-weight: bold } /* Generic.Strong */
pre.pygments .tok-gu { color: #800080; font-weight: bold } /* Generic.Subheading */
pre.pygments .tok-gt { color: #0044DD } /* Generic.Traceback */
pre.pygments .tok-kc { color: #008000; font-weight: bold } /* Keyword.Constant */
pre.pygments .tok-kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
pre.pygments .tok-kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
pre.pygments .tok-kp { color: #008000 } /* Keyword.Pseudo */
pre.pygments .tok-kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
pre.pygments .tok-kt { color: #B00040 } /* Keyword.Type */
pre.pygments .tok-m { color: #666666 } /* Literal.Number */
pre.pygments .tok-s { color: #BA2121 } /* Literal.String */
pre.pygments .tok-na { color: #7D9029 } /* Name.Attribute */
pre.pygments .tok-nb { color: #008000 } /* Name.Builtin */
pre.pygments .tok-nc { color: #0000FF; font-weight: bold } /* Name.Class */
pre.pygments .tok-no { color: #880000 } /* Name.Constant */
pre.pygments .tok-nd { color: #AA22FF } /* Name.Decorator */
pre.pygments .tok-ni { color: #999999; font-weight: bold } /* Name.Entity */
pre.pygments .tok-ne { color: #D2413A; font-weight: bold } /* Name.Exception */
pre.pygments .tok-nf { color: #0000FF } /* Name.Function */
pre.pygments .tok-nl { color: #A0A000 } /* Name.Label */
pre.pygments .tok-nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
pre.pygments .tok-nt { color: #008000; font-weight: bold } /* Name.Tag */
pre.pygments .tok-nv { color: #19177C } /* Name.Variable */
pre.pygments .tok-ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
pre.pygments .tok-w { color: #bbbbbb } /* Text.Whitespace */
pre.pygments .tok-mb { color: #666666 } /* Literal.Number.Bin */
pre.pygments .tok-mf { color: #666666 } /* Literal.Number.Float */
pre.pygments .tok-mh { color: #666666 } /* Literal.Number.Hex */
pre.pygments .tok-mi { color: #666666 } /* Literal.Number.Integer */
pre.pygments .tok-mo { color: #666666 } /* Literal.Number.Oct */
pre.pygments .tok-sa { color: #BA2121 } /* Literal.String.Affix */
pre.pygments .tok-sb { color: #BA2121 } /* Literal.String.Backtick */
pre.pygments .tok-sc { color: #BA2121 } /* Literal.String.Char */
pre.pygments .tok-dl { color: #BA2121 } /* Literal.String.Delimiter */
pre.pygments .tok-sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
pre.pygments .tok-s2 { color: #BA2121 } /* Literal.String.Double */
pre.pygments .tok-se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
pre.pygments .tok-sh { color: #BA2121 } /* Literal.String.Heredoc */
pre.pygments .tok-si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
pre.pygments .tok-sx { color: #008000 } /* Literal.String.Other */
pre.pygments .tok-sr { color: #BB6688 } /* Literal.String.Regex */
pre.pygments .tok-s1 { color: #BA2121 } /* Literal.String.Single */
pre.pygments .tok-ss { color: #19177C } /* Literal.String.Symbol */
pre.pygments .tok-bp { color: #008000 } /* Name.Builtin.Pseudo */
pre.pygments .tok-fm { color: #0000FF } /* Name.Function.Magic */
pre.pygments .tok-vc { color: #19177C } /* Name.Variable.Class */
pre.pygments .tok-vg { color: #19177C } /* Name.Variable.Global */
pre.pygments .tok-vi { color: #19177C } /* Name.Variable.Instance */
pre.pygments .tok-vm { color: #19177C } /* Name.Variable.Magic */
pre.pygments .tok-il { color: #666666 } /* Literal.Number.Integer.Long */
</style>
<style>
:root{
  --codebg: #f4f4f4;
/*  --titlecolor: #006080; */
  --solbgcolor: #f0f0e8;
}

/*
h1, h2, h3, h4, h5, h6 {
  color: var(--titlecolor);
}
*/

code {
  font-family: Menlo, "DejaVu Sans Mono", monospace;
  color: #02b;
  background: var(--codebg) !important;
}
pre {
  color: #02b;
  background: var(--codebg) !important;
}
hr.short {
  height: 1px;
  margin-left: 10%;
  margin-right: 10%;
}
h5, h6 {
  font-style: italic;
  font-size: 130%;
}
.admonitionblock td.icon .icon-warning::before{
  color: #d00000 !important;
}
.admonitionblock td.content {
  font-size: 96%;
  color: rgba(0,0,0,0.8) !important;
}

/* Solution and grading notes styles. */

.grading_notes .title, .solution .title {
  color: green;
  font-family: sans-serif;
  font-weight: bold;
  font-size: 150%;
  margin-top: 20px;
}

.solution > h3, .solution > h4, .solution > h5, .solution > h6 {
  color: green;
  font-weight: bold;
  font-size: 150%;
  margin-top: 15px;
}

.grading_notes, .solution {
  background-color: var(--solbgcolor) !important;
  border-style: solid;
  border-color: #888;
  border-width: 3px;
  margin-left: 10px;
  padding-left: 20px;
  margin-bottom: 20px;
}

.grading_notes pre, .solution pre {
  color: #006000;
  background-color: var(--solbgcolor) !important;
  padding-top: 5px !important;
  padding-bottom: 5px !important;
}

.grading_notes code, .solution code {
  color: #006000;
  background-color: var(--solbgcolor) !important;
  padding-top: 0px !important;
  padding-bottom: 0px !important;
}

.grading_notes p, .solution p {
  color: black;
  margin-bottom: 0px !important;
  padding-bottom: 20px !important;
}

.grading_notes pre, .solution pre {
  margin-left: 0px;
  margin-right: 20px;
  margin-bottom: 10px;
  padding-left: 10px !important;
}

</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>CS 1x Assignment 7: Stack calculator</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_due_date">Due date</a></li>
<li><a href="#_project_stack_calculator">Project: Stack calculator</a></li>
<li><a href="#_learning_objectives">Learning objectives</a></li>
<li><a href="#_compiling_and_running">Compiling and running</a>
<ul class="sectlevel2">
<li><a href="#_supplied_code">Supplied code</a></li>
</ul>
</li>
<li><a href="#_description_of_the_program">Description of the program</a>
<ul class="sectlevel2">
<li><a href="#_args_java"><code>Args.java</code></a>
<ul class="sectlevel3">
<li><a href="#_examples">Examples</a></li>
</ul>
</li>
<li><a href="#_value_java"><code>Value.java</code></a></li>
<li><a href="#_input_java"><code>Input.java</code></a>
<ul class="sectlevel3">
<li><a href="#_the_fileinput_class">The <code>FileInput</code> class</a></li>
<li><a href="#_the_stringinput_class">The <code>StringInput</code> class</a></li>
<li><a href="#_the_stdinput_class">The <code>StdInput</code> class</a></li>
</ul>
</li>
<li><a href="#_parser_java"><code>Parser.java</code></a>
<ul class="sectlevel3">
<li><a href="#_parsedigits"><code>parseDigits</code></a></li>
<li><a href="#_parsenumber"><code>parseNumber</code></a></li>
<li><a href="#_parsestring"><code>parseString</code></a></li>
<li><a href="#_parsevalue"><code>parseValue</code></a></li>
</ul>
</li>
<li><a href="#_register_java"><code>Register.java</code></a>
<ul class="sectlevel3">
<li><a href="#_empty"><code>empty</code></a></li>
<li><a href="#_storetop"><code>storeTop</code></a></li>
<li><a href="#_storepush"><code>storePush</code></a></li>
<li><a href="#_loadtop"><code>loadTop</code></a></li>
<li><a href="#_loadpush"><code>loadPush</code></a></li>
</ul>
</li>
<li><a href="#_ops_java"><code>Ops.java</code></a>
<ul class="sectlevel3">
<li><a href="#_stretch_goals_optional">Stretch goals <strong>[OPTIONAL]</strong></a></li>
</ul>
</li>
<li><a href="#_sc_java"><code>SC.java</code></a>
<ul class="sectlevel3">
<li><a href="#_fields">Fields</a></li>
<li><a href="#_main"><code>main</code></a></li>
<li><a href="#_sc_constructor"><code>SC</code> constructor</a></li>
<li><a href="#_other_supplied_methods">Other supplied methods</a></li>
<li><a href="#_evaluatecommand"><code>evaluateCommand</code></a>
<ul class="sectlevel4">
<li><a href="#_commands_and_what_they_mean">Commands and what they mean</a></li>
</ul>
</li>
<li><a href="#_binaryop"><code>binaryOp</code></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_calculator_language_summary">Calculator language summary</a></li>
<li><a href="#_testing_your_code">Testing your code</a>
<ul class="sectlevel2">
<li><a href="#_code_examples">Code examples</a></li>
<li><a href="#_valuetest_java"><code>ValueTest.java</code></a></li>
<li><a href="#_sctest_java"><code>SCTest.java</code></a></li>
</ul>
</li>
<li><a href="#_what_to_hand_in">What to hand in</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_due_date">Due date</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This assignment is due on Tuesday, December 6 at 2 AM.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_project_stack_calculator">Project: Stack calculator</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For this project, you will be implementing a terminal-based calculator program.
This program is based on (and inspired by) a <em>very</em> old program called <code>dc</code>
(which means "desk calculator").  The <code>dc</code> program was actually the first
computer language ever implemented on a Unix system, predating even the C
language.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you&#8217;re curious, <a href="https://en.wikipedia.org/wiki/Dc_(computer_program)">this
page</a> gives a good overview of the <code>dc</code> program.  Most Linux and MacOS
operating systems still have <code>dc</code> available, though it&#8217;s rarely used.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Although the calculator program is conceptually fairly simple, it&#8217;s actually a
full-fledged computer language, able to do quite sophisticated computations
with a very small amount of typing.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_learning_objectives">Learning objectives</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Learn about the "algebraic datatype" pattern discussed in the lectures</p>
</li>
<li>
<p>Learn to work with larger programs containing multiple classes and multiple files</p>
</li>
<li>
<p>Learn about parsing and implementing simple programming languages</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_compiling_and_running">Compiling and running</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Put all the code into a directory called <code>sc</code> (which is the name of the
package).  Then, from the directory above <code>sc</code>, do this to compile the
files:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ javac sc/*.java</pre>
</div>
</div>
<div class="paragraph">
<p>To run the program, do this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ java sc.SC</pre>
</div>
</div>
<div class="paragraph">
<p>This will appear to do nothing, but in fact the terminal will be waiting for
you to enter some commands.  These will be described below.  In addition, the
program can accept a number of (optional) command-line arguments, which are
also described below.</p>
</div>
<div class="sect2">
<h3 id="_supplied_code">Supplied code</h3>
<div class="paragraph">
<p>We are supplying you with a <a href="code/lab7.zip">zip file</a> of template
code.  The zip file contains the following files:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Args.java</code></p>
</li>
<li>
<p><code>Input.java</code></p>
</li>
<li>
<p><code>Value.java</code></p>
</li>
<li>
<p><code>Registers.java</code></p>
</li>
<li>
<p><code>Ops.java</code></p>
</li>
<li>
<p><code>SC.java</code></p>
</li>
<li>
<p><code>ValueTest.java</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You will be editing all of these except for <code>Args.java</code> and <code>ValueTest.java</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_description_of_the_program">Description of the program</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="images/dontpanic.jpg" alt="dontpanic">
</div>
</div>
<div class="paragraph">
<p>This program is longer than the programs you have seen so far, but you only
need to add about 250 lines of code to complete it.  Also, many of the lines
are very obvious from the context, because they are slightly changed
versions of other nearby code in the same file.</p>
</div>
<div class="paragraph">
<p>There are a couple of tricky spots in the program, and we&#8217;ll be very clear
about them in the descriptions below.</p>
</div>
<div class="paragraph">
<p>Here is a description of the various files, along with information about what
you need to implement in each file.  As usual, you need to replace comments of
the form <code>// TODO</code> with your code.</p>
</div>
<div class="sect2">
<h3 id="_args_java"><code>Args.java</code></h3>
<div class="paragraph">
<p>This file defines the <code>Args</code> class that handles command-line argument
processing.  It&#8217;s provided to you in completed form, since (let&#8217;s face it)
command-line argument processing isn&#8217;t very interesting.</p>
</div>
<div class="paragraph">
<p>Here is the program&#8217;s usage message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Usage: java sc.SC [OPTION] [filename ...]
  -e expr  evaluate expression
  -h       display this help message and exit</pre>
</div>
</div>
<div class="paragraph">
<p>Note that all command-line arguments are optional.  Input to the calculator can
come from three kinds of sources:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>terminal input (<code>System.in</code>)</p>
</li>
<li>
<p>file input</p>
</li>
<li>
<p>a string</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>With no arguments, the program just reads input from the terminal.</p>
</div>
<div class="paragraph">
<p>The <code>-h</code> command prints the usage (help) message and the rest of the
command-line arguments are ignored.</p>
</div>
<div class="paragraph">
<p>An optional argument of the form <code>-e expr</code>, where <code>expr</code> is a string containing
calculator commands, causes these commands to be executed.  There can be
multiple <code>-e expr</code> arguments, and they are evaluated in order.</p>
</div>
<div class="paragraph">
<p>Any other arguments are expected to be file names.  They should contain
calculator commands, and are read from and evaluated in order.  If the special
name <code>-</code> is included, then the terminal will be read from after everything else
has been read from.  (This is useful for reading commands from a file and then
from the terminal.)  If the <code>-</code> argument is not present but other <code>-e</code>
arguments and/or filename arguments are present, the program will exit after
running all the string and file input commands.</p>
</div>
<div class="paragraph">
<p>You can interleave <code>-e expr</code> commands and filenames, but the <code>-e</code> commands will
always be executed first.</p>
</div>
<div class="paragraph">
<p>That&#8217;s it for command-line argument processing.  Most of the time, the program
will be reading from a single <code>-e expr</code> command, a single filename, or the
terminal input.</p>
</div>
<div class="sect3">
<h4 id="_examples">Examples</h4>
<div class="paragraph">
<p>Here are some examples of using the program with the <code>-e</code> command-line option.
Note that you sometimes need to quote the arguments.  If the expression has
spaces, it has to be quoted. Also, the <code>*</code> character has a special meaning in
the terminal <sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup>, so you have to quote that too.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code><span></span>$ java sc.SC -e 10p
10
$ java sc.SC -e &quot;10 20+p&quot;
30
$ java sc.SC -e &quot;10 20*p&quot;
200
$ java sc.SC -e 10 -e 20 -e &quot;*&quot; -e p
200</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_value_java"><code>Value.java</code></h3>
<div class="paragraph">
<p>This file defines the fundamental value type (an abstract type called <code>Value</code>)
that the calculator commands work on.  It&#8217;s provided for you in completed form.</p>
</div>
<div class="paragraph">
<p>A <code>Value</code> can be either</p>
</div>
<div class="ulist">
<ul>
<li>
<p>an integer</p>
</li>
<li>
<p>a floating-point number (a Java <code>double</code>)</p>
</li>
<li>
<p>a string</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A single <code>Value</code> object can conceptually be any one of these types.  For
this to work, we use the "algebraic datatype pattern" discussed in lecture 9
and define these subclasses of <code>Value</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>StringValue</code> (for values that are strings)</p>
</li>
<li>
<p><code>IntValue</code> (for values that are integers)</p>
</li>
<li>
<p><code>FloatValue</code> (for values that are floating-point numbers)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>Value</code> class is <code>abstract</code>, which means you can&#8217;t make instances of it.
The <code>StringValue</code>, <code>IntValue</code>, and <code>FloatValue</code> classes are "concrete", which
means you can make instances of them.</p>
</div>
</div>
<div class="sect2">
<h3 id="_input_java"><code>Input.java</code></h3>
<div class="paragraph">
<p>The first thing we need to be able to do in our implementation is to read
characters from an input source.  There are three possible input sources:
files, strings, and the terminal (<em>i.e.</em> keyboard input).  In this file, we
define an abstract class called <code>Input</code>, which contains an input buffer of
characters.  This class represents what an input source should be able to do.
This class includes three methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>getNextChar</code>, which returns the next character in the input buffer.  If there is no
more input, it throws a <code>NoMoreInputException</code> exception.</p>
</li>
<li>
<p><code>putCharBack</code>, which pushes a character to the beginning of the input buffer.</p>
</li>
<li>
<p><code>reload</code>, which adds more characters to the end of the buffer.  This method
is <code>abstract</code>, so it has to be implemented in subclasses of <code>Input</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The input data itself is stored in a data structure called a <code>Deque</code>
(pronounced "deck", like a deck of cards).  "Deque" stands for <em><strong>d</strong>ouble
<strong>e</strong>nded <strong>q</strong>ueue</em>.  This is just an ordered collection of items (in this
case, individual characters) that you can add to or remove from.  We will be
adding characters to the end of the deque when loading up the input, and
removing them from the front as we process them.  We will also sometimes add
them back to the front (the <code>putCharBack</code> method) as needed.  The deque acts as
a buffer, so that many characters can be added all at once (<em>e.g.</em> a line of
characters) but they can be removed and processed one character at a time.</p>
</div>
<div class="paragraph">
<p>You will learn more about implementing deques and related data structures in CS
2.  Here, we will just use the <code>ArrayDeque</code> data structure provided by the Java
libraries.</p>
</div>
<div class="paragraph">
<p>We are supplying you with an implementation for both the <code>getNextChar</code> and
<code>putCharBack</code> methods, which are both very simple.  However, <code>getNextChar</code>
calls another method called <code>reload</code> in the event that the deque has no more
characters.  This method is not defined in the <code>Input</code> class, and so it must be
defined in its subclasses.  There are three subclasses of <code>Input</code>, one for each
kind of input:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>FileInput</code> (for input from a file)</p>
</li>
<li>
<p><code>StringInput</code> (for input from a string)</p>
</li>
<li>
<p><code>StdInput</code> (for terminal input)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We are providing you with partial implementations of these classes.  Here&#8217;s
what you need to implement for each class.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Do not use a catch-all exception handler (<em>i.e.</em> catching <code>Exception</code>) when
handling errors in any of the <code>Input</code> classes.  Instead, handle the specific
errors that you know can be thrown.  Any such error should be re-thrown as a
<code>NoMoreInputException</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_the_fileinput_class">The <code>FileInput</code> class</h4>
<div class="paragraph">
<p>In this class, the constructor has been supplied to you.  It creates a new
<code>BufferedReader</code> object which reads from the file, and sets the <code>closed</code> field
to <code>false</code>, which indicates that the file is ready for reading.  If the file
doesn&#8217;t exist, <code>closed</code> is reset to <code>true</code>.</p>
</div>
<div class="paragraph">
<p>You need to complete the <code>reload</code> method.  It reads in the next line of the
file (including the newline character at the end), and adds the characters to
the <code>current</code> buffer (the deque of characters described above).  Use the
<code>addLast</code> method of the <code>ArrayDeque</code> class to do this, so that the characters
get added to the end of the buffer.</p>
</div>
<div class="paragraph">
<p>Note that the <code>readLine</code> method of the <code>BufferedReader</code> class strips the final
newline from a string, so you&#8217;ll have to add it back.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Don&#8217;t read in the entire rest of the file in the <code>reload</code> method!  Just read in
one line at a time.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If an error occurs while reading the line, close the <code>BufferedReader</code> and set
the <code>closed</code> field to <code>true</code> before throwing the <code>NoMoreInputException</code>
exception.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_stringinput_class">The <code>StringInput</code> class</h4>
<div class="paragraph">
<p>In this class, the <code>reload</code> method has been supplied to you, since a string
can&#8217;t be reloaded (the number of characters is fixed).  You just need to
complete the constructor, which should only take a few lines.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_stdinput_class">The <code>StdInput</code> class</h4>
<div class="paragraph">
<p>This class reads from the terminal (<code>System.in</code>) instead of from a file or
string.  Therefore, instead of a <code>BufferedReader</code> it uses a <code>Scanner</code>.
You need to implement the <code>reload</code> method, which should be straightforward.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_parser_java"><code>Parser.java</code></h3>
<div class="paragraph">
<p>This file includes several methods that are used to parse the different <code>Value</code>
subclasses.  "Parsing" means converting strings into Java values.
All the methods in this class are <code>static</code> methods (they belong to the
class, not the instances of the class) and take an <code>Input</code> object (an input
source) as their only argument.  One method (<code>parseInt</code>) is supplied for you.
You need to implement the rest of the methods.</p>
</div>
<div class="sect3">
<h4 id="_parsedigits"><code>parseDigits</code></h4>
<div class="paragraph">
<p>This method tries to parse decimal digits (<em>i.e.</em> digits in the range <code>0</code> to <code>9</code>)
from the input and returns a <code>String</code> consisting of all the digits in the order
they occurred in the input.  The method stops collecting digits as soon as it
encounters a non-digit character or runs out of input.  In the former case,
push the non-digit back to the input.  If no digits are read (either because
there is no more input or a non-digit character was encountered), return the
empty string (not <code>null</code>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>We made this method <code>public</code> for testing purposes, but normally it would be
<code>private</code>.  How to test private methods, or whether you should even test
private methods at all, is a controversial topic in the Java community.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_parsenumber"><code>parseNumber</code></h4>
<div class="paragraph">
<p>This method tries to parse a number (integer or floating point).  If it parses
an integer, it creates an <code>IntValue</code> from it and returns it.  If it parses a
floating point number, it creates a <code>FloatValue</code> from it and returns it.  If it
can&#8217;t parse either, it returns <code>null</code>.  In some cases, a parse error can
happen, and if that occurs, it throws a <code>ParseErrorException</code>.  This method
returns a <code>Value</code>, so it&#8217;s allowed to return any subclass of <code>Value</code>, including
<code>IntValue</code> or <code>FloatValue</code> objects. (It will never return a <code>StringValue</code>
object, of course.)</p>
</div>
<div class="paragraph">
<p>The parsing rules for numbers are as follows.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Integers consist of a sequence of one or more decimal digits, optionally
preceded by the <code>_</code> character, which serves as a negative sign.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
We don&#8217;t use <code>-</code> for a negative sign because it&#8217;s used as the minus operator,
as you&#8217;ll see below.  This makes the parsing rules simpler.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Floating point numbers are required to have a decimal point (<code>.</code>) and at
least one decimal digit before the decimal point.  They are not required to
have a digit after the decimal point.  Exponential notation (<em>e.g.</em> <code>1.23e4</code> or
<code>5.4e-5</code>) is not supported.  Floating point numbers can be preceded by the <code>_</code>
character to create a negative number (like you can do with integers).</p>
</li>
<li>
<p>More than one <code>_</code> character before a number (int or float) is a parse error.</p>
</li>
<li>
<p>If an integer is followed by a <code>.</code> character, it becomes a float.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A good way to parse numbers is as follows:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Parse an integer using the <code>parseInt</code> method. This method is supplied for
you, and handles the sign issues.  It returns a <code>String</code>, not an <code>int</code>; don&#8217;t
convert it to an <code>int</code> yet!  If <code>parseInt</code> returns <code>null</code>, return <code>null</code> from
<code>parseNumber</code>.  (<code>parseInt</code> can also throw a <code>ParseErrorException</code>, which you
should just let pass through.)</p>
</li>
<li>
<p>Get the next character from the input.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>If there is none, the number is an integer, so create and return an
<code>IntValue</code>.</p>
</li>
<li>
<p>If it&#8217;s a <code>.</code> (<em>i.e.</em> a decimal point), this must be a float, so use
<code>parseDigits</code> to get the fractional part, collect all the float characters
(integer part, decimal point, and fractional part), and create and return a
<code>FloatValue</code>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Otherwise, push the character you just read back to the input, and create and
return an <code>IntValue</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_parsestring"><code>parseString</code></h4>
<div class="paragraph">
<p>This method tries to parse a string.  If it&#8217;s successful, it converts the
string to a <code>StringValue</code> and returns it.  If not, it returns <code>null</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">String syntax</div>
<div class="paragraph">
<p>In this language, strings are written with enclosing square brackets, like
this: <code>[hello, world!]</code> and not like this: <code>"hello, world!"</code>.  The reason for
this is that strings are mostly used as functions: the characters in strings
are generally calculator commands that can be replayed back.  The square
bracket syntax is more intuitive for this purpose.</p>
</div>
<div class="paragraph">
<p>The characters in a string consist of the characters <em>inside</em> the square
brackets, but not the enclosing square brackets themselves (much like the
characters in a Java string don&#8217;t include the surrounding quotes).  Strings in
the calculator language don&#8217;t support any character escapes (like <code>\n</code> for
newline or <code>\t</code> for tab), so you don&#8217;t have to worry about that.  Strings <em>can</em>
include embedded newlines, so this is a string spanning four lines:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[this
is
a
string]</pre>
</div>
</div>
<div class="paragraph">
<p>This doesn&#8217;t require any special parsing code, since you may get newline
characters from the input source.</p>
</div>
<div class="paragraph">
<p>The only other syntax rule is that internal square brackets must be balanced.
So this string:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[a string with [square brackets] inside]</pre>
</div>
</div>
<div class="paragraph">
<p>represents the string <code>"a string with [square brackets] inside"</code>.  Most
importantly, the string doesn&#8217;t end when you read the first <code>]</code> character; it
ends when you read the <code>]</code> character that balances the initial <code>[</code> character.
This is the only thing you need to keep track of when you are parsing strings.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>The method reads characters from the input one at a time, trying to parse a
string.  First, it must read the initial <code>[</code> character; if it&#8217;s not there,
return <code>null</code>. (Make sure to push the non-<code>[</code> character back to the input so
it doesn&#8217;t disappear!)  Then parse characters one at a time, looking for the
closing <code>]</code> character.  If the input runs out before that character is found,
throw a <code>ParseErrorException</code> (don&#8217;t just return <code>null</code>!), because that
represents an unterminated string, which is not allowed.  Otherwise, collect up
all the characters, create a <code>StringValue</code> and return it.</p>
</div>
<div class="paragraph">
<p>You will find the <code>StringBuffer</code> class useful here for collecting the
characters.</p>
</div>
</div>
<div class="sect3">
<h4 id="_parsevalue"><code>parseValue</code></h4>
<div class="paragraph">
<p>This static method is in the <code>Value</code> class.
It skips all leading whitespace characters in the input. (The
<code>Character.isWhitespace</code> method will be useful here.)  Then it reads a single
character.  If there is none, return <code>null</code>.  Otherwise, push the character
back to the input.  If it was a <code>[</code> (start of string) character, try to parse a
string value using <code>parseStringValue</code>.  If that works, return the
<code>StringValue</code>. If not (it returned <code>null</code>), try to parse a number using
<code>parseNumber</code>.  Return the result (<code>null</code> if it fails or a number value if
it succeeds).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_register_java"><code>Register.java</code></h3>
<div class="paragraph">
<p>This file defines the <code>Register</code> class, which represents a single register,
which is what the calculator language uses as variables.  You might expect that
a register is just a slot where a single value can be stored, but in fact, each
register is a separate stack of values.  The main reason for this is that there
are a limited number of registers (26, represented by the letters <code>a</code> through
<code>z</code>).  To enable more complex calculations to be performed, any register can be
used as a stack, and then (for instance) each calculator function can use the
same registers without having to overwrite values from other functions.</p>
</div>
<div class="paragraph">
<p>The register&#8217;s stack is initialized in the constructor, which is provided.
There are a few simple methods that you need to implement.</p>
</div>
<div class="sect3">
<h4 id="_empty"><code>empty</code></h4>
<div class="paragraph">
<p>This method returns <code>true</code> if the register stack is empty, or <code>false</code> otherwise.</p>
</div>
</div>
<div class="sect3">
<h4 id="_storetop"><code>storeTop</code></h4>
<div class="paragraph">
<p>This method replaces the value at the top of the stack with the argument value.  If
the register stack is empty, it pushes the value onto the stack.</p>
</div>
</div>
<div class="sect3">
<h4 id="_storepush"><code>storePush</code></h4>
<div class="paragraph">
<p>This method pushes a value onto the register stack.</p>
</div>
</div>
<div class="sect3">
<h4 id="_loadtop"><code>loadTop</code></h4>
<div class="paragraph">
<p>This method copies and returns the top value of the register&#8217;s stack.  If the
stack is empty, it throws an <code>EmptyStackException</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_loadpush"><code>loadPush</code></h4>
<div class="paragraph">
<p>This method pops and returns the top value of the register&#8217;s stack.  If the
stack is empty, it throws an <code>EmptyStackException</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ops_java"><code>Ops.java</code></h3>
<div class="paragraph">
<p>This file defines the <code>Ops</code> class, which contains static methods for computing
with <code>Value</code>s.  Some of the methods are supplied for you, and most of the
others can be written by using the supplied code as a template.</p>
</div>
<div class="paragraph">
<p>This file also is an example of the "algebraic datatype" pattern discussed in
lecture 9.  It&#8217;s not object-oriented at all!  If we wanted to write this in a
more object-oriented style, we could have moved all these operations to the
<code>Value</code> class, but that would have made that class a lot larger, and wouldn&#8217;t
provide any particular benefit.  Since each <code>Value</code> object is actually one of
the three concrete subclasses of <code>Value</code> (<code>IntValue</code>, <code>FloatValue</code>, or
<code>StringValue</code>), each method has to inspect each <code>Value</code> using the <code>instanceof</code>
operator to find out which concrete class the object belongs to.  Once it has
done that, it gets the contents of the object using the <code>getContents</code> method
for that class, and carries out the computation.</p>
</div>
<div class="paragraph">
<p>Many of the methods are binary methods; they need to inspect the classes of
<em>both</em> <code>Value</code> arguments.  For numeric operations, we recommend you do nested
<code>instanceof</code> tests (the outer one for the first <code>Value</code>, the inner one for the
second), because often you can do an operation on arguments of different types.
For instance, you can add integers to floating-point numbers and vice-versa,
although you can&#8217;t add either of them to strings.  You can see an example of
this in the supplied <code>add</code> method, which implements addition of values.  We do
overload addition to mean string concatenation when adding strings, but that is
a special case (subtraction, multiplication <em>etc.</em> don&#8217;t work with strings and
numbers).</p>
</div>
<div class="paragraph">
<p>The comparison methods (<code>equals</code>, <code>lessThan</code>, <code>greaterThan</code>) should all be
implemented in terms of the supplied <code>compare</code> method.  They return integer
values which represent booleans: <code>0</code> represents <code>false</code> and <code>1</code> represents
<code>true</code>.  The <code>not</code> method is included instead of <code>lessThanOrEquals</code> <em>etc.</em>
because <code>a &lt;= b</code> is the same as <code>not(a &gt; b)</code>.  <code>not</code> only works on integer
values treated as booleans; treat any nonzero value as <code>true</code>.</p>
</div>
<div class="paragraph">
<p>Any method that is applied to a <code>Value</code> that can&#8217;t be used (like applying the
<code>not</code> method to a <code>StringValue</code>) should throw an <code>InvalidOperationException</code>.</p>
</div>
<div class="sect3">
<h4 id="_stretch_goals_optional">Stretch goals <strong>[OPTIONAL]</strong></h4>
<div class="paragraph">
<p>It&#8217;s not required, but it&#8217;s quite easy to add more functionality to this class.
For instance:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Extend the <code>multiply</code> method to handle Python-style multiplication of
integers by strings (where the string is replicated the integer number of
times).</p>
</li>
<li>
<p>Add a <code>power</code> method that raises one value to the power of another.  This
will only work for numbers, of course, and you may wish to have more
restrictions (<em>e.g.</em> only allowing integer powers).</p>
</li>
<li>
<p>Add <code>and</code> and <code>or</code> operators to allow combining tests.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you do this, you may need to extend the calculator syntax in the <code>SC</code> class,
which we turn to next.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sc_java"><code>SC.java</code></h3>
<div class="paragraph">
<p>This is where all the code finally comes together to make a working calculator
program!</p>
</div>
<div class="paragraph">
<p>This file defines the <code>SC</code> class, which is the primary class of the program and
the one that provides the user interface to the calculator (among other
things).  Many of the methods in this class are supplied for you, including the
<code>main</code> method and the constructor.  The two methods you need to complete are
<code>evaluateCommand</code> and <code>binaryOp</code>, which we&#8217;ll describe below.</p>
</div>
<div class="sect3">
<h4 id="_fields">Fields</h4>
<div class="paragraph">
<p>The <code>SC</code> class defines three fields:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>inputs</code>: an <code>ArrayList</code> of input sources.</p>
</li>
<li>
<p><code>stack</code>: a <code>Stack</code> of <code>Value</code>s, which is where the computations actually
take place.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Don&#8217;t confuse this stack (which we will call <em>the</em> stack) with the register
stacks described above (which we will always refer to as <em>register stacks</em>).
</td>
</tr>
</table>
</div>
</li>
<li>
<p><code>registers</code>: a map between characters (<code>a</code> to <code>z</code>) and the registers that
they represent.  A "map" in this context means a data structure that lets you
look up the register corresponding to a particular character.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_main"><code>main</code></h4>
<div class="paragraph">
<p>The <code>main</code> method (supplied to you) processes the command-line arguments (if
any) to determine which input sources exist for the current run of the program.
It then creates an instance of the <code>SC</code> class and runs it (see below for more
on the <code>run</code> method).</p>
</div>
</div>
<div class="sect3">
<h4 id="_sc_constructor"><code>SC</code> constructor</h4>
<div class="paragraph">
<p>The <code>SC</code> constructor (supplied to you) initializes all the fields of the
calculator object.  It receives the <code>Input</code> sources as its argument and stores
that.  It creates an empty stack.  Then in creates all the registers and binds
each one to a different character from <code>a</code> to <code>z</code> in a <code>HashMap</code> (which is a
kind of <code>Map</code>).</p>
</div>
</div>
<div class="sect3">
<h4 id="_other_supplied_methods">Other supplied methods</h4>
<div class="ulist">
<ul>
<li>
<p><code>run</code>: This calls <code>runInput</code> on each input source.</p>
</li>
<li>
<p><code>runInput</code>: This repeatedly runs <code>evaluate</code> on an input source until there is
nothing left to evaluate.</p>
</li>
<li>
<p><code>evaluate</code>: This tries to parse a <code>Value</code> from the input source.  If it
succeeds, the value is pushed onto the stack.  If it fails, it assumes that the
first characters of the input represent a command, so it calls
<code>evaluateCommand</code>.</p>
</li>
<li>
<p><code>handleError</code>: This just prints an error message to <code>System.err</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_evaluatecommand"><code>evaluateCommand</code></h4>
<div class="paragraph">
<p>This is the primary method of the entire program.  It&#8217;s called when the next
characters of the input source do not represent a value.  Instead, the first
character represents a command.  This command is used to select an operation to
perform (in a big <code>switch</code> statement).  Some of the code for the commands has
been supplied to you, but you&#8217;ll have to implement most of the commands
yourself.  Usually, this will involve popping one or two values from the stack,
computing a result value, and pushing that value back onto the stack.</p>
</div>
<div class="paragraph">
<p>For instance, if the input was <code>1 2 + n</code> then first the numbers <code>1</code> and <code>2</code>
would be pushed onto the stack (in the <code>evaluate</code> method, not in this method).
Then the <code>+</code> command would be evaluated by this method, and it would pop the
two numbers off the stack, add them, and push the result back onto the stack.
Finally, the <code>n</code> command would pop the result (<code>3</code>) off the stack and print it.</p>
</div>
<div class="paragraph">
<p>Note that you don&#8217;t have to worry about spaces in the inputs, since the
<code>getNextChar</code> method of the <code>Input</code> class will discard whitespace.
<sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup></p>
</div>
<div class="sect4">
<h5 id="_commands_and_what_they_mean">Commands and what they mean</h5>
<div class="paragraph">
<p>Here are the commands in the calculator language:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>c</code>: Clear the stack.</p>
</li>
<li>
<p><code>d</code>: Duplicate the top stack item.  Print an error message (using
<code>handleError</code>) if the stack is empty.</p>
</li>
<li>
<p><code>f</code>: Print the contents of the stack non-destructively (<em>i.e.</em> don&#8217;t change
the stack).  The values are printed one per line, with the top of the stack
being printed first and the bottom last.</p>
</li>
<li>
<p><code>k</code>: Pop the stack and discard it.  <code>k</code> stands for "kill".</p>
</li>
<li>
<p><code>l</code>: Load a register&#8217;s value by copying (not popping) the top of a register
stack onto the stack.  The register to use is the character that follows the
<code>l</code>, so the command <code>la</code> means "load register a".  Print an error message if
the register character is out of range (not in <code>a</code> to <code>z</code>) or if the register
stack is empty.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Use the methods of the <code>Register</code> class for this and for all register-related
commands.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><code>L</code>: Like <code>l</code>, but pop the register stack instead of copying the top value.</p>
</li>
<li>
<p><code>n</code>: Pop the stack and print the value, with a newline.  Print an error
message if the stack is empty.</p>
</li>
<li>
<p><code>N</code>: Like <code>n</code>, but don&#8217;t print a newline at the end.</p>
</li>
<li>
<p><code>p</code>: Copy the top of the stack and print the value, with a newline.
Print an error message if the stack is empty.</p>
</li>
<li>
<p><code>q</code>: Quit the calculator program.</p>
</li>
<li>
<p><code>r</code>: Swap ("rotate") the top two stack items.  Print an error message if the
stack doesn&#8217;t have at least two items.</p>
</li>
<li>
<p><code>s</code>: Pop the top of the stack and store it into the top value of a register.
The register is identified by the character that follows the <code>s</code>, so <code>sb</code> means
"store to register b".  Print an error message if the stack is empty or if the
register name is invalid.</p>
</li>
<li>
<p><code>S</code>: Like <code>s</code>, but push the value onto the register stack instead of storing
into the top value of the register.</p>
</li>
<li>
<p><code>x</code>: Pop the top of the stack, which should be a string.
Print an error message if the stack is empty or if the value popped from the
stack isn&#8217;t a string.  "Execute" the string by pushing the characters back onto
the input source.  (Make sure that the first element of the string will be the
first command executed!)</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Here you can see how strings containing commands are basically the same as
functions in more conventional programming languages.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><code>?</code>: This command does conditional execution (like <code>if</code>/<code>else</code> in most
languages).  It pops three values off the stack, of which one is an integer
representing a boolean, and the other two are strings representing the "then"
and "else" clauses of the conditional.  They should be arranged as
"int|then|else" with the "else" clause at the top of the stack.  If the int is
<code>0</code>, execute the "else" clause; otherwise, execute the "then" clause.</p>
<div class="paragraph">
<p>If there are fewer than 3 values on the stack, or if they have the wrong types,
print an error message.</p>
</div>
</li>
<li>
<p><code>+</code>: Pop two values from the stack, add them, and push the result back onto
the stack.  Use the <code>Ops.add</code> method to do the adding.</p>
<div class="paragraph">
<p>This and the next few commands are very similar, so we want you to factor out
the similarity by defining a method called <code>binaryOp</code>.  This method takes in a
function that converts two values into a single value,
as well as the name of the command for error handling purposes.  It pops two
values from the stack, applies the function to get a result value, and pushes
that back to the stack.  It also handles errors by printing out error messages
when necessary.</p>
</div>
<div class="paragraph">
<p>The supplied code for the <code>+</code> command contains a feature of Java we haven&#8217;t
discussed in class: <a href="https://www.w3schools.com/java/java_lambda.asp">lambda
expressions</a>.  These are a way to very concisely represent a function (not a
method!) in Java.  In our case, the function converts two <code>Value</code>s to a
single <code>Value</code>.  The function for the <code>+</code> command is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>(v1, v2) -&gt; Ops.add(v1, v2)</pre>
</div>
</div>
<div class="paragraph">
<p>whose meaning should be obvious.  The next few commands can be implemented in
exactly the same way.</p>
</div>
</li>
<li>
<p><code>-</code>: See above.</p>
</li>
<li>
<p><code>*</code>: See above.</p>
</li>
<li>
<p><code>/</code>: See above.</p>
</li>
<li>
<p><code>=</code>: See above.</p>
</li>
<li>
<p><code>&lt;</code>: See above.</p>
</li>
<li>
<p><code>&gt;</code>: See above.</p>
</li>
<li>
<p><code>!</code>: This pops a value from the stack, computes the boolean NOT of the value,
and pushes the result back to the stack.  We can&#8217;t use <code>BinaryOp</code> for this
because it&#8217;s not a binary function, but the code is similar.</p>
</li>
<li>
<p><code>#</code>: This skips the rest of the line, up to and including the first newline
character.  It&#8217;s used for writing comments.</p>
</li>
<li>
<p><code>,</code>: This command executes the (string) contents of a register.  The register
character must follow the <code>,</code> character.  This command is a shorter way of
writing <code>lx</code>, so <code>,a</code> is the same as <code>lax</code>.  This command is useful to treat a
register&#8217;s contents like a function; to call the function just do <code>,r</code> where
<code>r</code> is the register name.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>That&#8217;s it for the calculator language, unless you want to add some more
commands <span class="icon"><i class="fa fa-smile-o"></i></span></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_binaryop"><code>binaryOp</code></h4>
<div class="paragraph">
<p>This method isn&#8217;t strictly necessary, but it does significantly reduce code
duplication in the <code>evaluateCommand</code> method.
It takes as its arguments an <code>Operator</code> (defined in <code>Ops.java</code>) as well
as the command name.  The <code>Operator</code> argument should be a lambda expression, as
described above.  It executes the binary operator by popping two values from
the stack, computing the result, and pushing it back to the stack.  If an error
occurs, it prints out an error message using <code>handleError</code>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_calculator_language_summary">Calculator language summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Here is a summary of the calculator language.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>q</code>&#8201;&#8212;&#8201;quits the calculator program</p>
</li>
<li>
<p><code>42</code> &#8201;&#8212;&#8201;pushes the number <code>42</code> onto the stack</p>
</li>
<li>
<p><code>_10</code>&#8201;&#8212;&#8201;pushes the number <code>-10</code> onto the stack</p>
</li>
<li>
<p><code>1.2</code>&#8201;&#8212;&#8201;pushes the number <code>1.2</code> onto the stack</p>
</li>
<li>
<p><code>_42.3</code>&#8201;&#8212;&#8201;pushes the number <code>-42.3</code> onto the stack</p>
</li>
<li>
<p><code>[foobar]</code>&#8201;&#8212;&#8201;pushes the string <code>"foobar"</code> onto the stack (without the quotes)</p>
</li>
<li>
<p><code>#</code>&#8201;&#8212;&#8201;starts a comment which goes to the end of the line</p>
</li>
<li>
<p><code>c</code>&#8201;&#8212;&#8201;clears the stack</p>
</li>
<li>
<p><code>f</code>&#8201;&#8212;&#8201;prints the stack, one element per line, top of stack first</p>
</li>
<li>
<p><code>p</code>&#8201;&#8212;&#8201;prints the top of stack element (with a newline), but doesn&#8217;t pop it</p>
</li>
<li>
<p><code>n</code>&#8201;&#8212;&#8201;prints the top of stack element (with a newline) and pops it</p>
</li>
<li>
<p><code>N</code>&#8201;&#8212;&#8201;prints the top of stack element (without a newline) and pops it</p>
</li>
<li>
<p><code>d</code>&#8201;&#8212;&#8201;duplicates the top element of the stack</p>
</li>
<li>
<p><code>r</code>&#8201;&#8212;&#8201;"rotates" (swaps) the top two elements of the stack</p>
</li>
<li>
<p><code>k</code>&#8201;&#8212;&#8201;"kills" (pops and discards) the top element of the stack</p>
</li>
<li>
<p><code>la</code>&#8201;&#8212;&#8201;"loads" (copies) the value at the top of register <code>a</code>'s stack</p>
</li>
<li>
<p><code>La</code>&#8201;&#8212;&#8201;"loads" (pops) the value at the top of register <code>a</code>'s stack</p>
</li>
<li>
<p><code>sa</code>&#8201;&#8212;&#8201;"saves" (copies) the element at the top of the stack to the top of
register <code>a</code>'s stack</p>
</li>
<li>
<p><code>Sa</code>&#8201;&#8212;&#8201;"saves" (pushes) the element at the top of the stack to the top of
register <code>a</code>'s stack</p>
</li>
<li>
<p><code>x</code>&#8201;&#8212;&#8201;executes a string popped off the stack as a series of commands</p>
</li>
<li>
<p><code>?</code>&#8201;&#8212;&#8201;conditional: pops an integer and two strings off the stack;
if the integer is <code>0</code>, executes the string that was on the top of the stack,
otherwise, executes the other string</p>
</li>
<li>
<p><code>+</code>&#8201;&#8212;&#8201;pops two values off the stack, adds them,
pushes the result back onto the stack</p>
</li>
<li>
<p><code>-</code>&#8201;&#8212;&#8201;pops two values off the stack, subtracts them (second from top - top),
pushes the result back onto the stack</p>
</li>
<li>
<p><code>*</code>&#8201;&#8212;&#8201;pops two values off the stack, multiplies them,
pushes the result back onto the stack</p>
</li>
<li>
<p><code>/</code>&#8201;&#8212;&#8201;pops two values off the stack, divides them (second from top / top),
pushes the result back onto the stack</p>
</li>
<li>
<p><code>=</code>&#8201;&#8212;&#8201;pops two values off the stack; if they&#8217;re equal, pushes 1 back onto
stack, else pushes 0</p>
</li>
<li>
<p><code>&lt;</code>&#8201;&#8212;&#8201;pops two values off the stack; if (second from top &lt; top), pushes 1 back
onto stack, else pushes 0</p>
</li>
<li>
<p><code>&gt;</code>&#8201;&#8212;&#8201;pops two values off the stack; if (second from top &gt; top), pushes 1 back
onto stack, else pushes 0</p>
</li>
<li>
<p><code>!</code>&#8201;&#8212;&#8201;pops one value off the stack; compute (NOT value), pushes back onto stack
(integers only; pushes 1 if input is 0, 0 otherwise)</p>
</li>
<li>
<p><code>,a</code>&#8201;&#8212;&#8201;same as <code>lax</code> but more concise</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Those are all the commands.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_testing_your_code">Testing your code</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_code_examples">Code examples</h3>
<div class="paragraph">
<p>Here&#8217;s a transcript of an interactive session with the language.
Note that the output comes on the line following the input.
The output is boldfaced to make it easier to identify.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>1p   # print the number 1
<strong>1</strong>
1 2+p
<strong>3</strong>
[foo]p
<strong>foo</strong>
[foo][bar]+p  # add (concatenate) strings
<strong>foobar</strong>
f    # print the stack
<strong>"foobar"</strong>
<strong>"foo"</strong>
<strong>3</strong>
<strong>1</strong>
cf   # clear and print the stack (it's empty)
<strong>1 0/</strong>
<strong>/: invalid operation: can't divide by zero</strong>
1.2 3.4/n   # n pops the result from the stack
<strong>0.35294117647058826</strong>
1.2 3.4/p   # p leaves the result on the stack
<strong>0.35294117647058826</strong>
f
<strong>0.35294117647058826</strong>
cf
[d*]ss # "squared" function; store in register s
10,sn
<strong>100</strong>
[d*rd*+]st  # "sum of squares" function; store in register t
10 20,tn
<strong>500</strong>
10 20ltxn  # long-winded way to call functions: load register t and execute it
<strong>500</strong>
[d0=[k1][d1-,f*]?]sf  # recursive factorial function
10,fn
<strong>3628800</strong>
20,fn  # will overflow :(
<strong>-2102132736</strong>
[d2<[][d1-r2-,fr,f+]?]sf # recursive fibonacci function
5,fn
<strong>5</strong>
10,fn
<strong>55</strong>
15,fn
<strong>610</strong>
20,fn
<strong>6765</strong>
25,fn
<strong>75025</strong>
30,fn  # This takes a while!
<strong>832040</strong></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_valuetest_java"><code>ValueTest.java</code></h3>
<div class="paragraph">
<p>This test script tests that value parsing works correctly.  To compile and run
it, do this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ javac sc/*.java
$ java sc.ValueTest</pre>
</div>
</div>
<div class="paragraph">
<p>It will run the tests and let you know about any failures.</p>
</div>
</div>
<div class="sect2">
<h3 id="_sctest_java"><code>SCTest.java</code></h3>
<div class="paragraph">
<p>This test script tests every command in the language, and also tests some more
complicated functions.  To compile and run it, do this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ javac sc/*.java
$ java sc.SCTest</pre>
</div>
</div>
<div class="paragraph">
<p>It will run the tests and let you know about any failures.  (You might need to
scroll up to find the error messages.)</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_what_to_hand_in">What to hand in</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Please submit these files to CodePost as <code>Assignment 7</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Input.java</code></p>
</li>
<li>
<p><code>Parser.java</code></p>
</li>
<li>
<p><code>Registers.java</code></p>
</li>
<li>
<p><code>Ops.java</code></p>
</li>
<li>
<p><code>SC.java</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>[End of assignment]</p>
</div>
<div class="paragraph">
<p><span class="icon"><i class="fa fa-copyright"></i></span> 2022 California Institute of Technology.  All rights reserved.</p>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. It&#8217;s a <em>filename glob</em>, which is a kind of wild-card for filenames.
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. "Whitespace" means one or more non-printing characters, and includes space characters, newline characters, and tab characters, as well as a few less common ones.
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>