
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://example.com/assignments/6/mandelbrot2/">
      
      
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.34">
    
    
      
        <title>Assignment 6: Program to write - The CS 1x book (Fall 2024)</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.35f28582.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#assignment-6-program-to-write" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="The CS 1x book (Fall 2024)" class="md-header__button md-logo" aria-label="The CS 1x book (Fall 2024)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            The CS 1x book (Fall 2024)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Assignment 6: Program to write
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to medium mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to medium mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="medium" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18V6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-2.69L23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="The CS 1x book (Fall 2024)" class="md-nav__button md-logo" aria-label="The CS 1x book (Fall 2024)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    The CS 1x book (Fall 2024)
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Introduction
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../intro/welcome/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome to CS 1x!
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Administrative
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Administrative
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../admin/syllabus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Syllabus
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../admin/collab/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Collaboration policies
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Assignments
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Assignments
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Assignment 1: Tic-Tac-Toe
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            Assignment 1: Tic-Tac-Toe
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Assignment 1: Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1/setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Assignment 1: Setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1/programs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Assignment 1: Programs to write
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#compiling-and-running" class="md-nav__link">
    <span class="md-ellipsis">
      Compiling and running
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Compiling and running">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#keyboard-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Keyboard commands
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mouse-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Mouse commands
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#demos" class="md-nav__link">
    <span class="md-ellipsis">
      Demos
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#code-to-write" class="md-nav__link">
    <span class="md-ellipsis">
      Code to write
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Code to write">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overall-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Overall structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#supplied-code" class="md-nav__link">
    <span class="md-ellipsis">
      Supplied code
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mandelbrotdisplay-fields" class="md-nav__link">
    <span class="md-ellipsis">
      MandelbrotDisplay: fields
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mandelbrotdisplay-methods" class="md-nav__link">
    <span class="md-ellipsis">
      MandelbrotDisplay: methods
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MandelbrotDisplay: methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-main-method" class="md-nav__link">
    <span class="md-ellipsis">
      The main method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#constructor" class="md-nav__link">
    <span class="md-ellipsis">
      Constructor
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Constructor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aside-handling-mouse-events" class="md-nav__link">
    <span class="md-ellipsis">
      Aside: Handling mouse events
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aside-handling-key-press-events" class="md-nav__link">
    <span class="md-ellipsis">
      Aside: Handling key press events
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mouseadapter-mousepressed-method" class="md-nav__link">
    <span class="md-ellipsis">
      MouseAdapter: mousePressed method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mouseadapter-mousedragged-method" class="md-nav__link">
    <span class="md-ellipsis">
      MouseAdapter: mouseDragged method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mouseadapter-mousereleased-method" class="md-nav__link">
    <span class="md-ellipsis">
      MouseAdapter: mouseReleased method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keyadapter-keytyped-method" class="md-nav__link">
    <span class="md-ellipsis">
      KeyAdapter: keyTyped method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setcolormap" class="md-nav__link">
    <span class="md-ellipsis">
      setColorMap
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#draw" class="md-nav__link">
    <span class="md-ellipsis">
      draw
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paint" class="md-nav__link">
    <span class="md-ellipsis">
      paint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Other methods
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="assignment-6-program-to-write">Assignment 6: Program to write</h1>
<h2 id="compiling-and-running">Compiling and running</h2>
<p>Put all the code into a directory called <code>mandelbrot</code>
(which is the name of the package).
Then, from the directory above <code>mandelbrot</code>, do this to compile the files:</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>$<span class="w"> </span>javac<span class="w"> </span>mandelbrot/*.java
</span></code></pre></div>
<p>To run the program, do this:</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>$<span class="w"> </span>java<span class="w"> </span>mandelbrot.MandelbrotDisplay
</span></code></pre></div>
<p>This will bring up a window which will display the Mandelbrot set.
This window will respond to keyboard and mouse commands.
These are described briefly here, and in more detail below.</p>
<h3 id="keyboard-commands">Keyboard commands</h3>
<p>The program responds to the following one-letter keyboard commands:</p>
<ul>
<li>
<p><code>p</code> &mdash; changes the color palette</p>
</li>
<li>
<p><code>q</code> &mdash; quits the program</p>
</li>
<li>
<p><code>s</code> &mdash; saves the current image to a file</p>
</li>
<li>
<p><code>u</code> &mdash; undoes the last zoom</p>
</li>
</ul>
<h3 id="mouse-commands">Mouse commands</h3>
<p>When the left mouse button is pressed and the mouse is dragged,
a white rectangle outline is drawn until the mouse button is released.
Then the area surrounded by the rectangle becomes the entire image,
which is zoomed in to show more detail.
The rectangle always retains the aspect ratio of the entire image,
and this is reflected in the way that the rectangle is drawn.</p>
<h2 id="demos">Demos</h2>
<p>Here is a short video showing what zooming in and undoing zooms
looks like in the running application.</p>
<video src="../images/mandelbrot_demo.mp4" controls>
  Your browser does not support the video tag.
</video>

<p>Here is another video showing what it looks like
when you change the color palettes by hitting the <code>p</code> key.
(We cycle through three different color palettes here.)
Note that you can still zoom and unzoom
even after you have selected a different palette,
because palette selection is independent of zooming and unzooming.</p>
<video src="../images/mandelbrot_palettes.mp4" controls>
  Your browser does not support the video tag.
</video>

<h2 id="code-to-write">Code to write</h2>
<h3 id="overall-structure">Overall structure</h3>
<p>Like most real-world Java programs, this one is divided into several files:</p>
<ul>
<li><code>Mandelbrot.java</code></li>
<li><code>MImage.java</code></li>
<li><code>MandelbrotDisplay.java</code></li>
</ul>
<p>The <code>Mandelbrot.java</code> and <code>MImage.java</code> files are the same ones you used in the
previous assignment.  Only <code>MandelbrotDisplay.java</code> is new.</p>
<h3 id="supplied-code">Supplied code</h3>
<p>We are supplying you with template code for the Java file
<code>MandelbrotDisplay.java</code>.
You will be editing the file,
replacing the <code>// TODO</code> comments with your implementation.
You'll also need the <code>MImage.java</code> file
and the completed <code>Mandelbrot.java</code> file from last week's assignment.</p>
<p>The file <code>MandelbrotView.java</code> from the last assignment
is <em>not</em> needed for this week's assignment.
However, some of the code from the methods
can be re-used in the <code>MandelbrotDisplay</code> class,
which we'll indicate below.<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup></p>
<p>The file <code>MandelbrotDisplay.java</code> contains two classes:
<code>Palettes</code> and <code>MandelbrotDisplay</code>.</p>
<p>The <code>Palettes</code> class is the same class
as the <code>Palettes</code> class in <code>MandelbrotView.java</code> in the previous assignment,
except that we've added two more color palettes.
As you can see from the second demo video above,
you'll be able to switch palettes on-the-fly when looking at images.
There are three color palettes in all,
including the one we used in the previous assignment.
The implementation is complete, so don't add anything to it.</p>
<p>The <code>MandelbrotDisplay</code> class
is used to compute and display Mandelbrot set images interactively.
The implementation of this class is incomplete.
Here is what you have to implement.</p>
<h3 id="mandelbrotdisplay-fields"><code>MandelbrotDisplay</code>: fields</h3>
<p>In the template code, we have provided field declarations for:</p>
<ul>
<li>
<p><code>mimg</code>: the current <code>MImage</code> object generated by the <code>Mandelbrot</code> class</p>
</li>
<li>
<p><code>bimg</code>: the current <code>BufferedImage</code> object generated from the <code>MImage</code> object,
representing the actual image to display</p>
</li>
<li>
<p><code>history</code>: a stack of <code>MImage</code>s to be used to store the image history, for
zooming and undoing purposes (see below)</p>
</li>
</ul>
<p>You are free to define whichever additional fields you need.  Put the field
declarations in the location marked <code>// TODO</code> in the template code following
the field definitions mentioned above.</p>
<h3 id="mandelbrotdisplay-methods"><code>MandelbrotDisplay</code>: methods</h3>
<h4 id="the-main-method">The <code>main</code> method</h4>
<p>We're supplying you with a complete implementation of the <code>main</code> method.  Don't
change it.  In particular, command-line arguments are not needed.</p>
<h4 id="constructor">Constructor</h4>
<p>The constructor for this class is considerably more complex than the
constructor for <code>MandelbrotView.java</code>.  We've provided a skeleton
implementation, which you need to complete (in the locations marked <code>// TODO</code>).</p>
<p>Like most constructors, the primary task of this one is to set the field values
based on the input arguments.  In addition, the colormap is set up and the
initial image is drawn.</p>
<p>After that, we set up two kinds of "listener" classes, which will handle mouse
and keyboard input, respectively.  Details of these classes will be discussed
in lecture, but let's discuss the basic ideas.</p>
<h5 id="aside-handling-mouse-events">Aside: Handling mouse events</h5>
<p>Java uses interfaces called
<a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.desktop/java/awt/event/MouseListener.html"><code>MouseListener</code></a>
and
<a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.desktop/java/awt/event/MouseMotionListener.html"><code>MouseMotionListener</code></a>
to allow you to specify what mouse actions do.
You can create a specific class for this on-the-fly by defining a class called a
<a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.desktop/javax/swing/event/MouseInputAdapter.html"><code>MouseInputAdapter</code></a>,
which is an <em>abstract class</em>
which implements the <code>MouseListener</code> and <code>MouseMotionListener</code> interfaces.</p>
<p>Basically, an abstract class is a class with (usually)
some method implementations missing.
In addition, you cannot make instances of abstract classes;
you have to make subclasses of them
and then make instances of those subclasses.
For a <code>MouseInputAdapter</code>,
the parts that represent the <code>MouseListener</code> and <code>MouseMotionListener</code> methods
are not actually missing, but the provided methods simply do nothing.
You provide your own implementations of methods
that override the default do-nothing methods
to make the program respond to mouse input in some way.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This might seem like a strange way to use abstract classes,
but it works well here, because much of the time
we only want to implement a small subset
of all the possible listener methods (often only one).
In that case, all the other methods do exist but don't do anything,
which is what we would have done
had we written the listener class from scratch on our own.</p>
</div>
<p>In our case, we want to specify the <code>mousePressed</code>, <code>mouseDragged</code>,
and <code>mouseReleased</code> methods
to allow us to draw a box outline on the screen for zooming purposes.
<code>mousePressed</code> and <code>mouseReleased</code>
are methods from the <code>MouseListener</code> interface,
and <code>mouseDragged</code> is from the <code>MouseMotionListener</code> interface.
We don't care about the other methods in either interface,
so they can retain their default do-nothing behaviors.</p>
<p>We create a subclass of the <code>MouseInputAdapter</code> class
and immediately create a single instance of this subclass using this syntax:</p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="n">MouseInputAdapter</span><span class="w"> </span><span class="n">mouseEventHandler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MouseInputAdapter</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">    </span><span class="c1">// method implementations: mousePressed, mouseDragged, mouseReleased</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="p">}</span>
</span></code></pre></div>
<p>Although it doesn't look like
we're creating a subclass of the abstract class <code>MouseInputAdapter</code> here
(there is no <code>class</code> statement and no <code>extends</code> keyword)
that's exactly what we are doing.
Java calls these kinds of classes <em>anonymous inner classes</em>.
They are "anonymous" because the subclass has no name,
and they are "inner" because they are created inside another class.
(Here, they're created inside a method of another class,
which (amazingly enough) is allowed.)
This is the standard way to create listener-style classes
for graphics callbacks in Java.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Anonymous inner classes are one of the oddest aspects of Java
that new Java programmers have to get used to,
but they are very useful in practice.
There are a few subtleties when using anonymous inner classes,
and we aren't going to get into them here.
For this assignment, you just need to fill in the method definitions.
When inside these method definitions,
you are free to call methods from the surrounding class,
and you'll probably want to.
You can also access fields from the surrounding class.
(This is one reason why inner classes are so useful.)</p>
</div>
<p>Then we use the methods <code>addMouseListener</code> and <code>addMouseMotionListener</code>
to make the program actually do things
in response to the left mouse button being pressed, dragged, and released.
This works because the <code>JPanel</code> class,
which <code>MandelbrotDisplay</code> is a subclass of, has these methods.</p>
<p>Inside of the mouse listener methods,
we can use the <code>getX</code> and <code>getY</code> methods of the <code>MouseEvent</code> arguments
to get the current mouse cursor position whenever these methods are executed.</p>
<h5 id="aside-handling-key-press-events">Aside: Handling key press events</h5>
<p>Pretty much everything we said about the <code>MouseInputAdapter</code> class
also applies here,
except that instead of handling mouse events,
we need to handle keyboard events.
The interface for this is called
<a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.desktop/java/awt/event/KeyListener.html"><code>KeyListener</code></a>
which has a method called <code>KeyTyped</code> which we need to implement.
We can define an anonymous subclass of the
<a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.desktop/java/awt/event/KeyAdapter.html"><code>KeyAdapter</code></a>
abstract class to specify this method.</p>
<p>Inside of the key listener methods,
we can use the <code>getKeyChar</code> method of the <code>KeyEvent</code> arguments
to get the key currently being pressed when this method was executed.</p>
<p>Now we will describe the actual mouse listener and keyboard listener methods
you need to implement.
Be aware that it's perfectly OK
to define extra methods in <code>MandelbrotDisplay</code>
and call them from the listener methods.
This can be useful in keeping the code organized.
In general, it's not a good idea to have too much code in listener methods;
if you can define a method outside of the listener and just call it,
that may be a better design.</p>
<h4 id="mouseadapter-mousepressed-method"><code>MouseAdapter</code>: <code>mousePressed</code> method</h4>
<p>This method is called when a mouse button is pressed
(either the left or right mouse button; it doesn't care).
It takes a <code>MouseEvent</code> object as its only argument and returns <code>void</code>
(<em>i.e.</em> it doesn't return anything).
The <code>MouseEvent</code> object contains information about the state of the mouse
(like where the mouse cursor is).</p>
<p>The <code>mousePressed</code> method should simply
record the current location of the mouse cursor
in fields of the <code>MandelbrotDisplay</code> object.
You'll see how it's used below.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It's also a good idea to have the program print out a diagnostic message
to the terminal
<em>e.g.</em> something like <code>mouse pressed at location (100, 567)</code>.
This also applies to the other listener methods.
This can be very useful when debugging.
Once everything is working, remove or comment out this debugging code.</p>
</div>
<h4 id="mouseadapter-mousedragged-method"><code>MouseAdapter</code>: <code>mouseDragged</code> method</h4>
<p>This method gets called whenever the mouse is dragged.
"Dragging" the mouse means holding the mouse button down
(we'll assume the left mouse button here) and moving the mouse cursor.
Like the <code>mousePressed</code> method,
this method takes a <code>MouseEvent</code> object and returns <code>void</code>.
This method therefore does what it does
by interacting with the surrounding <code>MandelbrotDisplay</code> object.</p>
<p>What we want to happen
is for a white box outline to be drawn over the image
to highlight the part of the image we want to zoom in on.
(You can see this in the demo videos above.)
This will be done continuously as the mouse is dragged,
so we will see the box as we move the cursor to the final box coordinate.</p>
<p>What you have to do in this method
is save the box dimensions into fields of the <code>MandelbrotDisplay</code> object,
and then call <code>repaint()</code> to get the <code>paint</code> method (described below)
to redraw the image with the box on it.
The only subtlety is that the box you draw
must preserve the original aspect ratio of the window.
The way to do this is to only use the X coordinate of the mouse cursor
at the moment this method is called.
With this, and the start point of the box
(that you recorded in the <code>mousePressed</code> method)
you can compute what the Y coordinate must be to have the right aspect ratio.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This has one weird effect: when you drag the box to select a region,
the Y location of the mouse cursor won't matter while you're dragging.
The box displayed should always have the right aspect ratio!
Again, you can see this in the demo videos.</p>
</div>
<p>Remember: you are not drawing anything in this method!
You are simply recording what needs to be drawn,
and the <code>paint</code> method will do the actual drawing.
You should call <code>repaint()</code> in this method to force repainting of the image.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Don't call the <code>paint</code> method directly!
It may seem counterintuitive and indirect,
but calling <code>repaint()</code> is the way that
Java wants you to force repainting of the image.</p>
</div>
<h4 id="mouseadapter-mousereleased-method"><code>MouseAdapter</code>: <code>mouseReleased</code> method</h4>
<p>This method is called once you lift your finger off of the mouse button.
You do this when the box you've outlined
represents the area you want to zoom in on.
Again, this method takes a <code>MouseEvent</code> object as its only argument
and returns <code>void</code>.</p>
<p>We will add the requirement that if that box is too small in pixel distances,
you shouldn't zoom
(this prevents zooming when you accidentally drag the mouse a short distance).
A good criterion for this is that
if the X extent of the box is less than 10 pixels, don't zoom.</p>
<p>If you zoom, you need to compute the new actual extent of the image
(real number extent, not pixels),
recompute the image, and repaint it (without a box).
If not, just repaint the image (again without a box).</p>
<p>Also, if you zoom,
you should save the <code>MImage</code> used to generate the previous image
onto the history stack for undo purposes (see below).</p>
<p>Being able to zoom into interesting areas of the image
is what makes this program so much fun.
Every time you run it,
you can find strange new corners of the Mandelbrot set to explore.
There are an infinite number of such corners (literally)
so you'll never run out of them! :smile:</p>
<h4 id="keyadapter-keytyped-method"><code>KeyAdapter</code>: <code>keyTyped</code> method</h4>
<p>The <code>keyTyped</code> method should use the <code>e.getKeyChar()</code> method
to get the keyboard character that was typed (as a <code>char</code>).
You need to handle the characters <code>'p'</code>, <code>'q'</code>, <code>'s'</code>, and <code>'u'</code>;
any other characters can be ignored.
(You don't need to print an error message in that case.)</p>
<p>The <code>'p'</code> character (<code>p</code> is short for "palette")
changes the color palette and redisplays the image using the new palette.
It does this by incrementing the index into the palettes array,
wrapping back to <code>0</code> if there are no more palettes
(so the palettes index goes 0 -&gt; 1 -&gt; 2 -&gt; 0 <em>etc.</em>
as the <code>'p'</code> key is pressed repeatedly).
You should see the color change immediately when you hit the key.
Note that changing the palette
will necessarily generate a new <code>BufferedImage</code> (the <code>bimg</code> field)
but it should <em>not</em> generate a new <code>MImage</code> (the <code>mimg</code> field),
since that doesn't change when the palette changes.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is one reason why having
the separation between <code>MImage</code>s and <code>BufferedImage</code>s is so useful.
Another reason is that we can develop
the code to generate <code>MImage</code>s and <code>BufferedImage</code>s separately
and combine them later.  Good design is important!</p>
</div>
<p>The <code>'q'</code> character exits the program immediately.</p>
<p>The <code>'s'</code> character saves the current image to a file.
To do this, you should display a pop-up dialog window asking for the title,
add a <code>.png</code> to the title string,
and use the <code>saveImage</code> method to actually save the image.
Also, if the user inputs an empty string, don't save the image; just ignore it.
<em>Hint</em>: create a
<a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.desktop/javax/swing/JOptionPane.html"><code>JOptionPane</code></a>
object; see the methods in the documentation to get one you can use.</p>
<p>The <code>'u'</code> character undoes the last zoom.
For this to work, you will need to pop the history stack
to get the last <code>MImage</code> stored and use it to re-create the image.
(We'll talk more about this below.)
Of course, if the history stack is empty,
do nothing since there is nothing to undo.
<em>Hint</em>: Write a separate <code>undo</code> method and just call it from here.</p>
<p>OK, that's enough about the constructor.  On to the other methods!</p>
<h4 id="setcolormap"><code>setColorMap</code></h4>
<p>This method is the same as the one you wrote for the <code>MandelbrotView</code> class,
except that (as you've seen) the palette index can change (it's not always <code>0</code>).</p>
<h4 id="draw"><code>draw</code></h4>
<p>There are two versions of the <code>draw</code> method:
one taking no arguments and the other taking a single <code>MImage</code> argument.
They are very similar to the <code>draw</code> methods
from the <code>MandelbrotView</code> class from the previous assignment,
so start with those and make whatever changes you need.</p>
<p>The difference between the two versions of <code>draw</code>
is that the no-argument one creates a new <code>Mandelbrot</code> object
and generates an <code>MImage</code> from it, then calls the second method.
The second method is in charge of converting the <code>MImage</code>
into a <code>BufferedImage</code> (which is stored in the <code>bimg</code> field).</p>
<p>You might wonder why you need two methods
instead of combining them both into one.
The answer is that when you are changing color palettes,
you are preserving the same <code>MImage</code>,
so you need to be able to convert the current <code>MImage</code> (the <code>mimg</code> field)
into a new <code>BufferedImage</code> (the <code>bimg</code> field),
which is what the <code>draw</code> method with an <code>MImage</code> argument does.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code>BufferedImage</code> generated will <em>not</em> have the box outline in it!
That is added in the <code>paint</code> method, described next.</p>
</div>
<!--

TODO: This is not the most elegantly factored solution.
Since `mimg` is already accessible, there is really no need to pass it as an
argument.  Instead, the two methods could have different names: `draw` and
`drawFromMImage`, for instance.

-->

<h4 id="paint"><code>paint</code></h4>
<p>The <code>paint</code> method, which is partially supplied to you, has two jobs:</p>
<ol>
<li>
<p>Render the <code>BufferedImage</code> (the <code>bimg</code> field)
into the window so the user can see it.
(This is the part that's supplied.)</p>
</li>
<li>
<p>If a box outline needs to be drawn, draw it.</p>
</li>
</ol>
<p>Note that the box outline
should be drawn as the four lines which outline the box,
and the lines should be white.
You'll need to use methods for drawing lines and setting colors
like those you used for the turtle graphics assignment.</p>
<h4 id="other-methods">Other methods</h4>
<p>The <code>saveImage</code> method saves the current image to a file.
This method is very simple and is supplied to you.</p>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>You might wonder why we don't just subclass <code>MandelbrotView</code>
so we can get those method implementations directly.
In principle we could,
but the amount of code we are going to borrow from <code>MandelbrotView</code>
is so small it's not worth the added complexity of the implementation.
These kinds of design decisions can be quite tricky in practice.&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy", "navigation.footer", "navigation.top"], "search": "../../../assets/javascripts/workers/search.07f07601.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.56dfad97.min.js"></script>
      
        <script src="../../../js/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>