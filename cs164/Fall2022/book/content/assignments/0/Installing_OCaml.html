<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Installing OCaml &mdash; The CS 164 book 0.0.1 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Assignment 0: Getting set up" href="Assignment0.html" />
    <link rel="prev" title="OCaml coding notes and tips" href="../coding_notes.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> The CS 164 book
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../Introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admin/index.html">Administrative information</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Assignments</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../coding_notes.html">OCaml coding notes and tips</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Installing OCaml</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#install-ocaml-and-opam">Install OCaml and <code class="docutils literal notranslate"><span class="pre">opam</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#macos">MacOS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#linux">Linux</a></li>
<li class="toctree-l4"><a class="reference internal" href="#windows">Windows</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#initialization">Initialization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-ocaml">Using OCaml</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#starting-ocaml">Starting OCaml</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#using-visual-studio-code">Using Visual Studio Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-the-terminal">Using the terminal</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Assignment0.html">Assignment 0: Getting set up</a></li>
<li class="toctree-l2"><a class="reference internal" href="Mac_notes.html">Notes on MacOS X</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1/Assignment1.html">Assignment 1: The <em>Var</em> language</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2/Assignment2.html">Assignment 2: Register allocation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../3/Assignment3.html">Assignment 3: Conditionals: the <em>Cond</em> language</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">The CS 164 book</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">Assignments</a> &raquo;</li>
      <li>Installing OCaml</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/content/assignments/0/Installing_OCaml.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="installing-ocaml">
<h1>Installing OCaml<a class="headerlink" href="#installing-ocaml" title="Permalink to this heading"></a></h1>
<p>Here are the steps you should go through to install OCaml on your computer.</p>
<div class="section" id="install-ocaml-and-opam">
<h2>Install OCaml and <code class="docutils literal notranslate"><span class="pre">opam</span></code><a class="headerlink" href="#install-ocaml-and-opam" title="Permalink to this heading"></a></h2>
<p>See the <a class="reference external" href="https://ocaml.org/learn/tutorials/up_and_running.html">instructions</a> on the OCaml website.  Note that <code class="docutils literal notranslate"><span class="pre">opam</span></code> is the OCaml
package manager, which needs to be installed in order to install critical
libraries.</p>
<div class="section" id="macos">
<h3>MacOS<a class="headerlink" href="#macos" title="Permalink to this heading"></a></h3>
<p>The instructions for MacOS refer to the <a class="reference external" href="https://brew.sh/">Homebrew</a> package manager,
which needs to be installed first.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Homebrew does not come pre-installed on Macs,
but it is easy to install and is incredibly useful.
Almost any open-source command-line software you can imagine
can be installed using Homebrew with a single command.
(This includes most programming languages, including OCaml).</p>
</div>
<p>Whatever you do, don’t use the MacPorts package manager.
Use Homebrew.  (Trust us on this.)</p>
</div>
<div class="section" id="linux">
<h3>Linux<a class="headerlink" href="#linux" title="Permalink to this heading"></a></h3>
<p>If you are using Linux, you should install OCaml using your distribution’s
package manager. The <a class="reference external" href="https://ocaml.org/learn/tutorials/up_and_running.html">instructions</a> linked to above contains more details.
For example, for Ubuntu Linux the commands are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apt update
$ sudo apt install opam
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">sudo</span></code> is so you don’t have to install the software as the root user.
You may be asked to enter your password, which you should do.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The instructions don’t mention <code class="docutils literal notranslate"><span class="pre">sudo</span></code> for some reason, but you will need
to use it.  Also, skip the line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ add-apt-repository ppa:avsm/ppa
</pre></div>
</div>
<p>That used to be necessary but isn’t anymore.</p>
</div>
</div>
<div class="section" id="windows">
<h3>Windows<a class="headerlink" href="#windows" title="Permalink to this heading"></a></h3>
<p>If you are using Windows, you should install an Ubuntu Linux system inside of
Windows using <a class="reference external" href="https://docs.microsoft.com/en-us/windows/wsl/install-win10">WSL</a> (Windows Subsystem for Linux).
Then you can use <code class="docutils literal notranslate"><span class="pre">apt</span></code> like on any Ubuntu Linux system.</p>
<p>It’s theoretically possible to install OCaml directly on Windows,
but it’s not worth the trouble.  WSL is a much easier solution,
and it will work fine with external editors like VS Code (discussed below).
This course does <strong>not</strong> support OCaml directly on Windows,
because we assume a Unix-like environment (<code class="docutils literal notranslate"><span class="pre">Makefile</span></code>s <em>etc.</em>)
for much of our tooling.</p>
</div>
</div>
<div class="section" id="initialization">
<h2>Initialization<a class="headerlink" href="#initialization" title="Permalink to this heading"></a></h2>
<p>Once you have a version of OCaml and <code class="docutils literal notranslate"><span class="pre">opam</span></code> installed,
you need to set it up, and, if necessary, upgrade the versions.
Start up your terminal program and go through the following steps.</p>
<ul>
<li><p>Initialize <code class="docutils literal notranslate"><span class="pre">opam</span></code> by typing <code class="docutils literal notranslate"><span class="pre">opam</span> <span class="pre">init</span></code> in a terminal and following the
instructions.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There is an issue with initializing <code class="docutils literal notranslate"><span class="pre">opam</span></code> inside of WSL (Windows
Subsystem for Linux). Basically, due to the way WSL works, you have to
initialize <code class="docutils literal notranslate"><span class="pre">opam</span></code> differently by disabling sandboxing.  This
theoretically can cause some problems if a package does something
really stupid, but it probably won’t. The fix is to use this command
instead of just <code class="docutils literal notranslate"><span class="pre">opam</span> <span class="pre">init</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ opam init --disable-sandboxing
</pre></div>
</div>
</div>
</li>
<li><p>At the end of the <code class="docutils literal notranslate"><span class="pre">opam</span> <span class="pre">init</span></code> command,
it will ask you to run <code class="docutils literal notranslate"><span class="pre">eval</span> <span class="pre">${opam</span> <span class="pre">env}</span></code>.
(Or it might say <code class="docutils literal notranslate"><span class="pre">eval</span> <span class="pre">${opam</span> <span class="pre">config</span> <span class="pre">env}</span></code> or something similar.
It all does the same thing.)
This sets up the <code class="docutils literal notranslate"><span class="pre">PATH</span></code> variable of your shell
to point to the <code class="docutils literal notranslate"><span class="pre">opam</span></code> directories.
This is important, because if you don’t do this,
adding new packages (and new OCaml versions) will not work.
Opam will also ask you if it can change your shell initialization file
(<em>e.g.</em> <code class="docutils literal notranslate"><span class="pre">~/.bashrc</span></code> for <code class="docutils literal notranslate"><span class="pre">bash</span></code>)
by adding some commands.
You should say yes, because if you don’t,
every time you start up a new terminal
you will have to type <code class="docutils literal notranslate"><span class="pre">eval</span> <span class="pre">${opam</span> <span class="pre">env}</span></code>
to get <code class="docutils literal notranslate"><span class="pre">opam</span></code> to work correctly.</p></li>
<li><p>In your terminal, type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ opam update
$ opam upgrade
</pre></div>
</div>
<p>to make sure the package repository is up to date
and all OCaml packages have been upgraded to the most recent versions.</p>
</li>
<li><p>Check the OCaml version by typing <code class="docutils literal notranslate"><span class="pre">ocaml</span> <span class="pre">--version</span></code>.
If it’s the most current version
(which is 4.14 as of this writing)
you are done with this part.
Otherwise do <code class="docutils literal notranslate"><span class="pre">opam</span> <span class="pre">switch</span> <span class="pre">create</span> <span class="pre">4.14.0</span></code>
and wait for the new version to be installed.
(This will take a while.)</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you have an old version of <code class="docutils literal notranslate"><span class="pre">opam</span></code>
(do <code class="docutils literal notranslate"><span class="pre">opam</span> <span class="pre">--version</span></code> to find out; if it’s less than 2.0 it’s old),
you will have to enter <code class="docutils literal notranslate"><span class="pre">opam</span> <span class="pre">switch</span> <span class="pre">4.14.0</span></code> instead.
However, you shouldn’t be using an old <code class="docutils literal notranslate"><span class="pre">opam</span></code> version!</p>
</div>
</li>
<li><p>Install these libraries:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ opam install ocamlfind dune utop sexplib ppx_sexp_conv ocaml-lsp-server
</pre></div>
</div>
<p>Note particularly the <code class="docutils literal notranslate"><span class="pre">utop</span></code> library, which installs the <code class="docutils literal notranslate"><span class="pre">utop</span></code>
program.  <code class="docutils literal notranslate"><span class="pre">utop</span></code> is an improved version of the <code class="docutils literal notranslate"><span class="pre">ocaml</span></code> interpreter,
and you should use it instead of <code class="docutils literal notranslate"><span class="pre">ocaml</span></code> when testing code interactively.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">ocaml-lsp-server</span></code> library is important
if you want to use Visual Studio Code as your editor (see below).</p>
</li>
</ul>
</div>
<div class="section" id="using-ocaml">
<h2>Using OCaml<a class="headerlink" href="#using-ocaml" title="Permalink to this heading"></a></h2>
<p>There are only a few things you need to know in order to use OCaml
effectively.</p>
<div class="section" id="starting-ocaml">
<h3>Starting OCaml<a class="headerlink" href="#starting-ocaml" title="Permalink to this heading"></a></h3>
<p>You can start OCaml by opening a terminal and typing:</p>
<blockquote>
<div><p>$ utop</p>
</div></blockquote>
<p>at the terminal prompt.  This will bring up the OCaml interactive
interpreter, which is a good environment for experimenting with the language and
for testing code you’ve written.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can also use <code class="docutils literal notranslate"><span class="pre">ocaml</span></code> instead of <code class="docutils literal notranslate"><span class="pre">utop</span></code>, but <code class="docutils literal notranslate"><span class="pre">utop</span></code> is much more
full-featured.</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">utop</span></code> makes it possible to easily recall and edit
previously-input lines of text by using the up and down arrow keys.
To see what it can do, start it up:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ utop
</pre></div>
</div>
<p>and type the following commands (one per line, hitting the return key at the
end of each line):</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="o">#</span> <span class="nn">Printf</span><span class="p">.</span><span class="n">printf</span> <span class="s2">&quot;hello</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">;;</span>
<span class="o">#</span> <span class="nn">Printf</span><span class="p">.</span><span class="n">printf</span> <span class="s2">&quot;goodbye</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">;;</span>
</pre></div>
</div>
<p>Note that the OCaml interpreter prompt is the hash sign (<code class="docutils literal notranslate"><span class="pre">#</span></code>); don’t type
that!  These lines should, when evaluated, print the words <code class="docutils literal notranslate"><span class="pre">&quot;hello&quot;</span></code> and
<code class="docutils literal notranslate"><span class="pre">&quot;goodbye&quot;</span></code> respectively.  Once you’ve done this, you should be able to recall
either line by using the up arrow key.  For instance, you can hit the up arrow
key once to get the line:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="nn">Printf</span><span class="p">.</span><span class="n">printf</span> <span class="s2">&quot;goodbye</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">;;</span>
</pre></div>
</div>
<p>and edit it so that it says:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="nn">Printf</span><span class="p">.</span><span class="n">printf</span> <span class="s2">&quot;hasta la vista</span><span class="se">\\</span><span class="s2">n&quot;</span> <span class="o">;;</span>
</pre></div>
</div>
<p>When you hit return, it should print out <code class="docutils literal notranslate"><span class="pre">&quot;hasta</span> <span class="pre">la</span> <span class="pre">vista&quot;</span></code>
on a separate line.  This makes line editing much easier.
You can also use control-a to get to the beginning of a line you are editing
and control-e to get to the end.
control-l (lower-case L) clears the terminal
and puts the cursor at the top of the terminal window.</p>
<p>One annoying thing about <code class="docutils literal notranslate"><span class="pre">utop</span></code> is that it tends to go overboard on
command completion.  You can disable this by typing this inside <code class="docutils literal notranslate"><span class="pre">utop</span></code>:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="o">#</span> <span class="o">#</span><span class="n">utop_prompt_dummy</span><span class="o">;;</span>
<span class="o">#</span> <span class="nn">UTop</span><span class="p">.</span><span class="n">set_show_box</span> <span class="bp">false</span><span class="o">;;</span>
</pre></div>
</div>
<p>It’s annoying to type this every time you start <code class="docutils literal notranslate"><span class="pre">utop</span></code>,
so what I do is make a <code class="docutils literal notranslate"><span class="pre">utop</span></code> initialization file called <code class="docutils literal notranslate"><span class="pre">init.ml</span></code>
and put it in the directory <code class="docutils literal notranslate"><span class="pre">~/.config/utop</span></code>
(creating that directory if necessary).
Then these commands will be run every time <code class="docutils literal notranslate"><span class="pre">utop</span></code> starts.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Unfortunately, this will not work properly if used in a directory that
has a <code class="docutils literal notranslate"><span class="pre">.ocamlinit</span></code> file in it (usually your home directory).  There
are workarounds, but most of the time it will work properly.  Other than
that, <code class="docutils literal notranslate"><span class="pre">utop</span></code> is far superior to the basic <code class="docutils literal notranslate"><span class="pre">ocaml</span></code> interpreter.</p>
</div>
</div>
</div>
<div class="section" id="using-visual-studio-code">
<h2>Using Visual Studio Code<a class="headerlink" href="#using-visual-studio-code" title="Permalink to this heading"></a></h2>
<p>You can use any text editor you like to write OCaml code,
but we recommend you try <a class="reference external" href="https://code.visualstudio.com/">Visual Studio Code</a> (also known as VS Code),
which has excellent OCaml support.  In order to use it, you need to do the
following steps:</p>
<ul>
<li><p>Make sure you’ve install the OCaml Language Server Protocol
(we did this above).  If you haven’t, type this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ opam install ocaml-lsp-server
</pre></div>
</div>
</li>
<li><p>Install Visual Studio Code from
<cite>this website &lt;https://code.visualstudio.com/&gt;</cite>.</p></li>
<li><p>When inside VS Code, look at the Extensions pane
(select View/Extensions from the menu).
Type “OCaml” into the search bar at the top,
and select and install “OCaml Platform”.</p></li>
</ul>
<p>Now you will get nice syntax highlighting and code completion when you edit
OCaml source code.  You can also start a terminal while inside VS Code to test
your code by running the OCaml interpreter.  When you do, make sure you choose
a WSL (Ubuntu Linux) terminal, <em>not</em> a PowerShell terminal!</p>
<p>OK, now you are ready to write OCaml code!</p>
</div>
<div class="section" id="using-the-terminal">
<h2>Using the terminal<a class="headerlink" href="#using-the-terminal" title="Permalink to this heading"></a></h2>
<p>In this book, we assume that you will be running OCaml from inside a Unix-like
terminal environment, such as you can find on Linux, MacOS, or Windows (if
you’re using WSL).  This means that we will assume that you know how to do
basic terminal tasks and commands such as</p>
<ul class="simple">
<li><p>creating a directory (<code class="docutils literal notranslate"><span class="pre">mkdir</span></code>)</p></li>
<li><p>removing a directory (<code class="docutils literal notranslate"><span class="pre">rmdir</span></code>)</p></li>
<li><p>changing directories (<code class="docutils literal notranslate"><span class="pre">cd</span></code>)</p></li>
<li><p>removing files (<code class="docutils literal notranslate"><span class="pre">rm</span></code>)</p></li>
<li><p>running programs</p></li>
</ul>
<p>In addition, we will be using the GNU <code class="docutils literal notranslate"><span class="pre">make</span></code> program to build our compilers.
We will include instructions on how to use <code class="docutils literal notranslate"><span class="pre">make</span></code> in the assignments, but
you should ensure that <code class="docutils literal notranslate"><span class="pre">make</span></code> is installed by typing</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ which make
</pre></div>
</div>
<p>If it replies with <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">not</span> <span class="pre">found</span></code> you need to install it.</p>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../coding_notes.html" class="btn btn-neutral float-left" title="OCaml coding notes and tips" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Assignment0.html" class="btn btn-neutral float-right" title="Assignment 0: Getting set up" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Michael C. Vanier. All rights reserved.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>