<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Part A: Basic exercises &mdash; The CS 115 book</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/sphinx_highlight.js"></script>
        <script src="../../../../_static/clipboard.min.js"></script>
        <script src="../../../../_static/copybutton.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Part B: Operators" href="partB_operators.html" />
    <link rel="prev" title="Preamble" href="Preamble.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            The CS 115 book, Spring 2023
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../Introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Software.html">Installing the course software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../admin/index.html">Administrative information</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Assignments</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../1/index.html">Assignment 1: Evaluation and recursion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2/index.html">Assignment 2: Algebraic datatypes</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Assignment 3: A touch of class</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="Preamble.html">Preamble</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Part A: Basic exercises</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#eq-and-show-for-nat1">1. <code class="docutils literal notranslate"><span class="pre">Eq</span></code> and <code class="docutils literal notranslate"><span class="pre">Show</span></code> for <code class="docutils literal notranslate"><span class="pre">Nat1</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#deriving-eq-and-show-for-nat2">2. Deriving <code class="docutils literal notranslate"><span class="pre">Eq</span></code> and <code class="docutils literal notranslate"><span class="pre">Show</span></code> for <code class="docutils literal notranslate"><span class="pre">Nat2</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#ord-for-nat2">3. <code class="docutils literal notranslate"><span class="pre">Ord</span></code> for <code class="docutils literal notranslate"><span class="pre">Nat2</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#eq-and-ord-for-signednat">4. <code class="docutils literal notranslate"><span class="pre">Eq</span></code> and <code class="docutils literal notranslate"><span class="pre">Ord</span></code> for <code class="docutils literal notranslate"><span class="pre">SignedNat</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#num-for-signednat">5. <code class="docutils literal notranslate"><span class="pre">Num</span></code> for <code class="docutils literal notranslate"><span class="pre">SignedNat</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#signednattointeger">6. <code class="docutils literal notranslate"><span class="pre">signedNatToInteger</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#unaryinteger">7. <code class="docutils literal notranslate"><span class="pre">UnaryInteger</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generic-factorial">8. Generic <code class="docutils literal notranslate"><span class="pre">factorial</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="partB_operators.html">Part B: Operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="partC_sparse_matrices.html">Part C: Miniproject: Sparse Matrices</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../4/index.html">Assignment 4: <code class="docutils literal notranslate"><span class="pre">IO</span></code>, <code class="docutils literal notranslate"><span class="pre">IO</span></code>, it’s off to work we go!</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../5/index.html">Assignment 5: Monads and lists, oh my!</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../6/index.html">Assignment 6: Fun with parsing</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">The CS 115 book, Spring 2023</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Assignments</a></li>
          <li class="breadcrumb-item"><a href="../index.html">Assignment 3: A touch of class</a></li>
      <li class="breadcrumb-item active">Part A: Basic exercises</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="part-a-basic-exercises">
<h1>Part A: Basic exercises<a class="headerlink" href="#part-a-basic-exercises" title="Permalink to this heading"></a></h1>
<p>This assignment is mainly concerned with algebraic data types and type
classes. Here we will do some exercises involving the <code class="docutils literal notranslate"><span class="pre">Eq</span></code>, <code class="docutils literal notranslate"><span class="pre">Ord</span></code>
and <code class="docutils literal notranslate"><span class="pre">Num</span></code> type classes. There is also a test script for this section
(see below), which you should run to see if your code works correctly
before submitting your assignment.</p>
<section id="eq-and-show-for-nat1">
<h2>1. <code class="docutils literal notranslate"><span class="pre">Eq</span></code> and <code class="docutils literal notranslate"><span class="pre">Show</span></code> for <code class="docutils literal notranslate"><span class="pre">Nat1</span></code><a class="headerlink" href="#eq-and-show-for-nat1" title="Permalink to this heading"></a></h2>
<p>[<strong>1 mark</strong>]</p>
<p>In class, we saw the definition of a simple algebraic data type for
natural numbers:</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">Nat</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Zero</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">Succ</span><span class="w"> </span><span class="kt">Nat</span>
</pre></div>
</div>
<p>We’ll be creating our own variants of this type to experiment with
type class instances.  First, we’ll write the <code class="docutils literal notranslate"><span class="pre">Nat1</span></code> type:</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">Nat1</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Zero1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">Succ1</span><span class="w"> </span><span class="kt">Nat1</span>
</pre></div>
</div>
<p>Write out manual definitions of instances of the <code class="docutils literal notranslate"><span class="pre">Eq</span></code> and <code class="docutils literal notranslate"><span class="pre">Show</span></code>
type classes for <code class="docutils literal notranslate"><span class="pre">Nat1</span></code>.
Make sure that <code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">(Succ1</span> <span class="pre">Zero1)</span></code> returns <code class="docutils literal notranslate"><span class="pre">&quot;Succ1</span> <span class="pre">Zero1&quot;</span></code>
and not <em>e.g.</em> <code class="docutils literal notranslate"><span class="pre">&quot;Succ1</span> <span class="pre">(Zero1)&quot;</span></code>.
For larger numbers, put parentheses around all arguments to <code class="docutils literal notranslate"><span class="pre">Succ1</span></code>
except for <code class="docutils literal notranslate"><span class="pre">Zero1</span></code> (for instance <code class="docutils literal notranslate"><span class="pre">Succ1</span> <span class="pre">(Succ1</span> <span class="pre">Zero1)</span></code> for 2.)</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In this and all the problems
involving <code class="docutils literal notranslate"><span class="pre">Nat</span></code> and <code class="docutils literal notranslate"><span class="pre">Nat</span></code>-like types in this section,
<em>do not</em> convert your <code class="docutils literal notranslate"><span class="pre">Nat</span></code>s (or related types)
to integers (or to other <code class="docutils literal notranslate"><span class="pre">Nat</span></code>-like types)
and do the required operations on the other type
unless we specifically say to do so.
In fact, the only time we will allow this is when the problem is
to convert a <code class="docutils literal notranslate"><span class="pre">Nat</span></code> (or related types) to integers.
If you violate this rule, you will get no credit for those problems.</p>
</div>
</section>
<section id="deriving-eq-and-show-for-nat2">
<h2>2. Deriving <code class="docutils literal notranslate"><span class="pre">Eq</span></code> and <code class="docutils literal notranslate"><span class="pre">Show</span></code> for <code class="docutils literal notranslate"><span class="pre">Nat2</span></code><a class="headerlink" href="#deriving-eq-and-show-for-nat2" title="Permalink to this heading"></a></h2>
<p>[<strong>0.5 marks</strong>]</p>
<p>Next, we’ll define the <code class="docutils literal notranslate"><span class="pre">Nat2</span></code> type:</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">Nat2</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Zero2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">Succ2</span><span class="w"> </span><span class="kt">Nat2</span>
</pre></div>
</div>
<p>Make Haskell derive the <code class="docutils literal notranslate"><span class="pre">Eq</span></code> and <code class="docutils literal notranslate"><span class="pre">Show</span></code> instances
for <code class="docutils literal notranslate"><span class="pre">Nat2</span></code> by adding a <code class="docutils literal notranslate"><span class="pre">deriving</span></code> annotation to this type.</p>
</section>
<section id="ord-for-nat2">
<h2>3. <code class="docutils literal notranslate"><span class="pre">Ord</span></code> for <code class="docutils literal notranslate"><span class="pre">Nat2</span></code><a class="headerlink" href="#ord-for-nat2" title="Permalink to this heading"></a></h2>
<p>[<strong>0.5 marks</strong>]</p>
<p>Write out an explicit instance definition
of the <code class="docutils literal notranslate"><span class="pre">Ord</span></code> type class for the <code class="docutils literal notranslate"><span class="pre">Nat2</span></code> type.
This can be done with a single method definition (for the <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code> operator)
since all other <code class="docutils literal notranslate"><span class="pre">Ord</span></code> methods can be defined in terms of <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>.</p>
<p>Also, note that if we wanted,
we could have Haskell derive the <code class="docutils literal notranslate"><span class="pre">Ord</span></code> instance for us.
Sometimes this will give us the definition we want, and sometimes it won’t.
Will it work in this case? Why or why not?
(Include your answer in a comment.)</p>
</section>
<section id="eq-and-ord-for-signednat">
<h2>4. <code class="docutils literal notranslate"><span class="pre">Eq</span></code> and <code class="docutils literal notranslate"><span class="pre">Ord</span></code> for <code class="docutils literal notranslate"><span class="pre">SignedNat</span></code><a class="headerlink" href="#eq-and-ord-for-signednat" title="Permalink to this heading"></a></h2>
<p>[<strong>1 mark</strong>]</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For the rest of this section, we’ll be using the <code class="docutils literal notranslate"><span class="pre">Nat</span></code> type defined as:</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">Nat</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Zero</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">Succ</span><span class="w"> </span><span class="kt">Nat</span>
<span class="w">  </span><span class="kr">deriving</span><span class="w"> </span><span class="p">(</span><span class="kt">Eq</span><span class="p">,</span><span class="w"> </span><span class="kt">Show</span><span class="p">,</span><span class="w"> </span><span class="kt">Ord</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Let’s say we would like to represent negative numbers as well as natural
numbers, while keeping a unary representation. I’m not sure why we would
want this, but let’s say we do. We define this datatype:</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kr">data</span><span class="w"> </span><span class="kt">SignedNat</span><span class="w"> </span><span class="ow">=</span>
<span class="w">  </span><span class="kt">Neg</span><span class="w"> </span><span class="kt">Nat</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">Pos</span><span class="w"> </span><span class="kt">Nat</span>
<span class="w">  </span><span class="kr">deriving</span><span class="w"> </span><span class="p">(</span><span class="kt">Show</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">Eq</span></code> and <code class="docutils literal notranslate"><span class="pre">Ord</span></code> instances for <code class="docutils literal notranslate"><span class="pre">Nat</span></code> exist
(since we’re deriving them).
Write out the <code class="docutils literal notranslate"><span class="pre">Eq</span></code> and <code class="docutils literal notranslate"><span class="pre">Ord</span></code> instance definitions
for the <code class="docutils literal notranslate"><span class="pre">SignedNat</span></code> type.
Could you just use automatically-derived definitions
for the <code class="docutils literal notranslate"><span class="pre">Eq</span></code> and <code class="docutils literal notranslate"><span class="pre">Ord</span></code> instances?
Write the answer in a comment.</p>
</section>
<section id="num-for-signednat">
<h2>5. <code class="docutils literal notranslate"><span class="pre">Num</span></code> for <code class="docutils literal notranslate"><span class="pre">SignedNat</span></code><a class="headerlink" href="#num-for-signednat" title="Permalink to this heading"></a></h2>
<p>[<strong>3 marks</strong>]</p>
<p>Write out the <code class="docutils literal notranslate"><span class="pre">Num</span></code> instance definition for <code class="docutils literal notranslate"><span class="pre">SignedNat</span></code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<ul class="simple">
<li><p>For details on the <code class="docutils literal notranslate"><span class="pre">Num</span></code> methods see
<a class="reference external" href="https://hackage.haskell.org/package/base/docs/Prelude.html#t:Num">https://hackage.haskell.org/package/base/docs/Prelude.html#t:Num</a>.
(It’s actually more detail than you need.)</p></li>
<li><p>Note that <code class="docutils literal notranslate"><span class="pre">signum</span> <span class="pre">n</span></code> should be <code class="docutils literal notranslate"><span class="pre">-1</span></code> if <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">&lt;</span> <span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">0</span></code> if
<code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">==</span> <span class="pre">0</span></code>, and <code class="docutils literal notranslate"><span class="pre">+1</span></code> if <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">&gt;</span> <span class="pre">0</span></code>, where <code class="docutils literal notranslate"><span class="pre">-1</span></code>, <code class="docutils literal notranslate"><span class="pre">0</span></code>, and
<code class="docutils literal notranslate"><span class="pre">1</span></code> are expressed as their <code class="docutils literal notranslate"><span class="pre">SignedNat</span></code> equivalents.</p></li>
<li><p>A clean way to do this for longer method definitions is to
implement the <code class="docutils literal notranslate"><span class="pre">Num</span></code> methods as separate stand-alone functions
<em>e.g.</em> <code class="docutils literal notranslate"><span class="pre">addSignedNat</span></code>, <code class="docutils literal notranslate"><span class="pre">mulSignedNat</span></code> <em>etc.</em> and then write the
instance definition by referring to those functions. Also note
that you don’t have to implement all 7 <code class="docutils literal notranslate"><span class="pre">Num</span></code> methods;
specifically, you only have to implement one of (<code class="docutils literal notranslate"><span class="pre">(-)</span></code>,
<code class="docutils literal notranslate"><span class="pre">negate</span></code>) because the other can be defined trivially in terms of
it.</p></li>
<li><p>Beware of subtle problems involving zero.</p></li>
<li><p>You’ll probably find it useful to define some helper functions to
do arithmetic operation on <code class="docutils literal notranslate"><span class="pre">Nat</span></code>s.</p></li>
<li><p>Watch out for compiler warnings about non-exhaustive pattern matches!
It’s easy to miss cases.</p></li>
</ul>
</div>
</section>
<section id="signednattointeger">
<h2>6. <code class="docutils literal notranslate"><span class="pre">signedNatToInteger</span></code><a class="headerlink" href="#signednattointeger" title="Permalink to this heading"></a></h2>
<p>[<strong>1 mark</strong>]</p>
<p>Write a function called <code class="docutils literal notranslate"><span class="pre">signedNatToInteger</span></code> which converts a <code class="docutils literal notranslate"><span class="pre">signedNat</span></code>
value to an <code class="docutils literal notranslate"><span class="pre">Integer</span></code>, as the name suggests. This is used by the test suite.</p>
<p>Of course, here you are allowed (required) to convert <code class="docutils literal notranslate"><span class="pre">Nat</span></code>s and
<code class="docutils literal notranslate"><span class="pre">signedNat</span></code>s to integers.</p>
</section>
<section id="unaryinteger">
<h2>7. <code class="docutils literal notranslate"><span class="pre">UnaryInteger</span></code><a class="headerlink" href="#unaryinteger" title="Permalink to this heading"></a></h2>
<p>[<strong>2 marks</strong>]</p>
<p>Is there anything about the <code class="docutils literal notranslate"><span class="pre">SignedNat</span></code> datatype that strikes you as a bit
ugly and redundant? Come up with a different datatype to represent positive and
negative integers called <code class="docutils literal notranslate"><span class="pre">UnaryInteger</span></code> in the spirit of <code class="docutils literal notranslate"><span class="pre">Nat</span></code> (<em>i.e.</em> a
unary encoding) that doesn’t have this redundancy. Does it have any other
problems? Can you think of a way to fix even those problems, possibly at the
cost of increased complexity?</p>
<p>The purpose of this exercise is to illustrate the fact that designing datatypes
involves tradeoffs, and it’s not always possible to do a perfect job. In
particular, there are invariants that you may want Haskell to enforce that
Haskell can’t enforce.</p>
<p>For this problem, we’re not demanding that you come up with the exact datatypes
we did, just that you try some alternatives and think about the problems that
come up.</p>
<p>Also, note that you don’t have to implement the new datatype’s operations. Just
write up the <code class="docutils literal notranslate"><span class="pre">data</span></code> declarations and describe them in words in a comment.</p>
</section>
<section id="generic-factorial">
<h2>8. Generic <code class="docutils literal notranslate"><span class="pre">factorial</span></code><a class="headerlink" href="#generic-factorial" title="Permalink to this heading"></a></h2>
<p>[<strong>1 mark</strong>]</p>
<p>Write a definition of the factorial function called <code class="docutils literal notranslate"><span class="pre">factorial</span></code> which will
work for any instance of <code class="docutils literal notranslate"><span class="pre">Num</span></code> and <code class="docutils literal notranslate"><span class="pre">Ord</span></code>. Make sure that it reports an
error when given a negative number. Verify that it works for the <code class="docutils literal notranslate"><span class="pre">SignedNat</span></code>
datatype by computing the result of <code class="docutils literal notranslate"><span class="pre">factorial</span> <span class="pre">(Pos</span> <span class="pre">(Succ</span> <span class="pre">(Succ</span> <span class="pre">(Succ</span>
<span class="pre">Zero))))</span></code>. (Write the answer in a comment.)</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Remember that integer literals can represent any type which is an
instance of the <code class="docutils literal notranslate"><span class="pre">Num</span></code> type class.</p>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Preamble.html" class="btn btn-neutral float-left" title="Preamble" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="partB_operators.html" class="btn btn-neutral float-right" title="Part B: Operators" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Michael C. Vanier. All rights reserved.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>