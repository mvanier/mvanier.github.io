<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Part C: Miniproject: Sudoku &mdash; The CS 115 book</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/sphinx_highlight.js"></script>
        <script src="../../../../_static/clipboard.min.js"></script>
        <script src="../../../../_static/copybutton.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Assignment 5: Monads and lists, oh my!" href="../../5/index.html" />
    <link rel="prev" title="Part B: Simple standalone programs" href="partB_standalone.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            The CS 115 book, Spring 2023
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../Introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Software.html">Installing the course software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../admin/index.html">Administrative information</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Assignments</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../1/index.html">Assignment 1: Evaluation and recursion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2/index.html">Assignment 2: Algebraic datatypes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../3/index.html">Assignment 3: A touch of class</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Assignment 4: <code class="docutils literal notranslate"><span class="pre">IO</span></code>, <code class="docutils literal notranslate"><span class="pre">IO</span></code>, it’s off to work we go!</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="Preamble.html">Preamble</a></li>
<li class="toctree-l3"><a class="reference internal" href="partA_exercises.html">Part A: Exercises</a></li>
<li class="toctree-l3"><a class="reference internal" href="partB_standalone.html">Part B: Simple standalone programs</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Part C: Miniproject: Sudoku</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#program-description">Program description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#solution-algorithm">Solution algorithm</a></li>
<li class="toctree-l4"><a class="reference internal" href="#inputs-and-outputs">Inputs and outputs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#template-file">Template file</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sample-input-boards-and-running-the-program">Sample input boards and running the program</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../5/index.html">Assignment 5: Monads and lists, oh my!</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">The CS 115 book, Spring 2023</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Assignments</a></li>
          <li class="breadcrumb-item"><a href="../index.html">Assignment 4: <code class="docutils literal notranslate"><span class="pre">IO</span></code>, <code class="docutils literal notranslate"><span class="pre">IO</span></code>, it’s off to work we go!</a></li>
      <li class="breadcrumb-item active">Part C: Miniproject: Sudoku</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="part-c-miniproject-sudoku">
<h1>Part C: Miniproject: Sudoku<a class="headerlink" href="#part-c-miniproject-sudoku" title="Permalink to this heading"></a></h1>
<p>[<strong>10 marks</strong>]</p>
<p>Most of you probably already know how to play Sudoku. If by chance you
don’t, <a class="reference external" href="https://en.wikipedia.org/wiki/Sudoku">here</a> is a link to
teach you the rules. Sudoku puzzles range from quite easy to extremely
difficult. However, computers have a much easier time solving Sudoku
puzzles than humans do, and in this section you’ll be writing a Haskell
program to do just that. Your program should be able to solve the sample
Sudoku puzzles we’ll supply you with in no more than about 30 seconds
per puzzle, though it may take longer on other Sudoku puzzles.</p>
<section id="program-description">
<h2>Program description<a class="headerlink" href="#program-description" title="Permalink to this heading"></a></h2>
<p>The program will read in a file containing a representation of a Sudoku
puzzle, compute the solution to the puzzle, and print the solution to
standard output (the terminal).</p>
</section>
<section id="solution-algorithm">
<h2>Solution algorithm<a class="headerlink" href="#solution-algorithm" title="Permalink to this heading"></a></h2>
<p><strong>We want you to solve this problem imperatively.</strong>
It is possible to write very concise and elegant Sudoku solvers
in a purely functional manner (which is a good exercise)
but that’s not how we want you to do it here.
Instead, the program will read the input board’s contents into an array
(specifically, an <code class="docutils literal notranslate"><span class="pre">IOArray</span></code>). From there, it will mutate the contents
of the array until a solution is reached or until it is determined that
there is no solution.</p>
<p>The solution algorithm works as follows.</p>
<ul>
<li><p>Iterate over the 81 locations in the board row-by-row
and column-by-column within rows.</p></li>
<li><p>If the location is already filled (contains a number between 1 and 9),
leave it alone and keep going.</p></li>
<li><p>If it’s empty (contains a 0), you have to pick a number
to put into the location.
Compute all the possible numbers that could be in this location
(<em>i.e.</em> numbers that don’t conflict with other numbers
in the same row, column, or 3x3 box).
For each of these numbers:</p>
<ul class="simple">
<li><p>Set the location to contain that number.</p></li>
<li><p>Try to (recursively) solve the board starting from the next location.</p></li>
</ul>
<p>If this works, you have your solution, so return <code class="docutils literal notranslate"><span class="pre">True</span></code>
(the board will have mutated to the solution value).</p>
<p>If not, unmake the move (write a zero back into the location)
and try the next move.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Unmaking the move is very important!</strong>
If you forget to do this your program will not work!</p>
</div>
</li>
<li><p>If you are at the last location
and can’t find a suitable number to put there, return <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
</ul>
</section>
<section id="inputs-and-outputs">
<h2>Inputs and outputs<a class="headerlink" href="#inputs-and-outputs" title="Permalink to this heading"></a></h2>
<p>The compiled program will be called <code class="docutils literal notranslate"><span class="pre">sudoku</span></code> and will take a single
argument, which is the name of a file containing a representation of a
board. An example board looks like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>.........
....1..92
.86....4.
..156....
.....362.
......5.7
.3.....8.
.9.8.2...
..7..43..
</pre></div>
</div>
<p>The (<code class="docutils literal notranslate"><span class="pre">.</span></code>)s represent empty squares, and numbers from 1 to 9 mean that
this location in the board has that (fixed) number. The file must
contain nothing else but these characters (not even whitespace at the
ends of lines, other than the necessary newline character).</p>
<p>The internal representation of the board is as a two-dimensional
<code class="docutils literal notranslate"><span class="pre">IOArray</span></code> (indexed by (<code class="docutils literal notranslate"><span class="pre">Int</span></code>, <code class="docutils literal notranslate"><span class="pre">Int</span></code>) pairs) where an empty square
is represented by a zero and a digit from 1 to 9 is represented by the
corresponding <code class="docutils literal notranslate"><span class="pre">Int</span></code> value.</p>
<p>The job of the program is to fill in the locations marked with (<code class="docutils literal notranslate"><span class="pre">.</span></code>)s
so that the board is solved. In this case, the program would output the
following (unique) solution to the Sudoku puzzle:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>412985763
753416892
986327145
271568934
549173628
368249517
634751289
195832476
827694351
</pre></div>
</div>
<p>This output is simply printed to standard output (the terminal).</p>
</section>
<section id="template-file">
<h2>Template file<a class="headerlink" href="#template-file" title="Permalink to this heading"></a></h2>
<p>To get you started,
in the <code class="docutils literal notranslate"><span class="pre">lab4.zip</span></code> file on Canvas,
we are supplying you with a template file called <code class="docutils literal notranslate"><span class="pre">Sudoku.hs</span></code>
that contains some of the less interesting function definitions
pre-written for you.
This will allow you to concentrate on the interesting part
(the board solving code).
You are not absolutely required to use our code
(if you think you can do things better all on your own, you may),
but using it will probably significantly cut down
on the time requirement for this problem.
If you do use our code as a template,
you should substitute your own code
in the location marked <code class="docutils literal notranslate"><span class="pre">{-</span> <span class="pre">TODO</span> <span class="pre">-}</span></code>.
Please remove the <code class="docutils literal notranslate"><span class="pre">{-</span> <span class="pre">TODO</span> <span class="pre">-}</span></code> comment as well!</p>
<p>We are also including the type signatures and comments of all the helper
functions we used in the <code class="docutils literal notranslate"><span class="pre">solveSudoku</span></code> function. You may use these to
guide you in your solution, or write different helper functions as you
see fit. <strong>Note, though, that the solution has to be imperative, not
functional.</strong> Nevertheless, it will be recursive, as described above.</p>
<p>Note that one thing you are not allowed to change is the representation
of the Sudoku board <em>i.e.</em> the type definition:</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kr">type</span><span class="w"> </span><span class="kt">Sudoku</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">IOArray</span><span class="w"> </span><span class="p">(</span><span class="kt">Int</span><span class="p">,</span><span class="w"> </span><span class="kt">Int</span><span class="p">)</span><span class="w"> </span><span class="kt">Int</span>
</pre></div>
</div>
<p>Since this problem is an exercise in doing imperative programming in Haskell,
we want you to solve this program using the <code class="docutils literal notranslate"><span class="pre">IO</span></code> monad and <code class="docutils literal notranslate"><span class="pre">IOArray</span></code>s.</p>
<p>Another thing you are absolutely not allowed to do, of course, is to
copy Sudoku-solving code written in Haskell you find somewhere on the
internet or elsewhere.</p>
</section>
<section id="sample-input-boards-and-running-the-program">
<h2>Sample input boards and running the program<a class="headerlink" href="#sample-input-boards-and-running-the-program" title="Permalink to this heading"></a></h2>
<p>In the <code class="docutils literal notranslate"><span class="pre">lab4.zip</span></code> file,
we are including a directory called <code class="docutils literal notranslate"><span class="pre">boards</span></code> containing ten input boards.
You should use these board files to test your program.
None of them should take your program more than 30 seconds to solve,
and most should take much less time than that.</p>
<p>Test a particular board by running it like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ ./sudoku boards/board1
412985763
753416892
986327145
271568934
549173628
368249517
634751289
195832476
827694351
</pre></div>
</div>
<p>If you want to time it, this should work:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ /usr/bin/time ./sudoku boards/board1
412985763
753416892
986327145
271568934
549173628
368249517
634751289
195832476
827694351
        4.74 real         4.68 user         0.04 sys
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">user</span></code> time gives the actual elapsed time for the run in seconds.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="partB_standalone.html" class="btn btn-neutral float-left" title="Part B: Simple standalone programs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../5/index.html" class="btn btn-neutral float-right" title="Assignment 5: Monads and lists, oh my!" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Michael C. Vanier. All rights reserved.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>