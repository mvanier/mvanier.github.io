<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Part B: Operators &mdash; The CS 115 book</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/sphinx_highlight.js"></script>
        <script src="../../../../_static/clipboard.min.js"></script>
        <script src="../../../../_static/copybutton.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Part C: Miniproject: Sparse Matrices" href="partC_sparse_matrices.html" />
    <link rel="prev" title="Part A: Basic exercises" href="partA_exercises.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            The CS 115 book, Spring 2023
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../Introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Software.html">Installing the course software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../admin/index.html">Administrative information</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Assignments</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../1/index.html">Assignment 1: Evaluation and recursion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2/index.html">Assignment 2: Algebraic datatypes</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Assignment 3: A touch of class</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="Preamble.html">Preamble</a></li>
<li class="toctree-l3"><a class="reference internal" href="partA_exercises.html">Part A: Basic exercises</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Part B: Operators</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#what-is-the-associativity-of-this-operator">1. What is the associativity of this operator?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#a-curious-operator">2. A curious operator</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="partC_sparse_matrices.html">Part C: Miniproject: Sparse Matrices</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../4/index.html">Assignment 4: <code class="docutils literal notranslate"><span class="pre">IO</span></code>, <code class="docutils literal notranslate"><span class="pre">IO</span></code>, it’s off to work we go!</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../5/index.html">Assignment 5: Monads and lists, oh my!</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../6/index.html">Assignment 6: Fun with parsing</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">The CS 115 book, Spring 2023</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Assignments</a></li>
          <li class="breadcrumb-item"><a href="../index.html">Assignment 3: A touch of class</a></li>
      <li class="breadcrumb-item active">Part B: Operators</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="part-b-operators">
<h1>Part B: Operators<a class="headerlink" href="#part-b-operators" title="Permalink to this heading"></a></h1>
<p>In mathematics, an <em>associative</em> operator <code class="docutils literal notranslate"><span class="pre">OP</span></code> is one that has the
property that <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">OP</span> <span class="pre">(y</span> <span class="pre">OP</span> <span class="pre">z)</span> <span class="pre">==</span> <span class="pre">(x</span> <span class="pre">OP</span> <span class="pre">y)</span> <span class="pre">OP</span> <span class="pre">z</span></code>. In other words, in a
chained operator expression of the form <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">OP</span> <span class="pre">y</span> <span class="pre">OP</span> <span class="pre">z</span></code>, where you put
the parentheses doesn’t matter; you can interpret the expression as
either <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">OP</span> <span class="pre">(y</span> <span class="pre">OP</span> <span class="pre">z)</span></code> or <code class="docutils literal notranslate"><span class="pre">(x</span> <span class="pre">OP</span> <span class="pre">y)</span> <span class="pre">OP</span> <span class="pre">z</span></code> and it will mean the same
thing.</p>
<p>Associativity in programming languages like Haskell doesn’t usually mean this
kind of associativity, because most programming languages (including Haskell)
aren’t powerful enough to express the concept of mathematical associativity.
Instead, associativity (more technically known as <em>fixity</em>) is just a syntactic
property of an operator which allows the parser to correctly interpret
expressions of the form <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">OP</span> <span class="pre">y</span> <span class="pre">OP</span> <span class="pre">z</span></code>.</p>
<p>If the operator <code class="docutils literal notranslate"><span class="pre">OP</span></code> is “left-associative”,
this will be interpreted as <code class="docutils literal notranslate"><span class="pre">(x</span> <span class="pre">OP</span> <span class="pre">y)</span> <span class="pre">OP</span> <span class="pre">z</span></code>
(put the parentheses around the leftmost operator subexpression).
If it’s “right-associative”, it will be interpreted as <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">OP</span> <span class="pre">(y</span> <span class="pre">OP</span> <span class="pre">z)</span></code>
(put the parentheses around the rightmost operator subexpression).
If it’s “non-associative”, simply disallow the expression altogether
(<em>i.e.</em> require the programmer to explicitly put the parentheses in
to indicate what the intended meaning is).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Some operators can only be non-associative,
because they can’t be chained in this way due to their types.</p>
</div>
<p>Haskell allows you to define your own operators and to set both the
precedence of the operators (from 0 to 9) and their
associativities/fixities (<code class="docutils literal notranslate"><span class="pre">infix</span></code> for non-associative, <code class="docutils literal notranslate"><span class="pre">infixl</span></code> for
left-associative, or <code class="docutils literal notranslate"><span class="pre">infixr</span></code> for right-associative). The default
associativity (in case you don’t set it) is left-associative.</p>
<p>Some operators have type signatures which require a particular associativity to
work in chained operator expressions, while with other operators, you have a
choice, though sometimes one choice is much better than another. For instance,
the “cons” operator (<code class="docutils literal notranslate"><span class="pre">:</span></code>) must be right-associative for expressions like <code class="docutils literal notranslate"><span class="pre">1</span>
<span class="pre">:</span> <span class="pre">2</span> <span class="pre">:</span> <span class="pre">[3]</span></code> to work, while the addition operator (<code class="docutils literal notranslate"><span class="pre">+</span></code>) can be either right-
or left-associative (it’s actually left-associative, but it would work
correctly either way). Some operators like the division operator (<code class="docutils literal notranslate"><span class="pre">/</span></code>)
could theoretically be either right- or left-associative but are
left-associative to conform to mathematical practice (because the <code class="docutils literal notranslate"><span class="pre">/</span></code>
operator is not associative in the mathematical sense, so
right-associative and left-associative interpretations of chained
operators give different results). Some operators like the equality
operator (<code class="docutils literal notranslate"><span class="pre">==</span></code>) are non-associative; you might wish that an expression
like <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">==</span> <span class="pre">y</span> <span class="pre">==</span> <span class="pre">z</span></code> means the same thing as <code class="docutils literal notranslate"><span class="pre">(x</span> <span class="pre">==</span> <span class="pre">y)</span> <span class="pre">&amp;&amp;</span> <span class="pre">(x</span> <span class="pre">==</span> <span class="pre">z)</span></code> but
it doesn’t (in fact, it’s a syntax error). This makes sense, because <code class="docutils literal notranslate"><span class="pre">x</span>
<span class="pre">==</span> <span class="pre">(y</span> <span class="pre">==</span> <span class="pre">z)</span></code> requires that <code class="docutils literal notranslate"><span class="pre">x</span></code> but not <code class="docutils literal notranslate"><span class="pre">y</span></code> or <code class="docutils literal notranslate"><span class="pre">z</span></code> be a <code class="docutils literal notranslate"><span class="pre">Bool</span></code>,
while <code class="docutils literal notranslate"><span class="pre">(x</span> <span class="pre">==</span> <span class="pre">y)</span> <span class="pre">==</span> <span class="pre">z</span></code> requires that <code class="docutils literal notranslate"><span class="pre">z</span></code> but not <code class="docutils literal notranslate"><span class="pre">x</span></code> or <code class="docutils literal notranslate"><span class="pre">y</span></code> be a
<code class="docutils literal notranslate"><span class="pre">Bool</span></code>. The point is, you sometimes have to think a bit in order to set
the associativity of a user-defined operator correctly.</p>
<p>Note also that Haskell allows you to set invalid associativities for
your operators! Any operator can be declared <code class="docutils literal notranslate"><span class="pre">infix</span></code>, which simply
means that chained operator expressions using that operator become parse
errors and are rejected. Or an operator which should be declared
<code class="docutils literal notranslate"><span class="pre">infixr</span></code> could be declared <code class="docutils literal notranslate"><span class="pre">infixl</span></code> instead, which means that
chained operator expressions will be interpreted incorrectly, leading to
type errors in some cases and other kinds of errors in other cases.</p>
<p>Also, operators in Haskell (including user-defined operators) can only
be made from “operator characters”, which means symbolic characters (not
<code class="docutils literal notranslate"><span class="pre">A-Z</span></code> or <code class="docutils literal notranslate"><span class="pre">a-z</span></code> or <code class="docutils literal notranslate"><span class="pre">0-9</span></code> or <code class="docutils literal notranslate"><span class="pre">_</span></code>) and not including some
characters with special functions (like parentheses, square brackets
<em>etc.</em>).</p>
<section id="what-is-the-associativity-of-this-operator">
<h2>1. What is the associativity of this operator?<a class="headerlink" href="#what-is-the-associativity-of-this-operator" title="Permalink to this heading"></a></h2>
<p>[<strong>5 marks</strong>]</p>
<p>For the first part of this problem, we will show you some new operators
we’ve defined, and you should indicate what the associativity (fixity)
should be. Here are your choices:</p>
<ul class="simple">
<li><p>If neither <code class="docutils literal notranslate"><span class="pre">infixr</span></code> or <code class="docutils literal notranslate"><span class="pre">infixl</span></code> will work with chained operator
expressions (<em>i.e.</em> both of them lead to type errors), declare it to be
<code class="docutils literal notranslate"><span class="pre">infix</span></code> (non-associative).</p></li>
<li><p>If the operator can be declared either <code class="docutils literal notranslate"><span class="pre">infixr</span></code> or <code class="docutils literal notranslate"><span class="pre">infixl</span></code>
without resulting in a type error for chained operator expressions,
declare it <code class="docutils literal notranslate"><span class="pre">infixl</span></code> but add a comment stating that it could be
<code class="docutils literal notranslate"><span class="pre">infixr</span></code> as well.</p></li>
<li><p>If the operator can be declared as only one of <code class="docutils literal notranslate"><span class="pre">infixr</span></code> or
<code class="docutils literal notranslate"><span class="pre">infixl</span></code> without resulting in a type error for chained operator
expressions, declare it to be the correct associativity (either
<code class="docutils literal notranslate"><span class="pre">infixr</span></code> or <code class="docutils literal notranslate"><span class="pre">infixl</span></code>; whichever works).</p></li>
</ul>
<p>When figuring out if a “chained operator expression” works for either
the <code class="docutils literal notranslate"><span class="pre">infixr</span></code> or <code class="docutils literal notranslate"><span class="pre">infixl</span></code> associativity, choose whichever values you
like as arguments to the operator; if any choice of arguments works,
it’s valid for that associativity. Give one example of a chained
operator expression in that case. No examples are needed if the correct
associativity is <code class="docutils literal notranslate"><span class="pre">infix</span></code> (<em>i.e.</em> non-associative).</p>
<p>Here are the operators (just a description, not a definition):</p>
<ul class="simple">
<li><p>The operator <code class="docutils literal notranslate"><span class="pre">&gt;#&lt;</span></code> compares two integer scores and tells you the
winner. For example, <code class="docutils literal notranslate"><span class="pre">51</span> <span class="pre">&gt;#&lt;</span> <span class="pre">40</span> <span class="pre">=</span> <span class="pre">&quot;First</span> <span class="pre">Player&quot;</span></code>, and
<code class="docutils literal notranslate"><span class="pre">21</span> <span class="pre">&gt;#&lt;</span> <span class="pre">21</span> <span class="pre">=</span> <span class="pre">&quot;Tie&quot;</span></code>. It has type
<code class="docutils literal notranslate"><span class="pre">Integer</span> <span class="pre">-&gt;</span> <span class="pre">Integer</span> <span class="pre">-&gt;</span> <span class="pre">String</span></code>.</p></li>
<li><p>The operator <code class="docutils literal notranslate"><span class="pre">+|</span></code> adds two integers and takes the last digit of
their sum. For example, <code class="docutils literal notranslate"><span class="pre">7</span> <span class="pre">+|</span> <span class="pre">6</span> <span class="pre">=</span> <span class="pre">3</span></code>. It has type
<code class="docutils literal notranslate"><span class="pre">Integer</span> <span class="pre">-&gt;</span> <span class="pre">Integer</span> <span class="pre">-&gt;</span> <span class="pre">Integer</span></code>.</p></li>
<li><p>The operator <code class="docutils literal notranslate"><span class="pre">&amp;&lt;</span></code> appends an integer to the end of a list. For
example, <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2]</span> <span class="pre">&amp;&lt;</span> <span class="pre">3</span> <span class="pre">=</span> <span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]</span></code>. It has type
<code class="docutils literal notranslate"><span class="pre">[Integer]</span> <span class="pre">-&gt;</span> <span class="pre">Integer</span> <span class="pre">-&gt;</span> <span class="pre">[Integer]</span></code>, where <code class="docutils literal notranslate"><span class="pre">[Integer]</span></code>
means a list of integers.</p></li>
<li><p>An operator <code class="docutils literal notranslate"><span class="pre">&gt;&amp;&amp;</span></code> that “cons”es an integer twice to the beginning
of a list. For example, <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">&gt;&amp;&amp;</span> <span class="pre">[2,</span> <span class="pre">3]</span> <span class="pre">=</span> <span class="pre">[1,</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">3]</span></code>. It has type
<code class="docutils literal notranslate"><span class="pre">Integer</span> <span class="pre">-&gt;</span> <span class="pre">[Integer]</span> <span class="pre">-&gt;</span> <span class="pre">[Integer]</span></code>.</p></li>
</ul>
<p>Write your answers in a Haskell comment,
along with a brief explanation of why that answer is correct,
plus examples (if needed).</p>
</section>
<section id="a-curious-operator">
<h2>2. A curious operator<a class="headerlink" href="#a-curious-operator" title="Permalink to this heading"></a></h2>
<p>[<strong>5 marks</strong>]</p>
<p>Now consider an operator <code class="docutils literal notranslate"><span class="pre">+#</span></code> that adds two integers and tells you how
many digits long their sum is. For example, <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">+#</span> <span class="pre">800</span> <span class="pre">=</span> <span class="pre">3</span></code>, since
<code class="docutils literal notranslate"><span class="pre">802</span></code> is three digits long. It has type
<code class="docutils literal notranslate"><span class="pre">Integer</span> <span class="pre">-&gt;</span> <span class="pre">Integer</span> <span class="pre">-&gt;</span> <span class="pre">Integer</span></code>. What <em>could</em> its associativity
be in order to allow chained operators to type check (give all answers
that work). What <em>should</em> its associativity be?</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Try writing out some examples.</p>
</div>
<p>Again, write your answers in a Haskell comment,
and explain why the answers are correct.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="partA_exercises.html" class="btn btn-neutral float-left" title="Part A: Basic exercises" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="partC_sparse_matrices.html" class="btn btn-neutral float-right" title="Part C: Miniproject: Sparse Matrices" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Michael C. Vanier. All rights reserved.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>