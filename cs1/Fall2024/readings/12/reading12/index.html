
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://mvanier.github.io/cs1/Fall2024/book/12/reading12/">
      
      
        <link rel="prev" href="../../11/reading11/">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.27">
    
    
      
        <title>12. Files - The CS 1 book (Fall 2024)</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#reading-12-files" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="The CS 1 book (Fall 2024)" class="md-header__button md-logo" aria-label="The CS 1 book (Fall 2024)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            The CS 1 book (Fall 2024)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              12. Files
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to medium mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to medium mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="medium" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18V6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-2.69L23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="The CS 1 book (Fall 2024)" class="md-nav__button md-logo" aria-label="The CS 1 book (Fall 2024)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    The CS 1 book (Fall 2024)
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Readings
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Readings
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1/reading1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Introduction, part 1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2/reading2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Introduction, part 2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3/reading3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Strings, part 1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../4/reading4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. Strings, part 2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../5/reading5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. Objects and methods
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6/reading6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6. Modules
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../7/reading7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7. Documenting your code
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../8/reading8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    8. Lists
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../9/reading9/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    9. Loops
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../10/reading10/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    10. Conditionals
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../11/reading11/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    11. Loops, part 2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    12. Files
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    12. Files
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#topics" class="md-nav__link">
    <span class="md-ellipsis">
      Topics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why-files" class="md-nav__link">
    <span class="md-ellipsis">
      Why files?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#binary-and-text-files" class="md-nav__link">
    <span class="md-ellipsis">
      Binary and text files
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#an-example" class="md-nav__link">
    <span class="md-ellipsis">
      An example
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#opening-a-file" class="md-nav__link">
    <span class="md-ellipsis">
      Opening a file
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#file-paths-and-the-file-system" class="md-nav__link">
    <span class="md-ellipsis">
      File paths and the file system
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#closing-a-file" class="md-nav__link">
    <span class="md-ellipsis">
      Closing a file
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reading-from-text-files" class="md-nav__link">
    <span class="md-ellipsis">
      Reading from text files
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Reading from text files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-readlines-method-on-files" class="md-nav__link">
    <span class="md-ellipsis">
      The readlines method on files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a-pitfall" class="md-nav__link">
    <span class="md-ellipsis">
      A pitfall
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-readline-method-on-files" class="md-nav__link">
    <span class="md-ellipsis">
      The readline method on files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-dry-principle-again" class="md-nav__link">
    <span class="md-ellipsis">
      The D.R.Y. principle again
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#looking-forward" class="md-nav__link">
    <span class="md-ellipsis">
      Looking forward
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#topics" class="md-nav__link">
    <span class="md-ellipsis">
      Topics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why-files" class="md-nav__link">
    <span class="md-ellipsis">
      Why files?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#binary-and-text-files" class="md-nav__link">
    <span class="md-ellipsis">
      Binary and text files
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#an-example" class="md-nav__link">
    <span class="md-ellipsis">
      An example
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#opening-a-file" class="md-nav__link">
    <span class="md-ellipsis">
      Opening a file
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#file-paths-and-the-file-system" class="md-nav__link">
    <span class="md-ellipsis">
      File paths and the file system
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#closing-a-file" class="md-nav__link">
    <span class="md-ellipsis">
      Closing a file
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reading-from-text-files" class="md-nav__link">
    <span class="md-ellipsis">
      Reading from text files
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Reading from text files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-readlines-method-on-files" class="md-nav__link">
    <span class="md-ellipsis">
      The readlines method on files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a-pitfall" class="md-nav__link">
    <span class="md-ellipsis">
      A pitfall
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-readline-method-on-files" class="md-nav__link">
    <span class="md-ellipsis">
      The readline method on files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-dry-principle-again" class="md-nav__link">
    <span class="md-ellipsis">
      The D.R.Y. principle again
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#looking-forward" class="md-nav__link">
    <span class="md-ellipsis">
      Looking forward
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="reading-12-files">Reading 12: Files</h1>
<blockquote>
<p><em>I bought a donut and they gave me a receipt for the donut.<br/>
I don't need a receipt for a donut!<br/>
I'll just give you the money, and you give me the donut. End of transaction!<br/>
We don't need to bring ink and paper into this!<br/>
I can't imagine a scenario where I'd have to prove that I bought a donut.<br/>
Some skeptical friend...<br/>
"Don't even act like I didn't get that donut!<br/>
I've got the documentation right here!<br/>
Oh, wait, it's back home, in the file. Under D...for donut."</em><br/>
- Mitch Hedberg</p>
</blockquote>
<h2 id="overview">Overview</h2>
<p>In this reading we'll talk about <em>files</em>,
which are the most basic way to store data permanently.</p>
<h2 id="topics">Topics</h2>
<ul>
<li>Files</li>
<li>Binary and text files</li>
<li>Opening and closing files</li>
<li>Reading from text files</li>
</ul>
<h2 id="why-files">Why files?</h2>
<p>Data that computer programs act on can be either <em>temporary</em> or <em>permanent</em>.
Values of program variables are temporary
(they disappear when a program exits).
But we often want to work with more permanent data.
For example, if we are analyzing some data,
we probably want the raw data to be available in some permanent form
so that we can analyze it in multiple ways,
or so that we can add more data as it comes in.
The most basic way to store data in a permanent way on a computer
is to use a <strong>file</strong>.<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup></p>
<p>The word "file" is borrowed from its more traditional use
as a folder in a "file cabinet",
where paper records have been stored since at least the mid-1800s.
In the context of computers,
a "file" is a data structure that is stored on some permanent medium
(such as a hard disk, a solid state disk,
flash memory, or even magnetic tape).
The important things about a file are that</p>
<ul>
<li>
<p>it contains data</p>
</li>
<li>
<p>the data it contains does not go away when a program exits
or when the computer it is stored on is switched off</p>
</li>
</ul>
<p>We say that data stored in files is "persistent" for this reason;
it "persists" even when you turn your computer off.</p>
<p>We've already been working with files, of course.
Every time you write a program (say, a CS 1 assignment),
you are creating a file.
Program source code is traditionally stored in files,
but files are used for much more than this:</p>
<ul>
<li>scientific data</li>
<li>media of all types (books, PDFs, audio files, video files)</li>
<li>executable (binary) versions of computer programs</li>
<li>configuration information</li>
<li>personal information</li>
</ul>
<p>and much more.
Without files, most of what we do with computers would not be possible.</p>
<h2 id="binary-and-text-files">Binary and text files</h2>
<p>We can distinguish two primary types of files
based on the way the data is formatted: <em>binary</em> files and <em>text</em> files.
The word <em>binary</em> just means that it is made up of raw <code>0</code>s and <code>1</code>s
(<strong>binary numbers</strong>) stored on a computer disk.<sup id="fnref:2"><a class="footnote-ref" href="#fn:2">2</a></sup>
Of course, computer disks don't store <em>actual</em> <code>0</code>s and <code>1</code>s
(whatever that might mean);
they store a physical representation of them
in terms of some physical property that can have one of two states
(for instance, the magnetization state of a tiny area of a metal disk,
or the electric charge stored in a flash memory cell).</p>
<figure>
<img alt="Image title" src="../images/bits.jpg" width="600" />
<figcaption>
Data: it's all just bits!
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">Aside: Ternary computers</p>
<p>There is no fundamental reason why data has to be stored as bits
(base 2 numbers).
From an engineering standpoint, though, it makes sense:
it's a lot easier to store data on a computer
if you only have to distinguish between two physical states
than if you have to distinguish between more than two states.
But other ways of encoding data have been tried.
For instance, some computers made in the Soviet Union
in the late 1950s to the early 1970s
used base-3 (<em>ternary</em>) numbers,
which actually have some theoretical advantages;
it's possible that base-3 computers may become popular again.
For more information on these unusual computers see
<a href="https://en.wikipedia.org/wiki/Ternary_computer">this Wikipedia article</a>.</p>
</div>
<p>When we speak of a binary file, we just mean a "raw" file that can be anything.
In fact, <em>all</em> files on a computer are binary files.  But some files store
their bits in particular ways that make sense for a particular kind of data.
We refer to these "ways of storing bits in a file" as a file's <em>encoding</em>.  One
very common kind of file encoding is as a <em>text file</em>.</p>
<p>A text file is a file where each consecutive sequence of 8 bits
(called a <strong>byte</strong>) represents a single character.<sup id="fnref:3"><a class="footnote-ref" href="#fn:3">3</a></sup>
These files are easy to read because a program can read a single byte
and immediately convert it into the appropriate character;
they are easy to write for similar reasons.
In this course, when we say "file" we will usually mean "text file".
Nevertheless, non-text files are very important;
if your program reads or writes images, or audio, or video,
it will need to use non-text file encodings.</p>
<h2 id="an-example">An example</h2>
<p>Let's assume there is a text file called <code>temps.txt</code>
containing temperature data taken once per day at noon.
This file could be large (more than 1000 entries).
We will assume that the text file has exactly one temperature number per line.
We want to read numbers from this file and compute values from them.</p>
<p>Since <code>temps.txt</code> is a text file, it contains a sequence of characters.
These characters can be interpreted as numbers.
For instance, the file might look like this:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="mf">78.2</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="mf">68.3</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="mf">59.0</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="mf">88.1</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="mf">49.5</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="mf">99.0</span>
</span></code></pre></div>
<p>Of course, a real file of temperature data would probably be much larger.
We'll work with this file for the rest of this reading.</p>
<h2 id="opening-a-file">Opening a file</h2>
<p>Files in Python are represented as <em>file objects</em>
<em>i.e.</em> objects which represent a file on a hard drive
(or some other storage medium <em>e.g.</em> a solid-state drive).
These are <em>not</em> the same thing as the file itself;
instead, they provide a convenient way
to interact with the file from Python.</p>
<p>Before we work with a file,
we have to create a file object in Python
that is linked to the real file.
After that, doing an operation on a file operations
just means calling a method on the file object.
File objects are created using the <code>open</code> function.</p>
<div class="language-pycon highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">temps</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;temps.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">temps</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="go">&lt;_io.TextIOWrapper name=&#39;temps.txt&#39; mode=&#39;r&#39; encoding=&#39;UTF-8&#39;&gt;</span>
</span></code></pre></div>
<p>You don't need to understand everything that is printed out
when you enter <code>temps</code>,
but it's Python's way of telling you that <code>temps</code>
is an object of the class <code>_io.TextIOWrapper</code>
with the name <code>temps.txt</code>, the mode <code>r</code> and the encoding <code>UTF-8</code>.
(We haven't learned about classes yet, but we will.)
You might expect it to say <code>file</code> somewhere;
actually, <code>_io.TextIOWrapper</code> is (in Python)
a more general version of a file.
The <code>UTF-8</code> encoding is one of the standard encodings for text files.<sup id="fnref:4"><a class="footnote-ref" href="#fn:4">4</a></sup></p>
<p>What's important here is that the <code>temps</code> object is a Python object
that is able to do operations
on the actual file <code>temps.txt</code> by calling its methods.
Before we get to that,
let's look at the <code>open</code> function in more detail.</p>
<p>The <code>open</code> function is used to create file objects given a file name.
A call to <code>open</code> looks schematically like this:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nb">open</span><span class="p">(</span><span class="o">&lt;</span><span class="n">name</span> <span class="n">of</span> <span class="n">file</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">mode</span><span class="o">&gt;</span><span class="p">)</span>
</span></code></pre></div>
<p>This function returns a Python file object.
The <code>&lt;name of file&gt;</code> argument is the file's name as a string.
The <code>&lt;mode&gt;</code> argument is one or more characters
that describe how the file can be used.
We won't go through all the possible mode values;
a full list is
<a href="https://docs.python.org/3/library/functions.html#open">here</a>
if you're interested.
For our purposes, you should know these three modes:</p>
<ul>
<li>
<p><code>'r'</code> &mdash; the file is opened read-only;</p>
</li>
<li>
<p><code>'w'</code> &mdash; the file is opened write-only;
if the file already existed before the <code>open</code> call,
it will be wiped out and overwritten;</p>
</li>
<li>
<p><code>'a'</code> &mdash; the file is opened write-only;
if the file already existed before the <code>open</code> call,
writing to the file will append the new text to the end of the file.</p>
</li>
</ul>
<p>For the <code>'r'</code> and <code>'a'</code> modes, if the file doesn't exist,
a <code>FileNotFoundError</code> exception is raised.</p>
<p>In this case, we are reading from an existing file called <code>temps.txt</code>
and we are not going to write back into that file,
so the <code>'r'</code> mode is appropriate.</p>
<p>If you leave off the <code>&lt;mode&gt;</code> argument, then <code>'r'</code> is assumed
(this is called a <em>default argument</em>,
and we'll learn more about it in later readings).
For instance:</p>
<div class="language-pycon highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;foo.txt&#39;</span><span class="p">)</span>
</span></code></pre></div>
<p>is the same as:</p>
<div class="language-pycon highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;foo.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
</span></code></pre></div>
<h2 id="file-paths-and-the-file-system">File paths and the file system</h2>
<p>When you open a file, you have to specify the name of the file,
but it's more involved than that.
The string you provide is called a <strong>file path</strong>
and it represents a file's "location" in the <strong>file system</strong>.
You don't need to understand the file system
other than to understand that it's a series of nested <strong>directories</strong>
which are places where files can be located.</p>
<p>The topmost directory in the file system is called the <strong>root</strong> directory;
on many computers (notably MacOS and Linux)
the root directory is identified by a single forward slash (<code>/</code>);
on Windows it's a backwards slash (<code>\</code>) (usually called a "backslash").
The topmost directory where you can store your files
is called your <strong>home</strong> directory.
You can create subdirectories whenever you want,
and it's a good idea to do so in order to organize your files.</p>
<div class="admonition note">
<p class="admonition-title">Directories</p>
<p>Creating and navigating through directories
is outside the scope of these readings.
Most of the time, this is done outside of Python,
either in a graphical program called a <strong>file manager</strong>,
or in the terminal using special commands.
For instance, on Linux and MacOS,
relevant terminal commands include:</p>
<ul>
<li><code>cd</code> &mdash; change directories</li>
<li><code>mkdir</code> &mdash; make a new directory</li>
<li><code>ls</code> &mdash; list the files in a directory</li>
</ul>
<p>Windows terminals use different commands to achieve the same thing.</p>
</div>
<p>Many programs that run on your computer
(for instance, terminal programs and text editors)
keep track of a <em>current directory</em> which they are able to access directly.
The Python interpreter also keeps track of the current directory.
Unless you do something unusual,
this will be the directory in which you started Python.
You can access this from the Python interpreter
by importing the <code>os</code> module and calling the <code>getcwd</code>
(<strong>get</strong> <strong>c</strong>urrent <strong>w</strong>orking <strong>d</strong>irectory) function:</p>
<div class="language-pycon highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="go">&#39;/Users/student&#39;</span>
</span></code></pre></div>
<p>[Of course, on your computer it will probably return a different result.]</p>
<p>A file path always ends with the name of the file.
If that's all there is,
then the file is assumed to be in the current directory.
If you want to open a file that isn't in the current directory,
you have these choices:</p>
<ul>
<li>
<p>You can specify an <em>absolute path</em>.
This is a list of all the directories
starting from the root directory and ending in the current directory,
plus the file name, separated by slashes
(forward slashes for MacOS/Linux, backslashes for Windows).
For instance:</p>
<div class="language-pycon highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;/Users/student/cs1/assignments/1/lab1.data&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
</span></code></pre></div>
<p>(This assumes that a file named <code>lab1.data</code>
exists in the directory <code>/Users/student/cs1/assignments/1</code>.)<sup id="fnref:5"><a class="footnote-ref" href="#fn:5">5</a></sup></p>
</li>
<li>
<p>You can specify a <em>relative path</em>.
This is like an absolute path,
but it starts from the current directory instead of the root directory.
This is indicated by dropping the initial slash character.
For instance, if you are in the <code>'/Users/student/cs1'</code> directory,
you might type:</p>
<div class="language-pycon highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;assignments/1/lab1.data&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
</span></code></pre></div>
<p>to open the same file as before.</p>
</li>
</ul>
<p>There are two more things you may find in a file path:</p>
<ol>
<li>
<p>The <code>.</code> character by itself means the current directory.</p>
</li>
<li>
<p>The <code>..</code> characters means the <em>parent</em> of the current directory,
which is "one up" in the directory tree.</p>
</li>
</ol>
<p>You can use these to create arbitrarily complicated paths.
For example, if the current directory is <code>/Users/student/cs2/assignments/2</code>
and you wanted to open <code>/Users/student/cs1/assignments/1/lab1.data</code>
you could type:</p>
<div class="language-pycon highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;../1/lab1.data&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
</span></code></pre></div>
<p>instead of the much longer</p>
<div class="language-pycon highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;/Users/student/cs1/assignments/1/lab1.data&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
</span></code></pre></div>
<p>That's enough about file paths for now.  You'll soon get used to them.</p>
<h2 id="closing-a-file">Closing a file</h2>
<p>Before we get to the interesting stuff
(which is how to read information from a file),
we need to talk briefly about closing files.
Once we are done working with a file, we should <em>close</em> it,
which means to make it so that no further actions (reads or writes)
can be done to the file.
We do this by calling the file object's <code>close</code> method.
For instance:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;temps.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="c1"># ... read data from the file object ...</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>  <span class="c1"># close the file</span>
</span></code></pre></div>
<p>After closing a file,
any attempt to read from (or write to) the file will result in an error.</p>
<p>If a file isn't closed,
it will eventually be closed anyway once the program exits.
However, it is bad practice to have large numbers of open files
in a program which are no longer being used.
Most operating systems have a limit
on the number of files that can be open at the same time,
and if you are collecting data from a lot of files,
you might exceed that limit.
It's better to close a file as soon as you no longer need it.</p>
<h2 id="reading-from-text-files">Reading from text files</h2>
<p>Probably the most common thing to do with text files
is to read lines from them.
Of course, text files are actually just linear sequences of characters
(like strings stored on a disk drive).
We can think of them as sequences of lines,
where a "line" is a sequence of characters ending in a newline character
(the <code>'\n'</code> character).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Files are not true Python sequences
in the sense that a string or a list is a Python sequence.
For instance, you can't use the square bracket syntax on file objects
to get a particular line.</p>
</div>
<p>Python has two basic methods for reading lines from text files,
which we now describe.</p>
<h3 id="the-readlines-method-on-files">The <code>readlines</code> method on files</h3>
<p>We'll start with the <code>readlines</code> method, because it's conceptually simpler.
What this method does is to return all the lines in a file
as a list of strings.
This method is very easy to use.
Typically, you have some code like this:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;temps.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="n">lines</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></code></pre></div>
<p>and then you can use the <code>lines</code> list however you want.
If you look at the <code>lines</code> list you'll see that it's a list of strings,
where each string ends in a newline character:<sup id="fnref:6"><a class="footnote-ref" href="#fn:6">6</a></sup></p>
<div class="language-pycon highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">lines</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="go">[&#39;78.2\n&#39;, &#39;68.3\n&#39;, &#39;59.0\n&#39;, &#39;88.1\n&#39;, &#39;49.5\n&#39;, &#39;99.0\n&#39;]</span>
</span></code></pre></div>
<p>Note that this is <em>not</em> a list of <code>float</code>s,
even though that's really what we want.
We would have to convert each string to a float
in order to get the list we want.
Here's one (bad) way to do it:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;temps.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="n">lines</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>    <span class="n">line</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span></code></pre></div>
<p>At the end of this, <code>lines</code> will now be a list of <code>float</code>s,
each representing a temperature.
Although this works, it's bad because the name <code>line</code> suggests a string,
and what we want are numbers.<sup id="fnref:7"><a class="footnote-ref" href="#fn:7">7</a></sup>
In this case, you would be better off creating a new list of numbers.
That code might look like this:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;temps.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="n">lines</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="n">nums</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>    <span class="n">nums</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>
</span></code></pre></div>
<p>Then we could use the <code>nums</code> list for whatever we wanted.
On the other hand, this second version has a problem too:
if the file is very long, you are creating two big lists in memory,
where previously you were creating only one.
It would be better if we could go through the file line by line,
convert each line to a <code>float</code>, and append it to the <code>nums</code> list
without ever having to save the <code>lines</code> list.
But since we used the <code>readlines</code> method,
we've already created the <code>lines</code> list, so this won't work.
We have to try a different approach.</p>
<h3 id="a-pitfall">A pitfall</h3>
<p>We'll get back to the example shortly,
but we want to alert you to something
that can be confusing for new programmers.
Once you have read one or more lines of text from a text file into a list,
the strings in the list are <em>completely independent</em>
of the lines in the file they came from.
So if you change any of the lines in the list,
the file will <em>not</em> change as a result.
<em>Files are not lists and can't be altered like lists.</em>
(There <em>are</em> ways to change the contents of files,
and we will see one of them below, but it's not this simple.)</p>
<p>For instance, this code:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;temps.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="n">lines</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;0.0</span><span class="se">\n</span><span class="s1">&#39;</span>
</span></code></pre></div>
<p>will not change the first number in the file to <code>0.0</code>.
In fact, the file can't be changed at all,
since you opened it in read-only mode.</p>
<h3 id="the-readline-method-on-files">The <code>readline</code> method on files</h3>
<p>Getting back to our problem, what we have seen is that
there are many situations where
you would like to be able to read the lines in a file one at a time
without storing the lines in a list.
In fact, this is the usual situation.
Once you read a line, you may convert it into some other kind of data,
you may save that data in some way or use it to compute something else,
and once you've done this, you no longer need the original line.</p>
<p>For this kind of case, Python provides the <code>readline</code> method.
It reads a <em>single</em> line from a file and returns it
(including the newline character at the end of the line).
The file object also keeps track of
where in the file the line was read from,
so that the next time the method is called,
it will read the <em>next</em> line in the file, and so on.
If there are no more lines in the file,
the <code>readline</code> method returns the empty string.<sup id="fnref:8"><a class="footnote-ref" href="#fn:8">8</a></sup></p>
<div class="admonition note">
<p class="admonition-title">Question</p>
<p>What is the difference between what happens when</p>
<ul>
<li>
<p>you use the <code>readline</code> method to read a blank line from a file, or</p>
</li>
<li>
<p>you use it to try to read a line from a file
when all the lines in the file have already been read?</p>
</li>
</ul>
<p>Think about this before clicking to reveal the answer.</p>
</div>
<details class="answer">
<summary>Answer</summary>
<p>This is one reason Python keeps the newline character
in the string that is returned from the <code>readline</code> method.
Reading a blank line from a file using the <code>readline</code> method
will <em>not</em> return an empty string;
it will return a string containing a single newline character
<em>i.e.</em> <code>'\n'</code>.
Trying to read a line from a file when all lines have been read
returns the empty string <em>i.e.</em> <code>''</code>.
So if <code>readline</code> ever returns the empty string,
you know that there are no more lines in the file to read.</p>
</details>
<p>Let's say we wanted to compute the average
of all the temperatures in our <code>temps.txt</code> file.
We <em>could</em> read our file
using a series of calls to the <code>readline</code> method:<sup id="fnref:9"><a class="footnote-ref" href="#fn:9">9</a></sup></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;temps.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="n">sum_nums</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># number of lines</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="n">line</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="n">sum_nums</span> <span class="o">+=</span> <span class="nb">float</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="n">line</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="n">sum_nums</span> <span class="o">+=</span> <span class="nb">float</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a><span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-16-12"><a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a>
</span><span id="__span-16-13"><a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a><span class="n">line</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
</span><span id="__span-16-14"><a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a><span class="n">sum_nums</span> <span class="o">+=</span> <span class="nb">float</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="__span-16-15"><a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a><span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-16-16"><a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a>
</span><span id="__span-16-17"><a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a><span class="n">line</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
</span><span id="__span-16-18"><a id="__codelineno-16-18" name="__codelineno-16-18" href="#__codelineno-16-18"></a><span class="n">sum_nums</span> <span class="o">+=</span> <span class="nb">float</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="__span-16-19"><a id="__codelineno-16-19" name="__codelineno-16-19" href="#__codelineno-16-19"></a><span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-16-20"><a id="__codelineno-16-20" name="__codelineno-16-20" href="#__codelineno-16-20"></a>
</span><span id="__span-16-21"><a id="__codelineno-16-21" name="__codelineno-16-21" href="#__codelineno-16-21"></a><span class="c1"># ... etc. until there are no more lines ...</span>
</span><span id="__span-16-22"><a id="__codelineno-16-22" name="__codelineno-16-22" href="#__codelineno-16-22"></a>
</span><span id="__span-16-23"><a id="__codelineno-16-23" name="__codelineno-16-23" href="#__codelineno-16-23"></a><span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-16-24"><a id="__codelineno-16-24" name="__codelineno-16-24" href="#__codelineno-16-24"></a><span class="n">avg</span> <span class="o">=</span> <span class="n">sum_nums</span> <span class="o">/</span> <span class="n">n</span>
</span></code></pre></div>
<p>This is not an effective strategy, though.
We have no way of knowing exactly how many lines there are in the file,
so we don't know how many times to call the <code>readline</code> method.
Even worse, we are repeating the same code over and over,
so this is an egregious violation of the D.R.Y. principle.</p>
<p>We hope that at this point, your brain is screaming "USE A LOOP!"
because that's exactly what we'll do.
Since we don't know how many times we'll have to go through the loop,
we'll use a <code>while</code> loop.</p>
<p>We've mentioned before that <em>pseudocode</em>
is an English-language description of code
that can easily be converted into real code.
Here's a pseudocode version of the code we'll write:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>open the file
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>initialize sum_nums and n to zero
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>read a line
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>while the line is not empty (we&#39;re not at the end of the file):
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>    convert the line to a float
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>    add the float to sum_nums
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a>    add 1 to n
</span><span id="__span-17-8"><a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a>divide sum_nums by n to get the average
</span><span id="__span-17-9"><a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a>print the average
</span><span id="__span-17-10"><a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a>close the file
</span></code></pre></div>
<p>Translating this to Python is easy:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;temps.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="n">sum_nums</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="n">line</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="k">while</span> <span class="n">line</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>    <span class="n">num</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>    <span class="n">sum_nums</span> <span class="o">+=</span> <span class="n">num</span>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>    <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>    <span class="n">line</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
</span><span id="__span-18-10"><a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a><span class="n">avg</span> <span class="o">=</span> <span class="n">sum_nums</span> <span class="o">/</span> <span class="n">n</span>
</span><span id="__span-18-11"><a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Average temperature: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">avg</span><span class="p">))</span>
</span><span id="__span-18-12"><a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a><span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></code></pre></div>
<p>This code will repeatedly call the <code>readline</code> method on the file object
until it returns the empty string (<em>i.e.</em> until there are no more lines).
Each time the <code>readline</code> method returns a line,
the <code>float</code> function converts it into a floating-point number
which is added to the <code>sum_nums</code> variable.
We also keep track of the line count with the <code>n</code> variable.
At the end, we divide the sum by the number of lines
to get the average temperature,
and we print it out to the terminal.</p>
<p>What's nice about this code
is that we never have to store a list of all the lines,
or, for that matter, a list of all the numbers.
We go through the file line-by-line,
updating the <code>sum_nums</code> and the <code>n</code> variables,
and then at the end of the loop
we have the information we need to compute the average.
No matter how big the file is,
this code will still work,
and we won't run out of memory storing big lists.</p>
<p>However, this code is a bit clunky.
(<em>Clunky</em> means inelegant, and possibly too repetitive or too verbose.)
The <code>num</code> variable doesn't have to be there;
we only use it to hold the temperature value
before adding it to <code>sum_nums</code>.
We can get rid of it and tighten up the code a bit:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;temps.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="n">sum_nums</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="n">line</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="k">while</span> <span class="n">line</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>    <span class="n">sum_nums</span> <span class="o">+=</span> <span class="nb">float</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a>    <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a>    <span class="n">line</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a><span class="n">avg</span> <span class="o">=</span> <span class="n">sum_nums</span> <span class="o">/</span> <span class="n">n</span>
</span><span id="__span-19-10"><a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Average temperature: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">avg</span><span class="p">))</span>
</span><span id="__span-19-11"><a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a><span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></code></pre></div>
<p>Unfortunately, that's not all that's wrong with this code.
The line <code>line = file.readline()</code> is repeated twice,
which violates the D.R.Y. principle.
There should be a better way to write this.</p>
<h3 id="the-dry-principle-again">The D.R.Y. principle again</h3>
<p>We've seen before that repeated code in a loop often means
that the test for whether to get out of a loop
shouldn't come at the beginning of the loop,
but somewhere inside the loop.
Would that trick work here too?  Let's try it:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;temps.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="n">sum_nums</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>    <span class="n">line</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>    <span class="k">if</span> <span class="n">line</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>  <span class="c1"># no more lines</span>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a>        <span class="k">break</span>       <span class="c1"># exit the loop</span>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>    <span class="n">sum_nums</span> <span class="o">+=</span> <span class="nb">float</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a>    <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-20-10"><a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a><span class="n">avg</span> <span class="o">=</span> <span class="n">sum_nums</span> <span class="o">/</span> <span class="n">n</span>
</span><span id="__span-20-11"><a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Average temperature: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">avg</span><span class="p">))</span>
</span><span id="__span-20-12"><a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a><span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></code></pre></div>
<p>It works!  And the repetition is gone; the code is very D.R.Y.</p>
<p>Notice that the <code>while True:</code> line just means "repeat".
In pseudocode, what the loop means is:</p>
<div class="language-pycon highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="go">repeat:</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="go">   read a line from the file</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="go">   if the line is empty (end of file), exit the loop</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="go">   otherwise, convert the line to a float and add to sum_nums</span>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="go">   add 1 to n</span>
</span></code></pre></div>
<p>We can make one more readability improvement.
Remember that when we talked about <code>if</code>
we said that Python treats a few values as "false"
even if they aren't the actual <code>False</code> value?
We called these values "falsy" values.
Falsy values include the integer <code>0</code>, the empty string, and the empty list.
Since the empty string is considered to be "falsy",
and the <code>readline</code> method returns
the empty string if it can't read a line,
we can rewrite this code like this:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;temps.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="n">sum_nums</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>    <span class="n">line</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="hll">    <span class="k">if</span> <span class="ow">not</span> <span class="n">line</span><span class="p">:</span>
</span></span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a>        <span class="k">break</span>
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a>    <span class="n">sum_nums</span> <span class="o">+=</span> <span class="nb">float</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="__span-22-9"><a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a>    <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-22-10"><a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a><span class="n">avg</span> <span class="o">=</span> <span class="n">sum_nums</span> <span class="o">/</span> <span class="n">n</span>
</span><span id="__span-22-11"><a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Average temperature: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">avg</span><span class="p">))</span>
</span><span id="__span-22-12"><a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a><span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></code></pre></div>
<p>We've only changed the highlighted line:
<code>if line == '':</code> became <code>if not line:</code>.  </p>
<div class="admonition note">
<p class="admonition-title">The <code>not</code> operator</p>
<p><code>not</code> is an operator that flips boolean values:
<code>not True</code> is <code>False</code> and <code>not False</code> is <code>True</code>.
 It may look like a function,
 but you don't need to put its argument in parentheses.
 We say it's a <strong>prefix operator</strong>.</p>
</div>
<p>So if <code>line</code> is the empty string <code>''</code>,
then <code>line</code> is "falsy" and <code>not line</code> is "truthy".
In fact, if we try this in Python:</p>
<div class="language-pycon highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="ow">not</span> <span class="s1">&#39;&#39;</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="go">True</span>
</span></code></pre></div>
<p>we see that <code>not line</code> will be <code>True</code>
if there are no more lines to read.<br />
So <code>if not line:</code> reads like English,
which is something that Python programmers appreciate.</p>
<p>Now our code works, is D.R.Y., and reads well,
so we are happy with it.</p>
<h2 id="looking-forward">Looking forward</h2>
<p>We have more to say about files, but this reading is long enough!
Here are some of the related topics
we will discuss in future readings:</p>
<ul>
<li>
<p>There is an even more concise way to write the averaging code
that uses a <code>for</code> loop instead of a <code>while</code> loop.</p>
</li>
<li>
<p>We will see how to write to text files.</p>
</li>
<li>
<p>It's a pain to have to remember to call the <code>close</code> method on files.
There is a keyword called <code>with</code>
that can be used to automatically close files
after they are no longer needed.</p>
</li>
</ul>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>It's not the only way, though.
For instance, really large and highly-structured data sets
are often stored in <em>relational databases</em>,
and there is a significant amount of theory involved in how to do this well.&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p>If you don't know much about binary numbers, don't worry: we
will be going over them in a few readings.&#160;<a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:3">
<p>We're oversimplifying here.
Some kinds of text encodings are more complicated,
especially if you need to encode Asian languages
with large numbers of characters (<em>e.g.</em> Chinese).
These require more than 8 bits per character.&#160;<a class="footnote-backref" href="#fnref:3" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
<li id="fn:4">
<p>Another one you will hear about is the ASCII encoding,
which is an older encoding
that can only encode standard typewriter characters.&#160;<a class="footnote-backref" href="#fnref:4" title="Jump back to footnote 4 in the text">&#8617;</a></p>
</li>
<li id="fn:5">
<p>The suffix <code>.data</code> implies that the file contains data,
but there is no requirement that it be formatted in any particular way.
The filesystem doesn't care.&#160;<a class="footnote-backref" href="#fnref:5" title="Jump back to footnote 5 in the text">&#8617;</a></p>
</li>
<li id="fn:6">
<p>It is possible for a text file to end in a character
which isn't a newline.
That would make our example more complicated,
so we'll assume that all our text files do end in newlines.&#160;<a class="footnote-backref" href="#fnref:6" title="Jump back to footnote 6 in the text">&#8617;</a></p>
</li>
<li id="fn:7">
<p>When writing code, it's not enough that the code work;
you also want it to make sense to someone reading it.&#160;<a class="footnote-backref" href="#fnref:7" title="Jump back to footnote 7 in the text">&#8617;</a></p>
</li>
<li id="fn:8">
<p>If the last line doesn't end in a newline,
and the <code>readline</code> method is reading that line,
it returns a string containing all the characters
up to the end of the file.&#160;<a class="footnote-backref" href="#fnref:8" title="Jump back to footnote 8 in the text">&#8617;</a></p>
</li>
<li id="fn:9">
<p>We call our summation variable <code>sum_nums</code> instead of <code>sum</code>
because <code>sum</code> is a built-in function in Python.
We <em>could</em> have called it <code>sum</code>,
but if we did we wouldn't be able to use
the <code>sum</code> built-in function in that module
after the <code>sum</code> variable was defined.&#160;<a class="footnote-backref" href="#fnref:9" title="Jump back to footnote 9 in the text">&#8617;</a></p>
</li>
</ol>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../11/reading11/" class="md-footer__link md-footer__link--prev" aria-label="Previous: 11. Loops, part 2">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                11. Loops, part 2
              </div>
            </div>
          </a>
        
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "navigation.footer", "navigation.top", "navigation.expand"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.ad660dcc.min.js"></script>
      
        <script src="../../js/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>