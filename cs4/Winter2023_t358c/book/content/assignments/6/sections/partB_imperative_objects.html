
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Part B: Imperative objects &#8212; The CS 4 book</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
    <script src="../../../../_static/jquery.js"></script>
    <script src="../../../../_static/underscore.js"></script>
    <script src="../../../../_static/doctools.js"></script>
    <script src="../../../../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script src="../../../../_static/clipboard.min.js"></script>
    <script src="../../../../_static/copybutton.js"></script>
    <script src="../../../../_static/design-tabs.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Part C: Modules and functors" href="partC_modules_functors.html" />
    <link rel="prev" title="Part A: The environment model" href="partA_environment_model.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">The CS 4 book</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Contents:
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../Introduction.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../admin/index.html">
   Administrative information
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../admin/Syllabus.html">
     Syllabus
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../admin/Collaboration_policies.html">
     Collaboration policies
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../Motivation.html">
   Motivation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../History.html">
   History
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../../index.html">
   Assignments
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="../../0/Assignment0.html">
     Assignment 0: Getting set up
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../1/index.html">
     Assignment 1: Evaluation and recursion
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
    <label for="toctree-checkbox-3">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../1/sections/Preamble.html">
       Preamble
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../1/sections/ocaml_notes.html">
       OCaml notes
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../1/sections/partA_exercises.html">
       Part A: Basic exercises
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../1/sections/partB_evaluation.html">
       Part B: Evaluation
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../1/sections/partC_recursion.html">
       Part C: Recursion
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../2/index.html">
     Assignment 2: Asymptotic complexity and higher-order functions
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
    <label for="toctree-checkbox-4">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../2/sections/Preamble.html">
       Preamble
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../2/sections/ocaml_notes.html">
       OCaml notes
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../2/sections/partA_orders_of_growth.html">
       Part A: Orders of growth
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../2/sections/partB_evaluation.html">
       Part B: Evaluation
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../2/sections/partC_higher_order_functions.html">
       Part C. Higher-order functions
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../2/sections/partD_additional_problems.html">
       Part D: Additional problems
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../3/index.html">
     Assignment 3: Lists
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
    <label for="toctree-checkbox-5">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../3/sections/Preamble.html">
       Preamble
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../3/sections/ocaml_notes.html">
       OCaml notes
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../3/sections/partA_lists.html">
       Part A: Working with lists
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../3/sections/partB_structural_generative_recursion.html">
       Part B: Structural and generative recursion
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../3/sections/partC_more_lists.html">
       Part C: Some harder problems with lists
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../4/index.html">
     Assignment 4: Data abstraction
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
    <label for="toctree-checkbox-6">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../4/sections/Preamble.html">
       Preamble
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../4/sections/ocaml_notes.html">
       OCaml notes
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../4/sections/partA_abstraction.html">
       Part A: Abstraction
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../4/sections/partB_more_abstraction.html">
       Part B: More abstraction problems
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../4/sections/partC_algebra.html">
       Part C: Miniproject: Algebraic expressions
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../midterm/index.html">
     Midterm exam
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
    <label for="toctree-checkbox-7">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../midterm/sections/Preamble.html">
       Preamble
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../midterm/sections/ocaml_notes.html">
       OCaml notes
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../midterm/sections/partA_complexity.html">
       Part A: Asymptotic time complexity
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../midterm/sections/partB_lists_hofs.html">
       Part B: Recursion and higher-order functions
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../midterm/sections/partC_data_structures.html">
       Part C: Data structures: AA trees
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../5/index.html">
     Assignment 5: Tags and objects
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
    <label for="toctree-checkbox-8">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../5/sections/Preamble.html">
       Preamble
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../5/sections/ocaml_notes.html">
       OCaml notes
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../5/sections/partA_mutation.html">
       Part A: Mutation and imperative programming
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../5/sections/partB_tagged_data.html">
       Part B: Tagged Data
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../5/sections/partC_objects.html">
       Part C: Objects
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 current active has-children">
    <a class="reference internal" href="../index.html">
     Assignment 6: Environmentally-friendly
    </a>
    <input checked="" class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
    <label for="toctree-checkbox-9">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul class="current">
     <li class="toctree-l3">
      <a class="reference internal" href="Preamble.html">
       Details
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="ocaml_notes.html">
       OCaml notes
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="partA_environment_model.html">
       Part A: The environment model
      </a>
     </li>
     <li class="toctree-l3 current active">
      <a class="current reference internal" href="#">
       Part B: Imperative objects
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="partC_modules_functors.html">
       Part C: Modules and functors
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="partD_special_topics.html">
       Part D: Special topics
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../7/index.html">
     Assignment 7: Final exam preparation
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
    <label for="toctree-checkbox-10">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../7/sections/Preamble.html">
       Details
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../7/sections/ocaml_notes.html">
       OCaml notes
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../7/sections/miniproject_klotski.html">
       Miniproject: The “Klotski” sliding-block puzzle game
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../readings/index.html">
   Readings
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
  <label for="toctree-checkbox-11">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../readings/ocaml_cheat_sheet.html">
     OCaml syntax cheat sheet
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../readings/subst.html">
     The substitution model
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#make-stat-1">
   1.
   <code class="docutils literal notranslate">
    <span class="pre">
     make_stat_1
    </span>
   </code>
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#make-stat-2">
   2.
   <code class="docutils literal notranslate">
    <span class="pre">
     make_stat_2
    </span>
   </code>
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Part B: Imperative objects</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#make-stat-1">
   1.
   <code class="docutils literal notranslate">
    <span class="pre">
     make_stat_1
    </span>
   </code>
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#make-stat-2">
   2.
   <code class="docutils literal notranslate">
    <span class="pre">
     make_stat_2
    </span>
   </code>
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section id="part-b-imperative-objects">
<h1>Part B: Imperative objects<a class="headerlink" href="#part-b-imperative-objects" title="Permalink to this headline">#</a></h1>
<p>In this section we’ll work with objects that also maintain mutable state
<em>i.e.</em> imperative objects.</p>
<p>The <em>mean</em>, <em>variance</em>, and <em>standard deviation</em> are three useful
statistical values often computed over a set of numeric data. (If you
don’t know what these terms refer to, look them up in Wikipedia.) We will
be using the “population variance” and “population standard deviation”
in what follows (as opposed to “sample variance” and “sample standard
deviation”); in other words, divide by <code class="docutils literal notranslate"><span class="pre">n</span></code> instead of by <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">-</span> <span class="pre">1</span></code> in
the denominators of the variance and standard deviation, where <code class="docutils literal notranslate"><span class="pre">n</span></code> is
the number of data values.</p>
<p>Often, when collecting data, we receive it one element at a time instead
of all at once. It might, then, be useful to be able to determine the
mean, variance, and standard deviation “on-the-fly” as we add new values
to the object.</p>
<p>Your job in this section is to create <em>statistics objects</em> to provide this
functionality. You will explore OCaml’s object-oriented programming features by
writing two variants of the statistics object. This will also give you
experience with using object-oriented programming in conjunction with mutation,
which is a very common programming scenario. (In fact, it could be argued that
one of the main purposes of object-oriented programming is to make mutation
more manageable.)</p>
<p>Your statistics objects should adhere to the following interface:</p>
<ul class="simple">
<li><p>The constructor function should be called <code class="docutils literal notranslate"><span class="pre">make_stat_N</span></code>, where
<code class="docutils literal notranslate"><span class="pre">N</span></code> will be either <code class="docutils literal notranslate"><span class="pre">1</span></code> or <code class="docutils literal notranslate"><span class="pre">2</span></code>, and should take a single
argument of type <code class="docutils literal notranslate"><span class="pre">unit</span></code>. The constructor should create a new
statistics object with no data, but which is capable of storing data
and computing statistical summaries of input data.</p></li>
<li><p>You should provide a method called <code class="docutils literal notranslate"><span class="pre">append</span></code> to insert an additional
data value into the object. This method takes a single argument (the
new data value, which must be a <code class="docutils literal notranslate"><span class="pre">float</span></code>). It updates the internal
state variables (see below) to their new values.</p></li>
<li><p>You should provide methods to obtain the current mean, variance, and
standard deviation of the numbers previously appended to the object:
<code class="docutils literal notranslate"><span class="pre">mean</span></code>, <code class="docutils literal notranslate"><span class="pre">variance</span></code>, and <code class="docutils literal notranslate"><span class="pre">stdev</span></code> respectively. Calling these
methods on a statistics object to which no data has been appended
should result in a <code class="docutils literal notranslate"><span class="pre">Stat_error</span></code> exception being raised with an
error message (you will have to define <code class="docutils literal notranslate"><span class="pre">Stat_error</span></code> as a new
exception type yourself). These methods take no arguments.</p></li>
<li><p>You should have a <code class="docutils literal notranslate"><span class="pre">clear</span></code> method which resets all state variables
to their original values. This method takes no arguments.</p></li>
</ul>
<p>Use the following equations to compute the mean, variance, and standard
deviation given the sum, sum of squares, and number of items <span class="math notranslate nohighlight">\(n\)</span>:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\\
mean &amp;= \frac{sum}{n} \\
variance &amp;= \frac{(sum\ of\ squares) - \frac{sum^2}{n}}{n} \\
standard\ deviation &amp;= \sqrt{variance} \\\end{split}\]</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A key aspect of designing an object is knowing
where to put the state variable(s).
In this case, use <code class="docutils literal notranslate"><span class="pre">let</span></code> expressions
<em>outside</em> of the <code class="docutils literal notranslate"><span class="pre">object</span></code> expression
to store the state variables.
The environment model will show you why this works.
Putting the <code class="docutils literal notranslate"><span class="pre">let</span></code> inside the <code class="docutils literal notranslate"><span class="pre">object</span></code> will <em>not</em> work.</p>
</div>
<p>You should have the following state variables:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sum</span></code>: the sum of all the appended values</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sumsq</span></code>: the sum of the squares of all the appended values</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n</span></code>: the number of values that have been appended</p></li>
</ul>
<p>All state variables are initially zero. <code class="docutils literal notranslate"><span class="pre">sum</span></code> and <code class="docutils literal notranslate"><span class="pre">sumsq</span></code> are
references to <code class="docutils literal notranslate"><span class="pre">float</span></code>s; <code class="docutils literal notranslate"><span class="pre">n</span></code> is a reference to an <code class="docutils literal notranslate"><span class="pre">int</span></code>. All of
these are reference cells because they need to be updated as new data
comes in. (It would also be possible to use a record with mutable
fields, but don’t do that.)</p>
<p>Note that there will <em>not</em> be a state variable to hold all the data
values that have been added to the list. This would be extremely costly
in terms of space usage, and wouldn’t help us to compute any of the
statistics we want. Therefore, when a new value is “appended” to the
object, all that happens is that the state variables are updated as
needed; the actual data value itself is not stored.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Do not write any helper functions for your statistics objects. This
may seem counterproductive, but there is a larger point we are trying
to make. This means that there will be some unavoidably duplicated
code in the different object implementations.</p>
</div>
<p>There are two different statistics objects (actually functions that
return these objects) that you need to write.</p>
<section id="make-stat-1">
<h2>1. <code class="docutils literal notranslate"><span class="pre">make_stat_1</span></code><a class="headerlink" href="#make-stat-1" title="Permalink to this headline">#</a></h2>
<p>[<strong>6</strong>] (20 minutes)</p>
<p>The first statistics object will be created by a call to the constructor
function <code class="docutils literal notranslate"><span class="pre">make_stat_1</span></code>. This function will return an object which supports
all the methods described above.</p>
<p>For this problem, we don’t want you to use a <code class="docutils literal notranslate"><span class="pre">self</span></code> reference in the object
or private methods. This will mean that you will have to duplicate some code in
some of the methods.</p>
<p>Here are some example interactions with one of these statistics objects.</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="o">#</span> <span class="k">let</span> <span class="n">mystat</span> <span class="o">=</span> <span class="n">make_stat_1</span> <span class="bp">()</span><span class="o">;;</span>
<span class="k">val</span> <span class="n">mystat</span> <span class="o">:</span>
  <span class="o">&lt;</span> <span class="n">append</span> <span class="o">:</span> <span class="kt">float</span> <span class="o">-&gt;</span> <span class="kt">unit</span><span class="o">;</span> <span class="n">clear</span> <span class="o">:</span> <span class="kt">unit</span><span class="o">;</span> <span class="n">mean</span> <span class="o">:</span> <span class="kt">float</span><span class="o">;</span> <span class="n">stdev</span> <span class="o">:</span> <span class="kt">float</span><span class="o">;</span>
    <span class="n">variance</span> <span class="o">:</span> <span class="kt">float</span> <span class="o">&gt;</span> <span class="o">=</span>
  <span class="o">&lt;</span><span class="n">obj</span><span class="o">&gt;</span>
<span class="o">#</span> <span class="n">mystat</span><span class="o">#</span><span class="n">mean</span><span class="o">;;</span>
<span class="nc">Exception</span><span class="o">:</span> <span class="nc">Stat_error</span> <span class="s2">&quot;need at least one value for mean&quot;</span><span class="o">.</span>
<span class="o">#</span> <span class="n">mystat</span><span class="o">#</span><span class="n">variance</span><span class="o">;;</span>
<span class="nc">Exception</span><span class="o">:</span> <span class="nc">Stat_error</span> <span class="s2">&quot;need at least one value for variance&quot;</span><span class="o">.</span>
<span class="o">#</span> <span class="n">mystat</span><span class="o">#</span><span class="n">stdev</span><span class="o">;;</span>
<span class="nc">Exception</span><span class="o">:</span> <span class="nc">Stat_error</span> <span class="s2">&quot;need at least one value for stdev&quot;</span><span class="o">.</span>
<span class="o">#</span> <span class="n">mystat</span><span class="o">#</span><span class="n">append</span> <span class="mi">1</span><span class="o">.</span><span class="mi">0</span><span class="o">;;</span>
<span class="o">-</span> <span class="o">:</span> <span class="kt">unit</span> <span class="o">=</span> <span class="bp">()</span>
<span class="o">#</span> <span class="n">mystat</span><span class="o">#</span><span class="n">append</span> <span class="mi">2</span><span class="o">.</span><span class="mi">0</span><span class="o">;;</span>
<span class="o">-</span> <span class="o">:</span> <span class="kt">unit</span> <span class="o">=</span> <span class="bp">()</span>
<span class="o">#</span> <span class="n">mystat</span><span class="o">#</span><span class="n">append</span> <span class="mi">3</span><span class="o">.</span><span class="mi">0</span><span class="o">;;</span>
<span class="o">-</span> <span class="o">:</span> <span class="kt">unit</span> <span class="o">=</span> <span class="bp">()</span>
<span class="o">#</span> <span class="n">mystat</span><span class="o">#</span><span class="n">mean</span><span class="o">;;</span>
<span class="o">-</span> <span class="o">:</span> <span class="kt">float</span> <span class="o">=</span> <span class="mi">2</span><span class="o">.</span>
<span class="o">#</span> <span class="n">mystat</span><span class="o">#</span><span class="n">append</span> <span class="mi">4</span><span class="o">.</span><span class="mi">0</span><span class="o">;;</span>
<span class="o">-</span> <span class="o">:</span> <span class="kt">unit</span> <span class="o">=</span> <span class="bp">()</span>
<span class="o">#</span> <span class="n">mystat</span><span class="o">#</span><span class="n">variance</span><span class="o">;;</span>
<span class="o">-</span> <span class="o">:</span> <span class="kt">float</span> <span class="o">=</span> <span class="mi">1</span><span class="o">.</span><span class="mi">25</span>
<span class="o">#</span> <span class="n">mystat</span><span class="o">#</span><span class="n">stdev</span><span class="o">;;</span>
<span class="o">-</span> <span class="o">:</span> <span class="kt">float</span> <span class="o">=</span> <span class="mi">1</span><span class="o">.</span><span class="mi">1180339887498949</span>
<span class="o">#</span> <span class="n">mystat</span><span class="o">#</span><span class="n">clear</span><span class="o">;;</span>
<span class="o">-</span> <span class="o">:</span> <span class="kt">unit</span> <span class="o">=</span> <span class="bp">()</span>
<span class="o">#</span> <span class="n">mystat</span><span class="o">#</span><span class="n">append</span> <span class="mi">1</span><span class="o">.</span><span class="mi">0</span><span class="o">;;</span>
<span class="o">-</span> <span class="o">:</span> <span class="kt">unit</span> <span class="o">=</span> <span class="bp">()</span>
<span class="o">#</span> <span class="n">mystat</span><span class="o">#</span><span class="n">mean</span><span class="o">;;</span>
<span class="o">-</span> <span class="o">:</span> <span class="kt">float</span> <span class="o">=</span> <span class="mi">1</span><span class="o">.</span>
<span class="o">#</span> <span class="n">mystat</span><span class="o">#</span><span class="n">variance</span><span class="o">;;</span>
<span class="o">-</span> <span class="o">:</span> <span class="kt">float</span> <span class="o">=</span> <span class="mi">0</span><span class="o">.</span>
<span class="o">#</span> <span class="n">mystat</span><span class="o">#</span><span class="n">stdev</span><span class="o">;;</span>
<span class="o">-</span> <span class="o">:</span> <span class="kt">float</span> <span class="o">=</span> <span class="mi">0</span><span class="o">.</span>
</pre></div>
</div>
</section>
<section id="make-stat-2">
<h2>2. <code class="docutils literal notranslate"><span class="pre">make_stat_2</span></code><a class="headerlink" href="#make-stat-2" title="Permalink to this headline">#</a></h2>
<p>[<strong>4</strong>] (10 minutes)</p>
<p>The second statistics object will be created by a call to the constructor
function <code class="docutils literal notranslate"><span class="pre">make_stat_2</span></code>. We will take this opportunity to improve the code in
<code class="docutils literal notranslate"><span class="pre">make_stat_1</span></code>, though the examples given above will still work and will give
the same results.</p>
<p>Most of this code will be identical to that in <code class="docutils literal notranslate"><span class="pre">make_stat_1</span></code>.
We want you to make the following changes:</p>
<ul class="simple">
<li><p>Aside from error handling and a single call to <code class="docutils literal notranslate"><span class="pre">sqrt</span></code>, the code in
the <code class="docutils literal notranslate"><span class="pre">variance</span></code> and <code class="docutils literal notranslate"><span class="pre">stdev</span></code> methods is almost identical. Factor
out the similar differences into a method called <code class="docutils literal notranslate"><span class="pre">_variance</span></code> that
computes the variance assuming that there has been at least one
number appended to the stats object (in other words, <code class="docutils literal notranslate"><span class="pre">_variance</span></code>
will not do any error checking). Add a <code class="docutils literal notranslate"><span class="pre">self</span></code> reference to the
<code class="docutils literal notranslate"><span class="pre">object</span></code> form (see the OCaml notes section above for details on
this) and call the <code class="docutils literal notranslate"><span class="pre">_variance</span></code> method from both the <code class="docutils literal notranslate"><span class="pre">stdev</span></code> and
<code class="docutils literal notranslate"><span class="pre">variance</span></code> methods to compute the variance where needed.</p></li>
<li><p>Since the <code class="docutils literal notranslate"><span class="pre">_variance</span></code> method is not part of the object’s interface,
make it a <code class="docutils literal notranslate"><span class="pre">private</span></code> method.</p></li>
</ul>
</section>
</section>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="partA_environment_model.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Part A: The environment model</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="partC_modules_functors.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Part C: Modules and functors</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Michael Vanier<br/>
  
      &copy; Copyright 2023, Michael C. Vanier. All rights reserved.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>

  </body>
</html>