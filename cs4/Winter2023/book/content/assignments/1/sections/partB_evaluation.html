
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Part B: Evaluation &#8212; The CS 4 book</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
    <script src="../../../../_static/jquery.js"></script>
    <script src="../../../../_static/underscore.js"></script>
    <script src="../../../../_static/doctools.js"></script>
    <script src="../../../../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script src="../../../../_static/clipboard.min.js"></script>
    <script src="../../../../_static/copybutton.js"></script>
    <script src="../../../../_static/design-tabs.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Part C: Recursion" href="partC_recursion.html" />
    <link rel="prev" title="Part A: Basic exercises" href="partA_exercises.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">The CS 4 book</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Contents:
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../Introduction.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../admin/index.html">
   Administrative information
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../admin/Syllabus.html">
     Syllabus
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../admin/Collaboration_policies.html">
     Collaboration policies
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../Motivation.html">
   Motivation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../History.html">
   History
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../../index.html">
   Assignments
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="../../0/Assignment0.html">
     Assignment 0: Getting set up
    </a>
   </li>
   <li class="toctree-l2 current active has-children">
    <a class="reference internal" href="../index.html">
     Assignment 1: Evaluation and recursion
    </a>
    <input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
    <label for="toctree-checkbox-3">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul class="current">
     <li class="toctree-l3">
      <a class="reference internal" href="Preamble.html">
       Preamble
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="ocaml_notes.html">
       OCaml notes
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="partA_exercises.html">
       Part A: Basic exercises
      </a>
     </li>
     <li class="toctree-l3 current active">
      <a class="current reference internal" href="#">
       Part B: Evaluation
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="partC_recursion.html">
       Part C: Recursion
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../2/index.html">
     Assignment 2: Asymptotic complexity and higher-order functions
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
    <label for="toctree-checkbox-4">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../2/sections/Preamble.html">
       Preamble
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../2/sections/ocaml_notes.html">
       OCaml notes
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../2/sections/partA_orders_of_growth.html">
       Part A: Orders of growth
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../2/sections/partB_evaluation.html">
       Part B: Evaluation
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../2/sections/partC_higher_order_functions.html">
       Part C. Higher-order functions
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../2/sections/partD_additional_problems.html">
       Part D: Additional problems
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../readings/index.html">
   Readings
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../readings/ocaml_cheat_sheet.html">
     OCaml syntax cheat sheet
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../readings/subst.html">
     The substitution model
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../../../../_sources/content/assignments/1/sections/partB_evaluation.rst.txt"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.rst</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#sicp-problem-1-5">
   1. SICP, problem 1.5
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#sicp-problem-1-6">
   2. SICP, problem 1.6
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#sicp-problem-1-9">
   3. SICP, problem 1.9
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Part B: Evaluation</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#sicp-problem-1-5">
   1. SICP, problem 1.5
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#sicp-problem-1-6">
   2. SICP, problem 1.6
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#sicp-problem-1-9">
   3. SICP, problem 1.9
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section id="part-b-evaluation">
<h1>Part B: Evaluation<a class="headerlink" href="#part-b-evaluation" title="Permalink to this headline">#</a></h1>
<p>In this section, write all essay-question-type answers inside OCaml
comments.</p>
<section id="sicp-problem-1-5">
<h2>1. <a class="reference external" href="https://mitp-content-server.mit.edu/books/content/sectbyfn/books_pres_0/6515/sicp.zip/full-text/book/book-Z-H-10.html#%_thm_1.5">SICP, problem 1.5</a><a class="headerlink" href="#sicp-problem-1-5" title="Permalink to this headline">#</a></h2>
<p>[<strong>2</strong>] <span class="raw-html">&nbsp;</span> (25 minutes)</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Before tackling this problem, read the subsection in SICP (section
1.1.5) called <em>Applicative order versus normal order</em> (not covered in
class!). Applicative order evaluation is just the evaluation rule we
described in class; it’s usually just called “strict evaluation”.
Normal order evaluation is an alternative to the evaluation rule we
learned in class. In normal order evaluation, nothing is evaluated
unless it needs to be to get the final result (it’s sometimes called
“call-by-need” where applicative order evaluation is called
“call-by-value”). Normal order evaluation is used in some functional
languages like Haskell (more accurately, Haskell uses <em>lazy
evaluation</em>, which is a more efficient version of normal order
evaluation).</p>
</div>
<p>Ben Bitfiddle has invented a test to determine whether the interpreter
he is faced with is using applicative order evaluation or normal order
evaluation. He defines the following two functions:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="k">rec</span> <span class="n">p</span> <span class="bp">()</span> <span class="o">=</span> <span class="n">p</span> <span class="bp">()</span>
<span class="k">let</span> <span class="n">test</span> <span class="n">x</span> <span class="n">y</span> <span class="o">=</span> <span class="k">if</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">y</span>
</pre></div>
</div>
<p>Then he evaluates the expression:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="n">test</span> <span class="mi">0</span> <span class="o">(</span><span class="n">p</span> <span class="bp">()</span><span class="o">)</span>
</pre></div>
</div>
<p>What behavior will Ben observe with an interpreter that uses applicative
order evaluation? What behavior will he observe with an interpreter that
uses normal order evaluation? Explain your answer. (Assume that the
evaluation rule for the special form <code class="docutils literal notranslate"><span class="pre">if</span></code> is the same whether the
interpreter is using normal or applicative order: the predicate (test)
expression is evaluated first, and the result determines whether to
evaluate the consequent (<code class="docutils literal notranslate"><span class="pre">then</span></code>) or the alternative (<code class="docutils literal notranslate"><span class="pre">else</span></code>)
expression.)</p>
<p><strong>NOTE</strong>: This problem doesn’t require a lengthy explanation; two or
three sentences should be enough.</p>
</section>
<section id="sicp-problem-1-6">
<h2>2. <a class="reference external" href="https://mitp-content-server.mit.edu/books/content/sectbyfn/books_pres_0/6515/sicp.zip/full-text/book/book-Z-H-10.html#%_thm_1.6">SICP, problem 1.6</a><a class="headerlink" href="#sicp-problem-1-6" title="Permalink to this headline">#</a></h2>
<p>[<strong>2</strong>] <span class="raw-html">&nbsp;</span> (25 minutes)</p>
<p>This problem is one of my (Mike’s) favorites.</p>
<p>Alyssa P. Hacker doesn’t see why <code class="docutils literal notranslate"><span class="pre">if</span></code> needs to be provided as a
special syntactic form. “Why can’t I just define <code class="docutils literal notranslate"><span class="pre">if</span></code> as an ordinary
function?” she asks. Alyssa’s friend Eva Lu Ator claims this can indeed
be done, and she defines a new version of <code class="docutils literal notranslate"><span class="pre">if</span></code> using pattern matching:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="n">new_if</span> <span class="n">predicate</span> <span class="n">then_clause</span> <span class="n">else_clause</span> <span class="o">=</span>
  <span class="k">match</span> <span class="n">predicate</span> <span class="k">with</span>
    <span class="o">|</span> <span class="bp">true</span>  <span class="o">-&gt;</span> <span class="n">then_clause</span>
    <span class="o">|</span> <span class="bp">false</span> <span class="o">-&gt;</span> <span class="n">else_clause</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Of course, since this is a function it will have to be called using
function syntax (the <code class="docutils literal notranslate"><span class="pre">if</span></code> syntax is built-in to OCaml).</p>
</div>
<p>Eva demonstrates its use to Alyssa:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="o">#</span> <span class="n">new_if</span> <span class="o">(</span><span class="mi">2</span> <span class="o">=</span> <span class="mi">3</span><span class="o">)</span> <span class="mi">0</span> <span class="mi">5</span><span class="o">;;</span>
<span class="o">-</span> <span class="o">:</span> <span class="kt">int</span> <span class="o">=</span> <span class="mi">5</span>
<span class="o">#</span> <span class="n">new_if</span> <span class="o">(</span><span class="mi">1</span> <span class="o">=</span> <span class="mi">1</span><span class="o">)</span> <span class="mi">0</span> <span class="mi">5</span><span class="o">;;</span>
<span class="o">-</span> <span class="o">:</span> <span class="kt">int</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
<p>Delighted, Alyssa uses <code class="docutils literal notranslate"><span class="pre">new_if</span></code> to write the following program to
compute square roots:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="n">square</span> <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*.</span> <span class="n">x</span>
<span class="k">let</span> <span class="n">average</span> <span class="n">x</span> <span class="n">y</span> <span class="o">=</span> <span class="o">(</span><span class="n">x</span> <span class="o">+.</span> <span class="n">y</span><span class="o">)</span> <span class="o">/.</span> <span class="mi">2</span><span class="o">.</span><span class="mi">0</span>

<span class="k">let</span> <span class="n">improve</span> <span class="n">guess</span> <span class="n">x</span> <span class="o">=</span> <span class="n">average</span> <span class="n">guess</span> <span class="o">(</span><span class="n">x</span> <span class="o">/.</span> <span class="n">guess</span><span class="o">)</span>
<span class="k">let</span> <span class="n">is_good_enough</span> <span class="n">guess</span> <span class="n">x</span> <span class="o">=</span>
  <span class="n">abs_float</span> <span class="o">(</span><span class="n">square</span> <span class="n">guess</span> <span class="o">-.</span> <span class="n">x</span><span class="o">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">.</span><span class="mi">00001</span>

<span class="k">let</span> <span class="k">rec</span> <span class="n">sqrt_iter</span> <span class="n">guess</span> <span class="n">x</span> <span class="o">=</span>
  <span class="n">new_if</span> <span class="o">(</span><span class="n">is_good_enough</span> <span class="n">guess</span> <span class="n">x</span><span class="o">)</span>
         <span class="n">guess</span>
         <span class="o">(</span><span class="n">sqrt_iter</span> <span class="o">(</span><span class="n">improve</span> <span class="n">guess</span> <span class="n">x</span><span class="o">)</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
</div>
<p>What happens when Alyssa attempts to use this to compute square roots?
Explain.</p>
</section>
<section id="sicp-problem-1-9">
<h2>3. <a class="reference external" href="https://mitp-content-server.mit.edu/books/content/sectbyfn/books_pres_0/6515/sicp.zip/full-text/book/book-Z-H-11.html#%_thm_1.9">SICP, problem 1.9</a><a class="headerlink" href="#sicp-problem-1-9" title="Permalink to this headline">#</a></h2>
<p>[<strong>6</strong>] <span class="raw-html">&nbsp;</span> (60 minutes)</p>
<p>Each of the following two functions defines a method for adding two
positive integers in terms of the functions <code class="docutils literal notranslate"><span class="pre">inc</span></code>, which increments
its argument by 1, and <code class="docutils literal notranslate"><span class="pre">dec</span></code>, which decrements its argument by 1.</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="k">rec</span> <span class="n">add_a</span> <span class="n">a</span> <span class="n">b</span> <span class="o">=</span>
  <span class="k">if</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">then</span> <span class="n">b</span>
    <span class="k">else</span> <span class="n">inc</span> <span class="o">(</span><span class="n">add_a</span> <span class="o">(</span><span class="n">dec</span> <span class="n">a</span><span class="o">)</span> <span class="n">b</span><span class="o">)</span>

<span class="k">let</span> <span class="k">rec</span> <span class="n">add_b</span> <span class="n">a</span> <span class="n">b</span> <span class="o">=</span>
  <span class="k">if</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">then</span> <span class="n">b</span>
    <span class="k">else</span> <span class="n">add_b</span> <span class="o">(</span><span class="n">dec</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">inc</span> <span class="n">b</span><span class="o">)</span>
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">inc</span></code> or <code class="docutils literal notranslate"><span class="pre">dec</span></code> could trivially be defined as:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="n">inc</span> <span class="n">a</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="mi">1</span>
<span class="k">let</span> <span class="n">dec</span> <span class="n">a</span> <span class="o">=</span> <span class="n">a</span> <span class="o">-</span> <span class="mi">1</span>
</pre></div>
</div>
<p>but for this problem, assume that they are primitive functions.</p>
<p>We will use the substitution model to understand the process generated
by each function when evaluating <code class="docutils literal notranslate"><span class="pre">add_a</span> <span class="pre">2</span> <span class="pre">5</span></code> and <code class="docutils literal notranslate"><span class="pre">add_b</span> <span class="pre">2</span> <span class="pre">5</span></code>.</p>
<ol class="arabic">
<li><p>Both <code class="docutils literal notranslate"><span class="pre">add_a</span></code> and <code class="docutils literal notranslate"><span class="pre">add_b</span></code> are recursive functions. State whether
they generate recursive or iterative <em>processes</em> in the sense
described in the lectures and in the book.</p></li>
<li><p>For the <code class="docutils literal notranslate"><span class="pre">add_a</span></code> function only, we want you to write out the
substitution model evaluation in great detail. That means you have to
actually write out the fact that numbers evaluate to themselves,
built-in functions evaluate to their internal representations,
functions with arguments desugar to their corresponding <code class="docutils literal notranslate"><span class="pre">fun</span></code>
forms, <em>etc.</em> Don’t skip steps or you’ll lose marks on this problem.
Also note when names are bound to their values.</p>
<p>One shortcut that you can take is to replace the body of a function
with ellipses (<code class="docutils literal notranslate"><span class="pre">...</span></code>), or to replace parts of it that aren’t
relevant with ellipses. Please indent your work to make it obvious
when you are evaluating a subexpression, a sub-sub-expression, <em>etc.</em>
Be explicit about writing out evaluate, apply, and substitution
steps, and when you are desugaring a function definition into the
equivalent <code class="docutils literal notranslate"><span class="pre">fun</span></code> form. Also note where you are invoking a special
form rule distinct from the usual evaluation rule (<em>e.g.</em> with an
<code class="docutils literal notranslate"><span class="pre">if</span></code> expression).</p>
<p>Assume that function arguments evaluate from left to right. This
isn’t necessary to get the right result, but it will make it easier
for your graders to grade if everyone does this the same way.</p>
<p>Write the substitution model evaluation in an OCaml comment. Our
solution for this part is around 60-70 lines long. If your solution
is much shorter than that then you are skipping too many steps.</p>
<p>You may find the
<a class="reference internal" href="../../../readings/subst.html"><span class="doc">reading on the substitution model</span></a>
to be useful.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We realize that some of you (OK, <em>all</em> of you) may dislike this
problem. Think of it the same way you might think of taking cod
liver oil or eating broccoli; unpleasant but ultimately good for
you. Understanding how a computer evaluates expressions is
fundamental knowledge, and we will revisit this idea several times
in this course (but it will never again be as tedious as this
problem!).</p>
</div>
</li>
<li><p>For the <code class="docutils literal notranslate"><span class="pre">add_b</span></code> function, we want you to correct the following
version that Ben Bitfiddle dashed off in a hurry. Copy this into a
comment and add the lines that Ben forgot to include. Each such line
should start with the characters:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt;
</pre></div>
</div>
<p>so your grader can easily identify them.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Don’t write out your own substitution model evaluation from scratch!
Just modify the evaluation below by adding the missing lines.</p>
</div>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="c">(*</span>
<span class="c">let rec add_b a b =</span>
<span class="c">  if a = 0</span>
<span class="c">     then b</span>
<span class="c">     else add_b (dec a) (inc b)</span>

<span class="c">Desugar this to:</span>

<span class="c">let rec add_b =</span>
<span class="c">  fun a b -&gt;</span>
<span class="c">    if a = 0</span>
<span class="c">       then b</span>
<span class="c">       else add_b (dec a) (inc b)</span>

<span class="c">Bind the name &quot;add_b&quot; to the value:</span>

<span class="c">  fun a b -&gt;</span>
<span class="c">    if a = 0</span>
<span class="c">       then b</span>
<span class="c">       else add_b (dec a) (inc b)</span>

<span class="c">Evaluate (add_b 2 5)</span>
<span class="c">  apply (fun a b -&gt; if ...) to 2, 5</span>
<span class="c">  substitute 2 for a, 5 for b in (if ...)</span>
<span class="c">    -&gt; if 2 = 0 then 5 else add_b (dec 2) (inc 5)</span>
<span class="c">  evaluate (if 2 = 0 then 5 else add_b (dec 2) (inc 5))</span>
<span class="c">    if is a special form, so evaluate the first operand:</span>
<span class="c">      evaluate (2 = 0)</span>
<span class="c">        apply = to 2, 0 -&gt; false</span>
<span class="c">    first argument of if is false, so evaluate the third operand:</span>
<span class="c">      evaluate (add_b (dec 2) (inc 5))</span>
<span class="c">        evaluate (dec 2)</span>
<span class="c">          apply dec to 2 -&gt; 1</span>
<span class="c">        evaluate (inc 5)</span>
<span class="c">          apply inc to 5 -&gt; 6</span>
<span class="c">        apply (fun a b -&gt; if ...) to 1, 6</span>
<span class="c">        substitute 1 for a, 6 for b in (if ...)</span>
<span class="c">          -&gt; if 1 = 0 then 6 else add_b (dec 1) (inc 6)</span>
<span class="c">        evaluate (if 1 = 0 then 6 else add_b (dec 1) (inc 6))</span>
<span class="c">          if is a special form, so evaluate the first operand:</span>
<span class="c">            evaluate (1 = 0)</span>
<span class="c">              apply = to 1, 0 -&gt; false</span>
<span class="c">          first argument of if is false, so evaluate the third operand:</span>
<span class="c">            evaluate (add_b (dec 1) (inc 6))</span>
<span class="c">              evaluate (dec 1)</span>
<span class="c">                apply dec to 1 -&gt; 0</span>
<span class="c">              evaluate (inc 6)</span>
<span class="c">                apply inc to 6 -&gt; 7</span>
<span class="c">              apply (fun a b -&gt; if ...) to 0, 7</span>
<span class="c">              substitute 0 for a, 7 for b in (if ...)</span>
<span class="c">                -&gt; if 0 = 0 then 7 else add_b (dec 0) (inc 7)</span>
<span class="c">              evaluate (if 0 = 0 then 7 else add_b (dec 0) (inc 7))</span>
<span class="c">                if is a special form, so evaluate the first operand:</span>
<span class="c">                  evaluate (0 = 0)</span>
<span class="c">                    apply = to 0, 0 -&gt; true</span>
<span class="c">                first argument of if is true, so evaluate the second operand:</span>
<span class="c">                  result: 7</span>
<span class="c">*)</span>
</pre></div>
</div>
</li>
</ol>
</section>
</section>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="partA_exercises.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Part A: Basic exercises</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="partC_recursion.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Part C: Recursion</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Michael Vanier<br/>
  
      &copy; Copyright 2023, Michael C. Vanier. All rights reserved.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>

  </body>
</html>