<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OCaml notes &mdash; The CS 4 book 0.0.1 documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/sphinx_highlight.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Part A: Basic exercises" href="partA_exercises.html" />
    <link rel="prev" title="Preamble" href="Preamble.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../../index.html" class="icon icon-home"> The CS 4 book
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../Introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../admin/index.html">Administrative information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Motivation.html">Motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../History.html">History</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Assignments</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../0/Assignment0.html">Assignment 0: Getting set up</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Assignment 1: Evaluation and recursion</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="Preamble.html">Preamble</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">OCaml notes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#mli-files"><code class="docutils literal notranslate"><span class="pre">.mli</span></code> files</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="partA_exercises.html">Part A: Basic exercises</a></li>
<li class="toctree-l3"><a class="reference internal" href="partB_evaluation.html">Part B: Evaluation</a></li>
<li class="toctree-l3"><a class="reference internal" href="partC_recursion.html">Part C: Recursion</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../readings/index.html">Readings</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">The CS 4 book</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Assignments</a></li>
          <li class="breadcrumb-item"><a href="../index.html">Assignment 1: Evaluation and recursion</a></li>
      <li class="breadcrumb-item active">OCaml notes</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="ocaml-notes">
<h1>OCaml notes<a class="headerlink" href="#ocaml-notes" title="Permalink to this heading"></a></h1>
<section id="mli-files">
<h2><code class="docutils literal notranslate"><span class="pre">.mli</span></code> files<a class="headerlink" href="#mli-files" title="Permalink to this heading"></a></h2>
<p>For this and all subsequent assignments, we will be supplying you with
one or more OCaml <em>interface files</em> to be used with your code.
For this assignment, the file is called <code class="docutils literal notranslate"><span class="pre">lab1.mli</span></code>
(note the <code class="docutils literal notranslate"><span class="pre">.mli</span></code> extension;
all OCaml interface files have this filename extension),
and you should download it into the same directory
that you are using to write and test your <code class="docutils literal notranslate"><span class="pre">lab1.ml</span></code> code.</p>
<p>The interface file consists mostly of type signatures of functions,
though occasionally it will have other things as well. The <code class="docutils literal notranslate"><span class="pre">lab1.mli</span></code>
interface file looks like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(* Interface file for lab1.ml *)

val sum_of_squares_of_two_largest : int -&gt; int -&gt; int -&gt; int
val factorial : int -&gt; int
val e_term : int -&gt; float
val e_approximation : int -&gt; float
val is_even : int -&gt; bool
val is_odd : int -&gt; bool
val f_rec : int -&gt; int
val f_iter : int -&gt; int
val pascal_coefficient : int -&gt; int -&gt; int
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">val</span></code> declarations indicate that the type signature of a
particular value is being described. Here, all such values are functions
(functions are values in OCaml). For instance, the <code class="docutils literal notranslate"><span class="pre">factorial</span></code>
function has the type signature:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>val factorial : int -&gt; int
</pre></div>
</div>
<p>which indicates that it takes one argument (an <code class="docutils literal notranslate"><span class="pre">int</span></code>) and returns an
<code class="docutils literal notranslate"><span class="pre">int</span></code>, as you would expect. Functions which take more arguments (like
<code class="docutils literal notranslate"><span class="pre">pascal_coefficient</span></code>, which takes two integer arguments) have somewhat
less intuitive type signatures:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>val pascal_coefficient : int -&gt; int -&gt; int
</pre></div>
</div>
<p>You might have expected something like this instead:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>val pascal_coefficient : int int -&gt; int  (* WRONG *)
</pre></div>
</div>
<p>The reason why this is wrong is that arguments to OCaml functions are
automatically <em>curried</em>, which means that they can be partially applied.
(The name “curried” is a tribute to <a class="reference external" href="https://en.wikipedia.org/wiki/Haskell_Curry">Haskell
Curry</a>, a logician who
provided much of the theoretical foundation for modern functional
programming languages.) In this case, it means that if we call
<code class="docutils literal notranslate"><span class="pre">pascal_coefficient</span></code> with only one argument (an integer), it will
return a function that takes the other integer argument and returns the
integer result. Currying can occasionally give rise to confusing error
messages, but it’s also extremely handy in practice, as we will see.</p>
<p>OK, let’s assume you’ve written all of your code, and you want to check
that it conforms to the type declarations in the <code class="docutils literal notranslate"><span class="pre">.mli</span></code> file. How do
you do that? The simplest way is to compile your code along with the
interface file from the command line:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ ocamlc -c lab1.mli lab1.ml
</pre></div>
</div>
<p>If no error messages are printed, your code is at least type-correct!
Also, if you list the files in your directory, you will see two new
ones: <code class="docutils literal notranslate"><span class="pre">lab1.cmi</span></code> and <code class="docutils literal notranslate"><span class="pre">lab1.cmo</span></code>. These are the (byte-code) compiled
versions of the <code class="docutils literal notranslate"><span class="pre">lab1.mli</span></code> and <code class="docutils literal notranslate"><span class="pre">lab1.ml</span></code> files, respectively. Note
that you have to put the <code class="docutils literal notranslate"><span class="pre">.mli</span></code> file before the <code class="docutils literal notranslate"><span class="pre">.ml</span></code> file on the
command line; this won’t work:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ ocamlc -c lab1.ml lab1.mli
</pre></div>
</div>
<p>unless the <code class="docutils literal notranslate"><span class="pre">.cmi</span></code> file has already been compiled, in which case you
don’t have to have <code class="docutils literal notranslate"><span class="pre">lab1.mli</span></code> on the command line anyway. This is a
bit annoying, but we live with it.</p>
<p>You can now load the <code class="docutils literal notranslate"><span class="pre">.cmo</span></code> file into an interactive OCaml session as
follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># #load &quot;lab1.cmo&quot;;;
</pre></div>
</div>
<p>In this case, nothing will be printed if there are no errors. A
different way to load your code is to use the <code class="docutils literal notranslate"><span class="pre">#use</span></code> command:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># #use &quot;lab1.ml&quot;;;
</pre></div>
</div>
<p>If you do this, then OCaml will compile your code and print out the
signature of every value in <code class="docutils literal notranslate"><span class="pre">lab1.ml</span></code>. When using <code class="docutils literal notranslate"><span class="pre">#use</span></code>, you don’t
need to compile your code beforehand. When using <code class="docutils literal notranslate"><span class="pre">#load</span></code>, you do. As a
result, we tend to use <code class="docutils literal notranslate"><span class="pre">#use</span></code> more than <code class="docutils literal notranslate"><span class="pre">#load</span></code> when interactively
developing code. You should know both forms.</p>
<p>Let’s go back to what would happen if you typed:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># #load &quot;lab1.cmo&quot;;;
</pre></div>
</div>
<p>You might expect that you could then use all the functions in
<code class="docutils literal notranslate"><span class="pre">lab1.ml</span></code> (as you could if you’d used <code class="docutils literal notranslate"><span class="pre">#use</span></code>). Actually, that isn’t
the case (yet). If you try, this will happen:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># pascal_coefficient;;
Error: Unbound value pascal_coefficient
</pre></div>
</div>
<p>Huh? We just loaded <code class="docutils literal notranslate"><span class="pre">lab1.ml</span></code>, and <code class="docutils literal notranslate"><span class="pre">lab1.ml</span></code> defines
<code class="docutils literal notranslate"><span class="pre">pascal_coefficient</span></code>, so why the error message? It turns out that
<code class="docutils literal notranslate"><span class="pre">#load</span></code> loads the code as a separate <em>module</em> called <code class="docutils literal notranslate"><span class="pre">Lab1</span></code> (the
name of the file, without the extension, and with the first letter
capitalized). This is like saying <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">lab1</span></code> in Python. We can get
the function by using the module name as a prefix:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># Lab1.pascal_coefficient;;
- : int -&gt; int -&gt; int = &lt;fun&gt;
</pre></div>
</div>
<p>Notice that we have to capitalize the first letter of <code class="docutils literal notranslate"><span class="pre">Lab1</span></code>. Module
names are always capitalized in OCaml.</p>
<p>If this is too tedious, you can dump all the names in the module into
the local namespace by using an <code class="docutils literal notranslate"><span class="pre">open</span></code> declaration:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># open Lab1;;
# pascal_coefficient;;
- : int -&gt; int -&gt; int = &lt;fun&gt;
</pre></div>
</div>
<p>This is like saying <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">lab1</span> <span class="pre">import</span> <span class="pre">*</span></code> in Python. Alternatively, if
you used <code class="docutils literal notranslate"><span class="pre">#use</span></code> to load and compile the code, all the functions in the
file are available immediately. This is another reason why <code class="docutils literal notranslate"><span class="pre">#use</span></code> is
used more often for interactive development.</p>
<p>It’s important to realize that <code class="docutils literal notranslate"><span class="pre">#use</span></code> and <code class="docutils literal notranslate"><span class="pre">#load</span></code> are special
commands of the OCaml interactive interpreter (also called the “toplevel”);
they are <em>not</em> part of the OCaml language itself.
(There are other special interpreter commands as well,
which we will get to when we need them.)</p>
<p>We will have much, much more to say about the OCaml module system in
future assignments. OCaml actually has the most powerful module system
of any computer language in wide use.</p>
<p>Once you have finished writing your code, you should always compile it
against the <code class="docutils literal notranslate"><span class="pre">.mli</span></code> file we provide to check that your code not only
compiles but has the type signature we want. (Using <code class="docutils literal notranslate"><span class="pre">#use</span></code> will check
that your code compiles, but it may not have the type signature we
want.)</p>
<p>In later assignments, we will introduce the <code class="docutils literal notranslate"><span class="pre">dune</span></code> compilation manager,
which will automate all the tedious parts of compilation.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Preamble.html" class="btn btn-neutral float-left" title="Preamble" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="partA_exercises.html" class="btn btn-neutral float-right" title="Part A: Basic exercises" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Michael C. Vanier. All rights reserved.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>