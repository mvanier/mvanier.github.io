
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://mvanier.github.io/cs4/Winter2025/book/assignments/final/partC_pentomino/">
      
      
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>Part C: The Pentomino module (30 points) - The CS 4 book (Winter 2025)</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#part-c-the-pentomino-module-30-points" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="The CS 4 book (Winter 2025)" class="md-header__button md-logo" aria-label="The CS 4 book (Winter 2025)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            The CS 4 book (Winter 2025)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Part C: The Pentomino module (30 points)
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to medium mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to medium mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="medium" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18V6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-2.69L23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="The CS 4 book (Winter 2025)" class="md-nav__button md-logo" aria-label="The CS 4 book (Winter 2025)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    The CS 4 book (Winter 2025)
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Introduction
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../intro/welcome/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome to CS 4!
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../intro/motivation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Motivation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../intro/history/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    History
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Administrative
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Administrative
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../admin/syllabus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Syllabus
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../admin/collab/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Collaboration policies
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Assignments
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Assignments
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../0/assignment0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Assignment 0: Setup
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Readings
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Readings
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../readings/ocaml_cheat_sheet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OCaml Cheat Sheet
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../readings/subst/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    The Substitution Model
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pentomino-problem-representation" class="md-nav__link">
    <span class="md-ellipsis">
      Pentomino problem representation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#binary-matrix-conversion" class="md-nav__link">
    <span class="md-ellipsis">
      Binary matrix conversion
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions-to-write" class="md-nav__link">
    <span class="md-ellipsis">
      Functions to write
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions to write">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#make_piece" class="md-nav__link">
    <span class="md-ellipsis">
      make_piece
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make_piece_from_string" class="md-nav__link">
    <span class="md-ellipsis">
      make_piece_from_string
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#show_piece" class="md-nav__link">
    <span class="md-ellipsis">
      show_piece
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-translate_piece" class="md-nav__link">
    <span class="md-ellipsis">
      1. translate_piece
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-normalize_piece" class="md-nav__link">
    <span class="md-ellipsis">
      2. normalize_piece
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-reflect_piece" class="md-nav__link">
    <span class="md-ellipsis">
      3. reflect_piece
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-rotate_piece" class="md-nav__link">
    <span class="md-ellipsis">
      4. rotate_piece
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#piece_in_all_orientations" class="md-nav__link">
    <span class="md-ellipsis">
      piece_in_all_orientations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#all_normalized_pieces" class="md-nav__link">
    <span class="md-ellipsis">
      all_normalized_pieces
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#on_board" class="md-nav__link">
    <span class="md-ellipsis">
      on_board
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-translate_piece_on_board" class="md-nav__link">
    <span class="md-ellipsis">
      5. translate_piece_on_board
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#all_pieces_on_board" class="md-nav__link">
    <span class="md-ellipsis">
      all_pieces_on_board
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-make_piece_array" class="md-nav__link">
    <span class="md-ellipsis">
      6. make_piece_array
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#all_locs_on_board" class="md-nav__link">
    <span class="md-ellipsis">
      all_locs_on_board
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-make_constraints_array" class="md-nav__link">
    <span class="md-ellipsis">
      7. make_constraints_array
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-make_constraints_map" class="md-nav__link">
    <span class="md-ellipsis">
      8. make_constraints_map
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#9-make_binary_matrix_locs" class="md-nav__link">
    <span class="md-ellipsis">
      9. make_binary_matrix_locs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="part-c-the-pentomino-module-30-points">Part C: The <code>Pentomino</code> module (30 points)</h1>
<p>If everything has gone well so far,
you have a way to solve problems expressed as binary matrices,
but you don't have any interesting binary matrices!
In this section we will show you how
to convert a Pentomino problem into its binary matrix representation.</p>
<h2 id="pentomino-problem-representation">Pentomino problem representation</h2>
<p>First, let's see how we are representing Pentomino problems
in their normal representation.
A Pentomino problem consists of two things:
a board on which the Pentomino pieces should be placed,
and a set of pieces to place.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A rectangular "board" can also have designated "holes" in it
<em>i.e.</em> locations where pieces shouldn't go.
Conceptually, these aren't really part of the board.
We will consider the board to be the set of all the locations
that should be occupied when the board is solved.</p>
</div>
<p>The piece and board datatypes
are defined in the file <code>pentomino_types.ml</code>,
and specific pieces are defined in the file <code>pentomino_pieces.ml</code>.
Here is the board type definition:</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="k">type</span> <span class="n">board</span> <span class="o">=</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>  <span class="o">{</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    <span class="n">nrows</span>  <span class="o">:</span> <span class="kt">int</span> <span class="o">;</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="n">ncols</span>  <span class="o">:</span> <span class="kt">int</span> <span class="o">;</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    <span class="n">member</span> <span class="o">:</span> <span class="n">loc</span> <span class="o">-&gt;</span> <span class="kt">bool</span>   <span class="c">(* is a location part of this board? *)</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>  <span class="o">}</span>
</span></code></pre></div>
<p>Boards are defined as a rectangular grid
of dimensions <code>nrows</code> rows by <code>ncols</code> columns,
along with a <code>member</code> function
which allows us to exclude specific locations from the grid
(<code>member</code> would return <code>false</code> for those locations).</p>
<p>Here is the piece type definition:</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="k">type</span> <span class="n">loc</span> <span class="o">=</span> <span class="kt">int</span> <span class="o">*</span> <span class="kt">int</span>  <span class="c">(* row, column coordinates *)</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="k">module</span> <span class="nc">LocSet</span> <span class="o">=</span> <span class="nn">Set</span><span class="p">.</span><span class="nc">Make</span><span class="o">(</span><span class="k">struct</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>  <span class="k">type</span> <span class="n">t</span> <span class="o">=</span> <span class="n">loc</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>  <span class="k">let</span> <span class="n">compare</span> <span class="o">=</span> <span class="nn">Stdlib</span><span class="p">.</span><span class="n">compare</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="k">end</span><span class="o">)</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="k">type</span> <span class="n">piece</span> <span class="o">=</span> <span class="o">{</span> <span class="n">label</span> <span class="o">:</span> <span class="kt">char</span> <span class="o">;</span> <span class="n">locs</span> <span class="o">:</span> <span class="nn">LocSet</span><span class="p">.</span><span class="n">t</span> <span class="o">}</span>
</span></code></pre></div>
<p>Pieces are thus represented as a one-character label
and a set of locations (row, column coordinates) that they occupy.
Each Pentomino piece will have exactly 5 locations,
all of which are orthogonally adjacent
(but the datatype doesn't enforce that).
A particular Pentomino problem will also have a set of pieces
(called a <code>PieceSet</code>)
where none of the pieces have the same character label.</p>
<p>A string representation of all the pieces
is provided in the file <code>pentomino_pieces.ml</code>.
In that file, you start with a piece description like this:</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="k">let</span> <span class="n">pf_s</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">.XX</span><span class="se">\n</span><span class="s2">XX.</span><span class="se">\n</span><span class="s2">.X.</span><span class="se">\n</span><span class="s2">&quot;</span>
</span></code></pre></div>
<p>If we printed this out, it would look like this:</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="o">.</span><span class="nc">XX</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="nn">XX</span><span class="p">.</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="p">.</span><span class="nn">X</span><span class="p">.</span>
</span></code></pre></div>
<p>which is the "F" pentomino piece.</p>
<p>We can refer to the piece
as a pair of this string and its label (<em>i.e.</em> <code>('f', pf_s)</code>).
This will eventually be converted
to the set-of-locations piece representation.
We will refer to pieces represented this way
as being in their "string representation".
A number of functions accept lists of pieces in this form
as one of their arguments.</p>
<h2 id="binary-matrix-conversion">Binary matrix conversion</h2>
<p>Before we get into the details of converting a Pentomino problem
(board and pieces) to a binary matrix,
let's look at the problem from a high level.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Don't skip this section!
If you do, you will not understand how the algorithm works
for Pentomino problems.</p>
</div>
<p>The rows of a binary matrix
correspond to <em>components</em> of the solution.
In our case, they correspond to pieces,
but even though there are only 12 pieces,
there are usually many more than 12 rows!
For a particular Pentomino problem (board and pieces),
you need to compute every possible placement
of all the Pentomino pieces on the board in all possible orientations.
<strong>Each placement of a particular piece in a particular orientation
constitutes a row of the matrix.</strong>
Selecting a subset of these rows
selects a set of pieces which (you hope) tiles the board exactly.</p>
<p>The columns of the binary matrix
correspond to <em>constraints</em> on the placements of the pieces.
Each location on the board is one constraint,
because only one piece in a particular position and orientation
may occupy that location.
In addition,
all pieces in a solution have to have distinct letter labels
to enforce the constraint that
only one of each kind of piece can be on the board.
So there will be one constraint per letter label.
So if a board uses all 12 pieces,
there will be 12 + N columns in the binary matrix,
where N is the number of locations on the board.
So a board with 60 locations will give rise
to a binary matrix with 72 columns.</p>
<p>Note that the constraints specify
not only that only one piece can occupy a location,
and only one piece of each type can be used,
but also that <em>all</em> locations must be occupied,
and <em>all</em> pieces must be used.
This corresponds to picking a subset of the rows
where each column (each constraint) has exactly one 1 in it
(a given location is only occupied once,
or a given piece is only selected once).
And that's exactly what the algorithm in part B does!</p>
<p>For a particular row
(which is a particular piece with a particular label
in a particular position and orientation),
we put 1s in the columns
that correspond to the locations that the piece occupies,
and also a 1 in the column
that corresponds to the character label of the piece.
All other locations in the row will have 0s.
Then we repeat this for all rows to get the full binary matrix.</p>
<p>The code you will write in this section
will allow you to create binary matrices
given a particular board and a set of pieces.
The code you have already written
will be used to solve the binary matrices.</p>
<h2 id="functions-to-write">Functions to write</h2>
<p>Here are the functions you need to write in the <code>Pentomino</code> module
(in the file <code>pentomino.ml</code>).
Each function you need to write has its point value listed in boldface.
Several of the functions have been supplied for you;
we describe them below,
but obviously there are no points associated with them.</p>
<p>To test these functions interactively in the OCaml interpreter, first compile
these files:</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="o">$</span> <span class="n">ocamlc</span> <span class="o">-</span><span class="n">c</span> <span class="n">pentomino_pieces</span><span class="o">.</span><span class="n">mli</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="o">$</span> <span class="n">ocamlc</span> <span class="o">-</span><span class="n">c</span> <span class="n">pentomino_pieces</span><span class="o">.</span><span class="n">ml</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="o">$</span> <span class="n">ocamlc</span> <span class="o">-</span><span class="n">c</span> <span class="n">pentomino_types</span><span class="o">.</span><span class="n">mli</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="o">$</span> <span class="n">ocamlc</span> <span class="o">-</span><span class="n">c</span> <span class="n">pentomino_types</span><span class="o">.</span><span class="n">ml</span>
</span></code></pre></div>
<p>Then do this in the OCaml interpreter:</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="o">#</span> <span class="o">#</span><span class="n">load</span> <span class="s2">&quot;pentomino_pieces.cmo&quot;</span><span class="o">;;</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="o">#</span> <span class="o">#</span><span class="n">load</span> <span class="s2">&quot;pentomino_types.cmo&quot;</span><span class="o">;;</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="o">#</span> <span class="o">#</span><span class="n">use</span> <span class="s2">&quot;pentomino.ml&quot;</span><span class="o">;;</span>
</span></code></pre></div>
<p>Once again, the description of the functions is rather long,
but none of the functions has to be.
None of our functions is longer than 15 lines of code,
and many are much shorter.</p>
<h3 id="make_piece"><code>make_piece</code></h3>
<p>This function is provided for you.
It makes a piece given a two-tuple containing a character label
and a list of locations.
(It's really only used for testing.)</p>
<div class="admonition examples">
<p class="admonition-title">Examples</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="o">#</span> <span class="k">let</span> <span class="n">p</span> <span class="o">=</span> <span class="n">make_piece</span> <span class="o">(</span><span class="sc">&#39;f&#39;</span><span class="o">,</span> <span class="o">[(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">1</span><span class="o">)])</span> <span class="o">;;</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="k">val</span> <span class="n">p</span> <span class="o">:</span> <span class="n">piece</span> <span class="o">=</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;}</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="o">#</span> <span class="n">p</span><span class="o">.</span><span class="n">label</span> <span class="o">;;</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="o">-</span> <span class="o">:</span> <span class="kt">char</span> <span class="o">=</span> <span class="sc">&#39;f&#39;</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="o">#</span> <span class="n">p</span><span class="o">.</span><span class="n">locs</span> <span class="o">;;</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="o">-</span> <span class="o">:</span> <span class="nn">LocSet</span><span class="p">.</span><span class="n">t</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="o">#</span> <span class="nn">LocSet</span><span class="p">.</span><span class="n">elements</span> <span class="n">p</span><span class="o">.</span><span class="n">locs</span> <span class="o">;;</span>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="o">-</span> <span class="o">:</span> <span class="n">loc</span> <span class="kt">list</span> <span class="o">=</span> <span class="o">[(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">1</span><span class="o">)]</span>
</span></code></pre></div>
</div>
<h3 id="make_piece_from_string"><code>make_piece_from_string</code></h3>
<p>This function is provided for you.
It makes a piece given
a two-tuple containing a character label
and a string that represents the piece pictorially.
The piece string's non-whitespace characters are either <code>"."</code>
(for a location which is not part of the piece)
or <code>"X"</code> (for a location which is part of the piece).</p>
<div class="admonition examples">
<p class="admonition-title">Examples</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="o">#</span> <span class="k">let</span> <span class="n">pf_s</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">.XX</span><span class="se">\n</span><span class="s2">XX.</span><span class="se">\n</span><span class="s2">.X.</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="k">val</span> <span class="n">pf_s</span> <span class="o">:</span> <span class="kt">string</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">.XX</span><span class="se">\n</span><span class="s2">XX.</span><span class="se">\n</span><span class="s2">.X.</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="o">#</span> <span class="k">let</span> <span class="n">p</span> <span class="o">=</span> <span class="n">make_piece_from_string</span> <span class="o">(</span><span class="sc">&#39;f&#39;</span><span class="o">,</span> <span class="n">pf_s</span><span class="o">)</span> <span class="o">;;</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="k">val</span> <span class="n">p</span> <span class="o">:</span> <span class="n">piece</span> <span class="o">=</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;}</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="o">#</span> <span class="n">p</span><span class="o">.</span><span class="n">label</span> <span class="o">;;</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="o">-</span> <span class="o">:</span> <span class="kt">char</span> <span class="o">=</span> <span class="sc">&#39;f&#39;</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="o">#</span> <span class="n">p</span><span class="o">.</span><span class="n">locs</span> <span class="o">;;</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="o">-</span> <span class="o">:</span> <span class="nn">LocSet</span><span class="p">.</span><span class="n">t</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;</span>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="o">#</span> <span class="nn">LocSet</span><span class="p">.</span><span class="n">elements</span> <span class="n">p</span><span class="o">.</span><span class="n">locs</span> <span class="o">;;</span>
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a><span class="o">-</span> <span class="o">:</span> <span class="n">loc</span> <span class="kt">list</span> <span class="o">=</span> <span class="o">[(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">1</span><span class="o">)]</span>
</span></code></pre></div>
</div>
<h3 id="show_piece"><code>show_piece</code></h3>
<p>This function is provided for you.
It takes a piece as its argument
and prints out a representation of the piece to the terminal.
(This is primarily used for debugging.)</p>
<div class="admonition examples">
<p class="admonition-title">Examples</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="o">#</span> <span class="k">let</span> <span class="n">pf_s</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">.XX</span><span class="se">\n</span><span class="s2">XX.</span><span class="se">\n</span><span class="s2">.X.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">;;</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="k">val</span> <span class="n">pf_s</span> <span class="o">:</span> <span class="kt">string</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">.XX</span><span class="se">\n</span><span class="s2">XX.</span><span class="se">\n</span><span class="s2">.X.</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="o">#</span> <span class="k">let</span> <span class="n">p</span> <span class="o">=</span> <span class="n">make_piece_from_string</span> <span class="o">(</span><span class="sc">&#39;f&#39;</span><span class="o">,</span> <span class="n">pf_s</span><span class="o">)</span> <span class="o">;;</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="k">val</span> <span class="n">p</span> <span class="o">:</span> <span class="n">piece</span> <span class="o">=</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;}</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="o">#</span> <span class="n">show_piece</span> <span class="n">p</span><span class="o">;;</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="nc">LABEL</span><span class="o">:</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="nc">LOCS</span><span class="o">:</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="o">-</span> <span class="o">:</span> <span class="kt">unit</span> <span class="o">=</span> <span class="bp">()</span>
</span></code></pre></div>
</div>
<h3 id="1-translate_piece">1. <code>translate_piece</code></h3>
<p>[<strong>2 points</strong>]</p>
<p>This function takes three arguments:
a piece, a row coordinate change, and a column coordinate change.
It returns a new piece with all the coordinates
shifted by the (row, column) changes given.
The piece label is unchanged.</p>
<div class="admonition examples">
<p class="admonition-title">Examples</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="o">#</span> <span class="k">let</span> <span class="n">p</span> <span class="o">=</span> <span class="n">make_piece</span> <span class="o">(</span><span class="sc">&#39;f&#39;</span><span class="o">,</span> <span class="o">[(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">1</span><span class="o">)])</span> <span class="o">;;</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="k">val</span> <span class="n">p</span> <span class="o">:</span> <span class="nn">Pentomino_types</span><span class="p">.</span><span class="n">piece</span> <span class="o">=</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;}</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="o">#</span> <span class="n">show_piece</span> <span class="n">p</span> <span class="o">;;</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="nc">LABEL</span><span class="o">:</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="nc">LOCS</span><span class="o">:</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="o">-</span> <span class="o">:</span> <span class="kt">unit</span> <span class="o">=</span> <span class="bp">()</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="o">#</span> <span class="k">let</span> <span class="n">p&#39;</span> <span class="o">=</span> <span class="n">translate_piece</span> <span class="n">p</span> <span class="mi">2</span> <span class="mi">3</span> <span class="o">;;</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="k">val</span> <span class="n">p&#39;</span> <span class="o">:</span> <span class="n">piece</span> <span class="o">=</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;}</span>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a>
</span><span id="__span-9-11"><a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="o">#</span> <span class="n">show_piece</span> <span class="n">p&#39;</span> <span class="o">;;</span>
</span><span id="__span-9-12"><a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a><span class="nc">LABEL</span><span class="o">:</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="nc">LOCS</span><span class="o">:</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">4</span><span class="o">)</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">5</span><span class="o">)</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">)</span> <span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="mi">4</span><span class="o">)</span>
</span><span id="__span-9-13"><a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="o">-</span> <span class="o">:</span> <span class="kt">unit</span> <span class="o">=</span> <span class="bp">()</span>
</span><span id="__span-9-14"><a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a>
</span><span id="__span-9-15"><a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a><span class="o">#</span> <span class="k">let</span> <span class="n">p&#39;&#39;</span> <span class="o">=</span> <span class="n">translate_piece</span> <span class="n">p</span> <span class="o">(-</span><span class="mi">10</span><span class="o">)</span> <span class="mi">200</span> <span class="o">;;</span>
</span><span id="__span-9-16"><a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a><span class="k">val</span> <span class="n">p&#39;&#39;</span> <span class="o">:</span> <span class="n">piece</span> <span class="o">=</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;}</span>
</span><span id="__span-9-17"><a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a>
</span><span id="__span-9-18"><a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a><span class="o">#</span> <span class="n">show_piece</span> <span class="n">p&#39;&#39;</span> <span class="o">;;</span>
</span><span id="__span-9-19"><a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a><span class="nc">LABEL</span><span class="o">:</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="nc">LOCS</span><span class="o">:</span> <span class="o">(-</span><span class="mi">10</span><span class="o">,</span> <span class="mi">201</span><span class="o">)</span> <span class="o">(-</span><span class="mi">10</span><span class="o">,</span> <span class="mi">202</span><span class="o">)</span> <span class="o">(-</span><span class="mi">9</span><span class="o">,</span> <span class="mi">200</span><span class="o">)</span> <span class="o">(-</span><span class="mi">9</span><span class="o">,</span> <span class="mi">201</span><span class="o">)</span> <span class="o">(-</span><span class="mi">8</span><span class="o">,</span> <span class="mi">201</span><span class="o">)</span>
</span><span id="__span-9-20"><a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a><span class="o">-</span> <span class="o">:</span> <span class="kt">unit</span> <span class="o">=</span> <span class="bp">()</span>
</span></code></pre></div>
</div>
<p>We found the <code>LocSet.map</code> function helpful in solving this problem,
but it isn't required.</p>
<h3 id="2-normalize_piece">2. <code>normalize_piece</code></h3>
<p>[<strong>4 points</strong>]</p>
<p>This function takes a piece as its argument
and returns a new piece whose coordinates have been moved (translated)
by a fixed amount in the (row, column) directions.
The translation is such that the minimum row and column coordinates
of the piece are both zero.
All locations get translated by the same amount
in the (row, column) directions,
but the row translation
is not necessarily the same as the column translation.
The piece label is unchanged.</p>
<p>You should probably use the <code>translate_piece</code> function
in the definition of this function.
We also found the <code>LocSet.fold</code> function to be useful,
but it isn't required (there are other ways to do this).</p>
<div class="admonition examples">
<p class="admonition-title">Examples</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="o">#</span> <span class="k">let</span> <span class="n">p</span> <span class="o">=</span> <span class="n">make_piece</span> <span class="o">(</span><span class="sc">&#39;f&#39;</span><span class="o">,</span> <span class="o">[(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">12</span><span class="o">);</span> <span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">13</span><span class="o">);</span> <span class="o">(</span><span class="mi">11</span><span class="o">,</span> <span class="mi">11</span><span class="o">);</span> <span class="o">(</span><span class="mi">11</span><span class="o">,</span> <span class="mi">12</span><span class="o">);</span> <span class="o">(</span><span class="mi">12</span><span class="o">,</span> <span class="mi">12</span><span class="o">)]);;</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="k">val</span> <span class="n">p</span> <span class="o">:</span> <span class="n">piece</span> <span class="o">=</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;}</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="o">#</span> <span class="n">show_piece</span> <span class="n">p</span><span class="o">;;</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="nc">LABEL</span><span class="o">:</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="nc">LOCS</span><span class="o">:</span> <span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">12</span><span class="o">)</span> <span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">13</span><span class="o">)</span> <span class="o">(</span><span class="mi">11</span><span class="o">,</span> <span class="mi">11</span><span class="o">)</span> <span class="o">(</span><span class="mi">11</span><span class="o">,</span> <span class="mi">12</span><span class="o">)</span> <span class="o">(</span><span class="mi">12</span><span class="o">,</span> <span class="mi">12</span><span class="o">)</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="o">-</span> <span class="o">:</span> <span class="kt">unit</span> <span class="o">=</span> <span class="bp">()</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="o">#</span> <span class="k">let</span> <span class="n">p&#39;</span> <span class="o">=</span> <span class="n">normalize_piece</span> <span class="n">p</span><span class="o">;;</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="k">val</span> <span class="n">p&#39;</span> <span class="o">:</span> <span class="n">piece</span> <span class="o">=</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;}</span>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="o">#</span> <span class="n">show_piece</span> <span class="n">p&#39;</span><span class="o">;;</span>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="nc">LABEL</span><span class="o">:</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="nc">LOCS</span><span class="o">:</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span>
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="o">-</span> <span class="o">:</span> <span class="kt">unit</span> <span class="o">=</span> <span class="bp">()</span>
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a>
</span><span id="__span-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a><span class="o">#</span> <span class="k">let</span> <span class="n">p</span> <span class="o">=</span> <span class="n">make_piece</span> <span class="o">(</span><span class="sc">&#39;f&#39;</span><span class="o">,</span> <span class="o">[(-</span><span class="mi">5</span><span class="o">,</span> <span class="o">-</span><span class="mi">9</span><span class="o">);</span> <span class="o">(-</span><span class="mi">5</span><span class="o">,</span> <span class="o">-</span><span class="mi">8</span><span class="o">);</span> <span class="o">(-</span><span class="mi">4</span><span class="o">,</span> <span class="o">-</span><span class="mi">10</span><span class="o">);</span> <span class="o">(-</span><span class="mi">4</span><span class="o">,</span> <span class="o">-</span><span class="mi">9</span><span class="o">);</span> <span class="o">(-</span><span class="mi">3</span><span class="o">,</span> <span class="o">-</span><span class="mi">9</span><span class="o">)]);;</span>
</span><span id="__span-10-16"><a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a><span class="k">val</span> <span class="n">p</span> <span class="o">:</span> <span class="n">piece</span> <span class="o">=</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;}</span>
</span><span id="__span-10-17"><a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a>
</span><span id="__span-10-18"><a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a><span class="o">#</span> <span class="k">let</span> <span class="n">p&#39;</span> <span class="o">=</span> <span class="n">normalize_piece</span> <span class="n">p</span><span class="o">;;</span>
</span><span id="__span-10-19"><a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a><span class="k">val</span> <span class="n">p&#39;</span> <span class="o">:</span> <span class="n">piece</span> <span class="o">=</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;}</span>
</span><span id="__span-10-20"><a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a>
</span><span id="__span-10-21"><a id="__codelineno-10-21" name="__codelineno-10-21" href="#__codelineno-10-21"></a><span class="o">#</span> <span class="n">show_piece</span> <span class="n">p&#39;</span><span class="o">;;</span>
</span><span id="__span-10-22"><a id="__codelineno-10-22" name="__codelineno-10-22" href="#__codelineno-10-22"></a><span class="nc">LABEL</span><span class="o">:</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="nc">LOCS</span><span class="o">:</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span>
</span><span id="__span-10-23"><a id="__codelineno-10-23" name="__codelineno-10-23" href="#__codelineno-10-23"></a><span class="o">-</span> <span class="o">:</span> <span class="kt">unit</span> <span class="o">=</span> <span class="bp">()</span>
</span></code></pre></div>
</div>
<h3 id="3-reflect_piece">3. <code>reflect_piece</code></h3>
<p>[<strong>2 points</strong>]</p>
<p>This function takes a piece as its argument and returns a new piece which is
"reflected" in the vertical direction (around the column axis) and normalized.
It will do this by negating the column coordinates of all piece locations and
then normalizing the piece using the <code>normalize_piece</code> function.  This is
equivalent to flipping the piece over.  The piece label is unchanged.</p>
<div class="admonition examples">
<p class="admonition-title">Examples</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="o">#</span> <span class="k">let</span> <span class="n">p</span> <span class="o">=</span> <span class="n">make_piece</span> <span class="o">(</span><span class="sc">&#39;f&#39;</span><span class="o">,</span> <span class="o">[(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">1</span><span class="o">)])</span> <span class="o">;;</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="k">val</span> <span class="n">p</span> <span class="o">:</span> <span class="n">piece</span> <span class="o">=</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;}</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="o">#</span> <span class="n">show_piece</span> <span class="n">p</span><span class="o">;;</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="nc">LABEL</span><span class="o">:</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="nc">LOCS</span><span class="o">:</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="o">-</span> <span class="o">:</span> <span class="kt">unit</span> <span class="o">=</span> <span class="bp">()</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="o">#</span> <span class="k">let</span> <span class="n">p&#39;</span> <span class="o">=</span> <span class="n">reflect_piece</span> <span class="n">p</span><span class="o">;;</span>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="k">val</span> <span class="n">p&#39;</span> <span class="o">:</span> <span class="n">piece</span> <span class="o">=</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;}</span>
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a>
</span><span id="__span-11-11"><a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a><span class="o">#</span> <span class="n">show_piece</span> <span class="n">p&#39;</span><span class="o">;;</span>
</span><span id="__span-11-12"><a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a><span class="nc">LABEL</span><span class="o">:</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="nc">LOCS</span><span class="o">:</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span>
</span><span id="__span-11-13"><a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a><span class="o">-</span> <span class="o">:</span> <span class="kt">unit</span> <span class="o">=</span> <span class="bp">()</span>
</span></code></pre></div>
</div>
<h3 id="4-rotate_piece">4. <code>rotate_piece</code></h3>
<p>[<strong>2 points</strong>]</p>
<p>This function takes a piece as its argument
and returns a piece which is like the original piece
except rotated clockwise and normalized.
It will do this by negating the row coordinates of each location,
swapping the row/column coordinates,
and then normalizing the piece.
(Yes, this works!)
The piece label is unchanged.</p>
<div class="admonition examples">
<p class="admonition-title">Examples</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="o">#</span> <span class="k">let</span> <span class="n">p</span> <span class="o">=</span> <span class="n">make_piece</span> <span class="o">(</span><span class="sc">&#39;f&#39;</span><span class="o">,</span> <span class="o">[(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">1</span><span class="o">)])</span> <span class="o">;;</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="k">val</span> <span class="n">p</span> <span class="o">:</span> <span class="n">piece</span> <span class="o">=</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;}</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="o">#</span> <span class="n">show_piece</span> <span class="n">p</span> <span class="o">;;</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="nc">LABEL</span><span class="o">:</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="nc">LOCS</span><span class="o">:</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="o">-</span> <span class="o">:</span> <span class="kt">unit</span> <span class="o">=</span> <span class="bp">()</span>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="o">#</span> <span class="k">let</span> <span class="n">p&#39;</span> <span class="o">=</span> <span class="n">rotate_piece</span> <span class="n">p</span><span class="o">;;</span>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="k">val</span> <span class="n">p&#39;</span> <span class="o">:</span> <span class="n">piece</span> <span class="o">=</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;}</span>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a><span class="o">#</span> <span class="n">show_piece</span> <span class="n">p&#39;</span><span class="o">;;</span>
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a><span class="nc">LABEL</span><span class="o">:</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="nc">LOCS</span><span class="o">:</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span>
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a><span class="o">-</span> <span class="o">:</span> <span class="kt">unit</span> <span class="o">=</span> <span class="bp">()</span>
</span><span id="__span-12-14"><a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a>
</span><span id="__span-12-15"><a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a><span class="o">#</span> <span class="k">let</span> <span class="n">q</span> <span class="o">=</span> <span class="n">make_piece</span> <span class="o">(</span><span class="sc">&#39;i&#39;</span><span class="o">,</span> <span class="o">[(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span> <span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="mi">0</span><span class="o">)]);;</span>
</span><span id="__span-12-16"><a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a><span class="k">val</span> <span class="n">q</span> <span class="o">:</span> <span class="n">piece</span> <span class="o">=</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;i&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;}</span>
</span><span id="__span-12-17"><a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a>
</span><span id="__span-12-18"><a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a><span class="o">#</span> <span class="n">show_piece</span> <span class="n">q</span><span class="o">;;</span>
</span><span id="__span-12-19"><a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a><span class="nc">LABEL</span><span class="o">:</span> <span class="sc">&#39;i&#39;</span><span class="o">;</span> <span class="nc">LOCS</span><span class="o">:</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span>
</span><span id="__span-12-20"><a id="__codelineno-12-20" name="__codelineno-12-20" href="#__codelineno-12-20"></a><span class="o">-</span> <span class="o">:</span> <span class="kt">unit</span> <span class="o">=</span> <span class="bp">()</span>
</span><span id="__span-12-21"><a id="__codelineno-12-21" name="__codelineno-12-21" href="#__codelineno-12-21"></a>
</span><span id="__span-12-22"><a id="__codelineno-12-22" name="__codelineno-12-22" href="#__codelineno-12-22"></a><span class="o">#</span> <span class="k">let</span> <span class="n">q&#39;</span> <span class="o">=</span> <span class="n">rotate_piece</span> <span class="n">q</span><span class="o">;;</span>
</span><span id="__span-12-23"><a id="__codelineno-12-23" name="__codelineno-12-23" href="#__codelineno-12-23"></a><span class="k">val</span> <span class="n">q&#39;</span> <span class="o">:</span> <span class="n">piece</span> <span class="o">=</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;i&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;}</span>
</span><span id="__span-12-24"><a id="__codelineno-12-24" name="__codelineno-12-24" href="#__codelineno-12-24"></a>
</span><span id="__span-12-25"><a id="__codelineno-12-25" name="__codelineno-12-25" href="#__codelineno-12-25"></a><span class="o">#</span> <span class="n">show_piece</span> <span class="n">q&#39;</span><span class="o">;;</span>
</span><span id="__span-12-26"><a id="__codelineno-12-26" name="__codelineno-12-26" href="#__codelineno-12-26"></a><span class="nc">LABEL</span><span class="o">:</span> <span class="sc">&#39;i&#39;</span><span class="o">;</span> <span class="nc">LOCS</span><span class="o">:</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">4</span><span class="o">)</span>
</span><span id="__span-12-27"><a id="__codelineno-12-27" name="__codelineno-12-27" href="#__codelineno-12-27"></a><span class="o">-</span> <span class="o">:</span> <span class="kt">unit</span> <span class="o">=</span> <span class="bp">()</span>
</span></code></pre></div>
</div>
<h3 id="piece_in_all_orientations"><code>piece_in_all_orientations</code></h3>
<p>This function is provided for you.
It takes a piece as its argument
and returns a set of pieces (a <code>PieceSet</code>)
with the piece in all possible (normalized) orientations.
It does this by rotating the piece between 0 and 3 times
and reflecting each of the rotated pieces.
This gives a total of 8 orientations for a given piece.
Note that all the pieces in the set have the same character label.</p>
<h3 id="all_normalized_pieces"><code>all_normalized_pieces</code></h3>
<p>This function is provided for you.
It takes a list of pieces in their string representation
(an example of this is the <code>all_pieces</code> list in <code>pentomino_pieces.ml</code>),
and uses them to make
a set of all the pieces in all possible orientations.
All the pieces in the set are normalized.</p>
<h3 id="on_board"><code>on_board</code></h3>
<p>This function is provided for you.
It takes two arguments: a piece and a board
(the types are defined in <code>pentomino_types.ml</code>).
It returns <code>true</code> if the piece can be placed on the board,
and <code>false</code> otherwise.
For this function to return <code>true</code>,
all the piece coordinates
must be in the range of the allowed board coordinates
and the <code>member</code> function must return <code>true</code> for all of them.</p>
<h3 id="5-translate_piece_on_board">5. <code>translate_piece_on_board</code></h3>
<p>[<strong>4 points</strong>]</p>
<p>This function takes two arguments: a board and a piece.
It returns a set of pieces.
The pieces in the set consist of
all possible translations of the original piece
(which is assumed to be normalized) on the board.
This is done by translating the original piece
(using the <code>translate_piece</code> function)
by all possible (row, column) offsets
between 0 and the number of (rows, columns) on the board,
and then checking to see if the resulting pieces
are in fact on the board
(using the <code>on_board</code> function described above).
Of course, all the pieces in the set have the same character label.</p>
<p>You do <em>not</em> have to do
any rotations or reflections of the pieces for this function,
and you should not.</p>
<div class="admonition examples">
<p class="admonition-title">Examples</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="o">#</span> <span class="k">let</span> <span class="n">p</span> <span class="o">=</span> <span class="n">make_piece</span> <span class="o">(</span><span class="sc">&#39;f&#39;</span><span class="o">,</span> <span class="o">[(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">1</span><span class="o">)])</span> <span class="o">;;</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="k">val</span> <span class="n">p</span> <span class="o">:</span> <span class="n">piece</span> <span class="o">=</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;}</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="o">#</span> <span class="n">show_piece</span> <span class="n">p</span><span class="o">;;</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="nc">LABEL</span><span class="o">:</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="nc">LOCS</span><span class="o">:</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="o">-</span> <span class="o">:</span> <span class="kt">unit</span> <span class="o">=</span> <span class="bp">()</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="o">#</span> <span class="k">let</span> <span class="n">brd</span> <span class="o">=</span> <span class="o">{</span> <span class="n">nrows</span> <span class="o">=</span> <span class="mi">4</span><span class="o">;</span> <span class="n">ncols</span> <span class="o">=</span> <span class="mi">4</span><span class="o">;</span> <span class="n">member</span> <span class="o">=</span> <span class="k">fun</span> <span class="o">_</span> <span class="o">-&gt;</span> <span class="bp">true</span> <span class="o">}</span> <span class="o">;;</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="k">val</span> <span class="n">brd</span> <span class="o">:</span> <span class="n">board</span> <span class="o">=</span> <span class="o">{</span><span class="n">nrows</span> <span class="o">=</span> <span class="mi">4</span><span class="o">;</span> <span class="n">ncols</span> <span class="o">=</span> <span class="mi">4</span><span class="o">;</span> <span class="n">member</span> <span class="o">=</span> <span class="o">&lt;</span><span class="k">fun</span><span class="o">&gt;}</span>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="o">#</span> <span class="k">let</span> <span class="n">ps</span> <span class="o">=</span> <span class="n">translate_piece_on_board</span> <span class="n">brd</span> <span class="n">p</span> <span class="o">;;</span>
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="k">val</span> <span class="n">ps</span> <span class="o">:</span> <span class="nn">PieceSet</span><span class="p">.</span><span class="n">t</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;</span>
</span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a>
</span><span id="__span-13-14"><a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a><span class="o">#</span> <span class="k">let</span> <span class="n">ps_list</span> <span class="o">=</span> <span class="nn">PieceSet</span><span class="p">.</span><span class="n">elements</span> <span class="n">ps</span> <span class="o">;;</span>
</span><span id="__span-13-15"><a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a><span class="k">val</span> <span class="n">ps_list</span> <span class="o">:</span> <span class="n">piece</span> <span class="kt">list</span> <span class="o">=</span>
</span><span id="__span-13-16"><a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a>  <span class="o">[{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span>
</span><span id="__span-13-17"><a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a>   <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;}]</span>
</span><span id="__span-13-18"><a id="__codelineno-13-18" name="__codelineno-13-18" href="#__codelineno-13-18"></a>
</span><span id="__span-13-19"><a id="__codelineno-13-19" name="__codelineno-13-19" href="#__codelineno-13-19"></a><span class="o">#</span> <span class="nn">List</span><span class="p">.</span><span class="n">iter</span> <span class="n">show_piece</span> <span class="n">ps_list</span> <span class="o">;;</span>
</span><span id="__span-13-20"><a id="__codelineno-13-20" name="__codelineno-13-20" href="#__codelineno-13-20"></a><span class="nc">LABEL</span><span class="o">:</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="nc">LOCS</span><span class="o">:</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span>
</span><span id="__span-13-21"><a id="__codelineno-13-21" name="__codelineno-13-21" href="#__codelineno-13-21"></a><span class="nc">LABEL</span><span class="o">:</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="nc">LOCS</span><span class="o">:</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span>
</span><span id="__span-13-22"><a id="__codelineno-13-22" name="__codelineno-13-22" href="#__codelineno-13-22"></a><span class="nc">LABEL</span><span class="o">:</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="nc">LOCS</span><span class="o">:</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span>
</span><span id="__span-13-23"><a id="__codelineno-13-23" name="__codelineno-13-23" href="#__codelineno-13-23"></a><span class="nc">LABEL</span><span class="o">:</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="nc">LOCS</span><span class="o">:</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span>
</span><span id="__span-13-24"><a id="__codelineno-13-24" name="__codelineno-13-24" href="#__codelineno-13-24"></a><span class="o">-</span> <span class="o">:</span> <span class="kt">unit</span> <span class="o">=</span> <span class="bp">()</span>
</span><span id="__span-13-25"><a id="__codelineno-13-25" name="__codelineno-13-25" href="#__codelineno-13-25"></a><span class="c">(* These are the four possible positions of this piece</span>
</span><span id="__span-13-26"><a id="__codelineno-13-26" name="__codelineno-13-26" href="#__codelineno-13-26"></a><span class="c"> on a 4x4 board without rotating or reflecting it. *)</span>
</span><span id="__span-13-27"><a id="__codelineno-13-27" name="__codelineno-13-27" href="#__codelineno-13-27"></a>
</span><span id="__span-13-28"><a id="__codelineno-13-28" name="__codelineno-13-28" href="#__codelineno-13-28"></a><span class="o">#</span> <span class="k">let</span> <span class="n">brd2</span> <span class="o">=</span> <span class="o">{</span> <span class="n">nrows</span> <span class="o">=</span> <span class="mi">8</span><span class="o">;</span> <span class="n">ncols</span> <span class="o">=</span> <span class="mi">8</span><span class="o">;</span> <span class="n">member</span> <span class="o">=</span> <span class="k">fun</span> <span class="o">_</span> <span class="o">-&gt;</span> <span class="bp">true</span> <span class="o">}</span> <span class="o">;;</span>
</span><span id="__span-13-29"><a id="__codelineno-13-29" name="__codelineno-13-29" href="#__codelineno-13-29"></a><span class="k">val</span> <span class="n">brd2</span> <span class="o">:</span> <span class="n">board</span> <span class="o">=</span> <span class="o">{</span><span class="n">nrows</span> <span class="o">=</span> <span class="mi">8</span><span class="o">;</span> <span class="n">ncols</span> <span class="o">=</span> <span class="mi">8</span><span class="o">;</span> <span class="n">member</span> <span class="o">=</span> <span class="o">&lt;</span><span class="k">fun</span><span class="o">&gt;}</span>
</span><span id="__span-13-30"><a id="__codelineno-13-30" name="__codelineno-13-30" href="#__codelineno-13-30"></a>
</span><span id="__span-13-31"><a id="__codelineno-13-31" name="__codelineno-13-31" href="#__codelineno-13-31"></a><span class="o">#</span> <span class="k">let</span> <span class="n">ps2</span> <span class="o">=</span> <span class="n">translate_piece_on_board</span> <span class="n">brd2</span> <span class="n">p</span> <span class="o">;;</span>
</span><span id="__span-13-32"><a id="__codelineno-13-32" name="__codelineno-13-32" href="#__codelineno-13-32"></a><span class="k">val</span> <span class="n">ps2</span> <span class="o">:</span> <span class="nn">PieceSet</span><span class="p">.</span><span class="n">t</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;</span>
</span><span id="__span-13-33"><a id="__codelineno-13-33" name="__codelineno-13-33" href="#__codelineno-13-33"></a>
</span><span id="__span-13-34"><a id="__codelineno-13-34" name="__codelineno-13-34" href="#__codelineno-13-34"></a><span class="o">#</span> <span class="nn">PieceSet</span><span class="p">.</span><span class="n">cardinal</span> <span class="n">ps2</span> <span class="o">;;</span>
</span><span id="__span-13-35"><a id="__codelineno-13-35" name="__codelineno-13-35" href="#__codelineno-13-35"></a><span class="o">-</span> <span class="o">:</span> <span class="kt">int</span> <span class="o">=</span> <span class="mi">36</span>
</span><span id="__span-13-36"><a id="__codelineno-13-36" name="__codelineno-13-36" href="#__codelineno-13-36"></a><span class="c">(* The &quot;cardinal&quot; function on sets just returns the number of items in the set.</span>
</span><span id="__span-13-37"><a id="__codelineno-13-37" name="__codelineno-13-37" href="#__codelineno-13-37"></a><span class="c"> This piece can have any of 36 different locations on an 8x8 board. *)</span>
</span></code></pre></div>
</div>
<h3 id="all_pieces_on_board"><code>all_pieces_on_board</code></h3>
<p>This function is provided for you.
It takes a list of pieces in their string representation, and a board,
and returns a set of all possible placements of all pieces on the board.
It does this by generating all possible orientations of each piece
(using the <code>all_normalized_pieces</code> function)
and then using the <code>translate_piece_on_board</code> function
to translate these pieces with particular orientations
to all their possible locations on the board.</p>
<h3 id="6-make_piece_array">6. <code>make_piece_array</code></h3>
<p>[<strong>4 points</strong>]</p>
<p>This function takes two arguments:
a list of pieces in their string representation, and a board.
It uses the <code>all_pieces_on_board</code> function
to generate all possible orientations and locations
of the pieces on the board,
and then converts the set of pieces to an array of pieces, which is returned.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Convert the set of pieces to a list of pieces first,
then use the <code>Array.of_list</code> function to generate the array.
This is a very short function.</p>
</div>
<p>Note that the length of the piece array
is actually the number of rows
in the binary matrix we will be generating,
since each row corresponds to a single piece
in a particular location/orientation on a board.</p>
<div class="admonition examples">
<p class="admonition-title">Examples</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="o">#</span> <span class="k">let</span> <span class="n">piece_string_list</span> <span class="o">=</span> <span class="nn">Pentomino_pieces</span><span class="p">.</span><span class="n">all_pieces</span><span class="o">;;</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="k">val</span> <span class="n">piece_string_list</span> <span class="o">:</span> <span class="o">(</span><span class="kt">char</span> <span class="o">*</span> <span class="kt">string</span><span class="o">)</span> <span class="kt">list</span> <span class="o">=</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>  <span class="o">[(</span><span class="sc">&#39;f&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">.XX</span><span class="se">\n</span><span class="s2">XX.</span><span class="se">\n</span><span class="s2">.X.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">);</span> <span class="o">(</span><span class="sc">&#39;i&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">X</span><span class="se">\n</span><span class="s2">X</span><span class="se">\n</span><span class="s2">X</span><span class="se">\n</span><span class="s2">X</span><span class="se">\n</span><span class="s2">X</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">);</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>   <span class="o">(</span><span class="sc">&#39;l&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">X.</span><span class="se">\n</span><span class="s2">X.</span><span class="se">\n</span><span class="s2">X.</span><span class="se">\n</span><span class="s2">XX</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">);</span> <span class="o">(</span><span class="sc">&#39;n&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">.X</span><span class="se">\n</span><span class="s2">.X</span><span class="se">\n</span><span class="s2">XX</span><span class="se">\n</span><span class="s2">X.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">);</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>   <span class="o">(</span><span class="sc">&#39;p&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">XX</span><span class="se">\n</span><span class="s2">XX</span><span class="se">\n</span><span class="s2">X.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">);</span> <span class="o">(</span><span class="sc">&#39;t&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">XXX</span><span class="se">\n</span><span class="s2">.X.</span><span class="se">\n</span><span class="s2">.X.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">);</span> <span class="o">(</span><span class="sc">&#39;u&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">X.X</span><span class="se">\n</span><span class="s2">XXX</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">);</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>   <span class="o">(</span><span class="sc">&#39;v&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">X..</span><span class="se">\n</span><span class="s2">X..</span><span class="se">\n</span><span class="s2">XXX</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">);</span> <span class="o">(</span><span class="sc">&#39;w&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">X..</span><span class="se">\n</span><span class="s2">XX.</span><span class="se">\n</span><span class="s2">.XX</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">);</span>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>   <span class="o">(</span><span class="sc">&#39;x&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">.X.</span><span class="se">\n</span><span class="s2">XXX</span><span class="se">\n</span><span class="s2">.X.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">);</span> <span class="o">(</span><span class="sc">&#39;y&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">..X.</span><span class="se">\n</span><span class="s2">XXXX</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">);</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>   <span class="o">(</span><span class="sc">&#39;z&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">XX.</span><span class="se">\n</span><span class="s2">.X.</span><span class="se">\n</span><span class="s2">.XX</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">)]</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="o">#</span> <span class="k">let</span> <span class="n">brd</span> <span class="o">=</span> <span class="o">{</span> <span class="n">nrows</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span> <span class="n">ncols</span> <span class="o">=</span> <span class="mi">12</span><span class="o">;</span> <span class="n">member</span> <span class="o">=</span> <span class="k">fun</span> <span class="o">_</span> <span class="o">-&gt;</span> <span class="bp">true</span> <span class="o">}</span> <span class="o">;;</span>
</span><span id="__span-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="k">val</span> <span class="n">brd</span> <span class="o">:</span> <span class="n">board</span> <span class="o">=</span> <span class="o">{</span><span class="n">nrows</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span> <span class="n">ncols</span> <span class="o">=</span> <span class="mi">12</span><span class="o">;</span> <span class="n">member</span> <span class="o">=</span> <span class="o">&lt;</span><span class="k">fun</span><span class="o">&gt;}</span>
</span><span id="__span-14-12"><a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a>
</span><span id="__span-14-13"><a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a><span class="o">#</span> <span class="k">let</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">make_piece_array</span> <span class="n">piece_string_list</span> <span class="n">brd</span> <span class="o">;;</span>
</span><span id="__span-14-14"><a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a><span class="k">val</span> <span class="n">arr</span> <span class="o">:</span> <span class="n">piece</span> <span class="kt">array</span> <span class="o">=</span>
</span><span id="__span-14-15"><a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a>  <span class="o">[|{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span>
</span><span id="__span-14-16"><a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a>    <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span>
</span><span id="__span-14-17"><a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a>    <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span>
</span><span id="__span-14-18"><a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a>    <span class="o">...};</span> <span class="o">...|]</span>
</span><span id="__span-14-19"><a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a><span class="o">#</span> <span class="nn">Array</span><span class="p">.</span><span class="n">length</span> <span class="n">arr</span> <span class="o">;;</span>
</span><span id="__span-14-20"><a id="__codelineno-14-20" name="__codelineno-14-20" href="#__codelineno-14-20"></a><span class="o">-</span> <span class="o">:</span> <span class="kt">int</span> <span class="o">=</span> <span class="mi">1936</span>
</span><span id="__span-14-21"><a id="__codelineno-14-21" name="__codelineno-14-21" href="#__codelineno-14-21"></a><span class="c">(* There are 1936 possible piece placements on this board. *)</span>
</span></code></pre></div>
</div>
<h3 id="all_locs_on_board"><code>all_locs_on_board</code></h3>
<p>This function is provided for you.
It takes a board as its argument
and returns a list of all the locations on the board
as (row, column) coordinates.</p>
<h3 id="7-make_constraints_array">7. <code>make_constraints_array</code></h3>
<p>[<strong>3 points</strong>]</p>
<p>Now that we know what the rows of our binary matrix will correspond to,
we need to work on the columns.
Since the columns represent constraints,
this function will generate an array of constraints
given a list of pieces in their string representation, and a board.
So what is a "constraint", anyway?
Above, we mentioned that there are two kinds of constraints for this problem:</p>
<ul>
<li>
<p>location constraints
(<em>i.e.</em> that exactly one piece must cover each location on the board);</p>
</li>
<li>
<p>piece constraints
(<em>i.e.</em> that only one piece with a given character label
should be placed on the board).</p>
</li>
</ul>
<p>We need to generate an array of these constraints,
so we define the following type (in <code>pentomino_types.ml</code>):</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="k">type</span> <span class="n">pconstraint</span> <span class="o">=</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>  <span class="o">|</span> <span class="nc">Loc</span> <span class="k">of</span> <span class="n">loc</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>  <span class="o">|</span> <span class="nc">Label</span> <span class="k">of</span> <span class="kt">char</span>
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>I wanted to call this type <code>constraint</code>,
but <code>constraint</code> is a keyword in OCaml!</p>
</div>
<p>The array that is returned from this function is a <code>pconstraint array</code>.
To generate it, you need to compute all the board locations
(using the <code>all_locs_on_board</code> function),
make them into <code>pconstraint</code>s using the <code>Loc</code> constructor,
extract all the piece labels from the list of pieces,
make them into <code>pconstraint</code>s using the <code>Label</code> constructor,
concatenate all of these <code>pconstraint</code>s and convert them into an array.
Simple! :-)
(Actually, it only takes a few lines of code.)</p>
<div class="admonition examples">
<p class="admonition-title">Examples</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="o">#</span> <span class="k">let</span> <span class="n">piece_string_list</span> <span class="o">=</span> <span class="nn">Pentomino_pieces</span><span class="p">.</span><span class="n">all_pieces</span> <span class="o">;;</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="k">val</span> <span class="n">piece_string_list</span> <span class="o">:</span> <span class="o">(</span><span class="kt">char</span> <span class="o">*</span> <span class="kt">string</span><span class="o">)</span> <span class="kt">list</span> <span class="o">=</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>  <span class="o">[(</span><span class="sc">&#39;f&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">.XX</span><span class="se">\n</span><span class="s2">XX.</span><span class="se">\n</span><span class="s2">.X.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">);</span> <span class="o">(</span><span class="sc">&#39;i&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">X</span><span class="se">\n</span><span class="s2">X</span><span class="se">\n</span><span class="s2">X</span><span class="se">\n</span><span class="s2">X</span><span class="se">\n</span><span class="s2">X</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">);</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>   <span class="o">(</span><span class="sc">&#39;l&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">X.</span><span class="se">\n</span><span class="s2">X.</span><span class="se">\n</span><span class="s2">X.</span><span class="se">\n</span><span class="s2">XX</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">);</span> <span class="o">(</span><span class="sc">&#39;n&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">.X</span><span class="se">\n</span><span class="s2">.X</span><span class="se">\n</span><span class="s2">XX</span><span class="se">\n</span><span class="s2">X.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">);</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>   <span class="o">(</span><span class="sc">&#39;p&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">XX</span><span class="se">\n</span><span class="s2">XX</span><span class="se">\n</span><span class="s2">X.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">);</span> <span class="o">(</span><span class="sc">&#39;t&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">XXX</span><span class="se">\n</span><span class="s2">.X.</span><span class="se">\n</span><span class="s2">.X.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">);</span> <span class="o">(</span><span class="sc">&#39;u&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">X.X</span><span class="se">\n</span><span class="s2">XXX</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">);</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>   <span class="o">(</span><span class="sc">&#39;v&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">X..</span><span class="se">\n</span><span class="s2">X..</span><span class="se">\n</span><span class="s2">XXX</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">);</span> <span class="o">(</span><span class="sc">&#39;w&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">X..</span><span class="se">\n</span><span class="s2">XX.</span><span class="se">\n</span><span class="s2">.XX</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">);</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>   <span class="o">(</span><span class="sc">&#39;x&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">.X.</span><span class="se">\n</span><span class="s2">XXX</span><span class="se">\n</span><span class="s2">.X.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">);</span> <span class="o">(</span><span class="sc">&#39;y&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">..X.</span><span class="se">\n</span><span class="s2">XXXX</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">);</span>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>   <span class="o">(</span><span class="sc">&#39;z&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">XX.</span><span class="se">\n</span><span class="s2">.X.</span><span class="se">\n</span><span class="s2">.XX</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">)]</span>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a>
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="o">#</span> <span class="k">let</span> <span class="n">brd</span> <span class="o">=</span> <span class="o">{</span> <span class="n">nrows</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span> <span class="n">ncols</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span> <span class="n">member</span> <span class="o">=</span> <span class="k">fun</span> <span class="o">_</span> <span class="o">-&gt;</span> <span class="bp">true</span> <span class="o">}</span> <span class="o">;;</span>
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a><span class="k">val</span> <span class="n">brd</span> <span class="o">:</span> <span class="n">board</span> <span class="o">=</span> <span class="o">{</span><span class="n">nrows</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span> <span class="n">ncols</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span> <span class="n">member</span> <span class="o">=</span> <span class="o">&lt;</span><span class="k">fun</span><span class="o">&gt;}</span>
</span><span id="__span-16-12"><a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a>
</span><span id="__span-16-13"><a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a><span class="o">#</span> <span class="n">make_constraints_array</span> <span class="n">piece_string_list</span> <span class="n">brd</span> <span class="o">;;</span>
</span><span id="__span-16-14"><a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a><span class="o">-</span> <span class="o">:</span> <span class="n">pconstraint</span> <span class="kt">array</span> <span class="o">=</span>
</span><span id="__span-16-15"><a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a><span class="o">[|</span><span class="nc">Loc</span> <span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="mi">4</span><span class="o">);</span> <span class="nc">Loc</span> <span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="mi">3</span><span class="o">);</span> <span class="nc">Loc</span> <span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span> <span class="nc">Loc</span> <span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span> <span class="nc">Loc</span> <span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span> <span class="nc">Loc</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">);</span>
</span><span id="__span-16-16"><a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a>  <span class="nc">Loc</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">3</span><span class="o">);</span> <span class="nc">Loc</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span> <span class="nc">Loc</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span> <span class="nc">Loc</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span> <span class="nc">Loc</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">4</span><span class="o">);</span> <span class="nc">Loc</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">);</span>
</span><span id="__span-16-17"><a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a>  <span class="nc">Loc</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span> <span class="nc">Loc</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span> <span class="nc">Loc</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span> <span class="nc">Loc</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">4</span><span class="o">);</span> <span class="nc">Loc</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">3</span><span class="o">);</span> <span class="nc">Loc</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>
</span><span id="__span-16-18"><a id="__codelineno-16-18" name="__codelineno-16-18" href="#__codelineno-16-18"></a>  <span class="nc">Loc</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span> <span class="nc">Loc</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span> <span class="nc">Loc</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">4</span><span class="o">);</span> <span class="nc">Loc</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">3</span><span class="o">);</span> <span class="nc">Loc</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span> <span class="nc">Loc</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>
</span><span id="__span-16-19"><a id="__codelineno-16-19" name="__codelineno-16-19" href="#__codelineno-16-19"></a>  <span class="nc">Loc</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span> <span class="nc">Label</span> <span class="sc">&#39;f&#39;</span><span class="o">;</span> <span class="nc">Label</span> <span class="sc">&#39;i&#39;</span><span class="o">;</span> <span class="nc">Label</span> <span class="sc">&#39;l&#39;</span><span class="o">;</span> <span class="nc">Label</span> <span class="sc">&#39;n&#39;</span><span class="o">;</span> <span class="nc">Label</span> <span class="sc">&#39;p&#39;</span><span class="o">;</span>
</span><span id="__span-16-20"><a id="__codelineno-16-20" name="__codelineno-16-20" href="#__codelineno-16-20"></a>  <span class="nc">Label</span> <span class="sc">&#39;t&#39;</span><span class="o">;</span> <span class="nc">Label</span> <span class="sc">&#39;u&#39;</span><span class="o">;</span> <span class="nc">Label</span> <span class="sc">&#39;v&#39;</span><span class="o">;</span> <span class="nc">Label</span> <span class="sc">&#39;w&#39;</span><span class="o">;</span> <span class="nc">Label</span> <span class="sc">&#39;x&#39;</span><span class="o">;</span> <span class="nc">Label</span> <span class="sc">&#39;y&#39;</span><span class="o">;</span> <span class="nc">Label</span> <span class="sc">&#39;z&#39;</span><span class="o">|]</span>
</span><span id="__span-16-21"><a id="__codelineno-16-21" name="__codelineno-16-21" href="#__codelineno-16-21"></a>
</span><span id="__span-16-22"><a id="__codelineno-16-22" name="__codelineno-16-22" href="#__codelineno-16-22"></a><span class="c">(* Note that there is one constraint for every location on the board and</span>
</span><span id="__span-16-23"><a id="__codelineno-16-23" name="__codelineno-16-23" href="#__codelineno-16-23"></a><span class="c">   one for every piece label.  The order doesn&#39;t matter. *)</span>
</span></code></pre></div>
</div>
<h3 id="8-make_constraints_map">8. <code>make_constraints_map</code></h3>
<p>[<strong>3 points</strong>]</p>
<p>OK, so now we have the constraints array,
which we can think of as a map between integers
(the indices of the array) and constraints.
But (as we will see in the final problem)
what we actually need is a map between constraints and indices!
Fortunately, we have defined a suitable type in <code>pentomino_types.ml</code>
called <code>PconstraintMap</code>:</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="c">(* Map using pconstraints as keys. *)</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="k">module</span> <span class="nc">PconstraintMap</span> <span class="o">=</span> <span class="nn">Map</span><span class="p">.</span><span class="nc">Make</span><span class="o">(</span><span class="k">struct</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>  <span class="k">type</span> <span class="n">t</span> <span class="o">=</span> <span class="n">pconstraint</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>  <span class="k">let</span> <span class="n">compare</span> <span class="o">=</span> <span class="nn">Stdlib</span><span class="p">.</span><span class="n">compare</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="k">end</span><span class="o">)</span>
</span></code></pre></div>
<p>An empty <code>PconstraintMap</code> would be <code>PconstraintMap.empty</code>
and we can add to it like we would with any map type.
So the function <code>make_constraints_map</code>
will take the same arguments as <code>make_constraints_array</code> did,
but it will create and return a <code>PconstraintMap</code> instead.
It will do this by first calling <code>make_constraints_array</code>
to get the constraints array,
and then by walking through the array,
adding each (constraint, array index) pair to the map.
This is also a pretty simple function.</p>
<div class="admonition examples">
<p class="admonition-title">Examples</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="o">#</span> <span class="k">let</span> <span class="n">piece_string_list</span> <span class="o">=</span> <span class="nn">Pentomino_pieces</span><span class="p">.</span><span class="n">all_pieces</span> <span class="o">;;</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="k">val</span> <span class="n">piece_string_list</span> <span class="o">:</span> <span class="o">(</span><span class="kt">char</span> <span class="o">*</span> <span class="kt">string</span><span class="o">)</span> <span class="kt">list</span> <span class="o">=</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>  <span class="o">[(</span><span class="sc">&#39;f&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">.XX</span><span class="se">\n</span><span class="s2">XX.</span><span class="se">\n</span><span class="s2">.X.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">);</span> <span class="o">(</span><span class="sc">&#39;i&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">X</span><span class="se">\n</span><span class="s2">X</span><span class="se">\n</span><span class="s2">X</span><span class="se">\n</span><span class="s2">X</span><span class="se">\n</span><span class="s2">X</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">);</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>   <span class="o">(</span><span class="sc">&#39;l&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">X.</span><span class="se">\n</span><span class="s2">X.</span><span class="se">\n</span><span class="s2">X.</span><span class="se">\n</span><span class="s2">XX</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">);</span> <span class="o">(</span><span class="sc">&#39;n&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">.X</span><span class="se">\n</span><span class="s2">.X</span><span class="se">\n</span><span class="s2">XX</span><span class="se">\n</span><span class="s2">X.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">);</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>   <span class="o">(</span><span class="sc">&#39;p&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">XX</span><span class="se">\n</span><span class="s2">XX</span><span class="se">\n</span><span class="s2">X.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">);</span> <span class="o">(</span><span class="sc">&#39;t&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">XXX</span><span class="se">\n</span><span class="s2">.X.</span><span class="se">\n</span><span class="s2">.X.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">);</span> <span class="o">(</span><span class="sc">&#39;u&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">X.X</span><span class="se">\n</span><span class="s2">XXX</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">);</span>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>   <span class="o">(</span><span class="sc">&#39;v&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">X..</span><span class="se">\n</span><span class="s2">X..</span><span class="se">\n</span><span class="s2">XXX</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">);</span> <span class="o">(</span><span class="sc">&#39;w&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">X..</span><span class="se">\n</span><span class="s2">XX.</span><span class="se">\n</span><span class="s2">.XX</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">);</span>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>   <span class="o">(</span><span class="sc">&#39;x&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">.X.</span><span class="se">\n</span><span class="s2">XXX</span><span class="se">\n</span><span class="s2">.X.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">);</span> <span class="o">(</span><span class="sc">&#39;y&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">..X.</span><span class="se">\n</span><span class="s2">XXXX</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">);</span>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>   <span class="o">(</span><span class="sc">&#39;z&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">XX.</span><span class="se">\n</span><span class="s2">.X.</span><span class="se">\n</span><span class="s2">.XX</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">)]</span>
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>
</span><span id="__span-18-10"><a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a><span class="o">#</span> <span class="k">let</span> <span class="n">brd</span> <span class="o">=</span> <span class="o">{</span> <span class="n">nrows</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span> <span class="n">ncols</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span> <span class="n">member</span> <span class="o">=</span> <span class="k">fun</span> <span class="o">_</span> <span class="o">-&gt;</span> <span class="bp">true</span> <span class="o">}</span> <span class="o">;;</span>
</span><span id="__span-18-11"><a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a><span class="k">val</span> <span class="n">brd</span> <span class="o">:</span> <span class="n">board</span> <span class="o">=</span> <span class="o">{</span><span class="n">nrows</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span> <span class="n">ncols</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span> <span class="n">member</span> <span class="o">=</span> <span class="o">&lt;</span><span class="k">fun</span><span class="o">&gt;}</span>
</span><span id="__span-18-12"><a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a>
</span><span id="__span-18-13"><a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a><span class="o">#</span> <span class="k">let</span> <span class="n">cmap</span> <span class="o">=</span> <span class="n">make_constraints_map</span> <span class="n">piece_string_list</span> <span class="n">brd</span> <span class="o">;;</span>
</span><span id="__span-18-14"><a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a><span class="k">val</span> <span class="n">cmap</span> <span class="o">:</span> <span class="kt">int</span> <span class="nn">PconstraintMap</span><span class="p">.</span><span class="n">t</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;</span>
</span><span id="__span-18-15"><a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a>
</span><span id="__span-18-16"><a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a><span class="o">#</span> <span class="nn">PconstraintMap</span><span class="p">.</span><span class="n">bindings</span> <span class="n">cmap</span> <span class="o">;;</span>
</span><span id="__span-18-17"><a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a><span class="o">-</span> <span class="o">:</span> <span class="o">(</span><span class="n">pconstraint</span> <span class="o">*</span> <span class="kt">int</span><span class="o">)</span> <span class="kt">list</span> <span class="o">=</span>
</span><span id="__span-18-18"><a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a><span class="o">[(</span><span class="nc">Loc</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">),</span> <span class="mi">24</span><span class="o">);</span> <span class="o">(</span><span class="nc">Loc</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">),</span> <span class="mi">23</span><span class="o">);</span> <span class="o">(</span><span class="nc">Loc</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">2</span><span class="o">),</span> <span class="mi">22</span><span class="o">);</span> <span class="o">(</span><span class="nc">Loc</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">3</span><span class="o">),</span> <span class="mi">21</span><span class="o">);</span>
</span><span id="__span-18-19"><a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a> <span class="o">(</span><span class="nc">Loc</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">4</span><span class="o">),</span> <span class="mi">20</span><span class="o">);</span> <span class="o">(</span><span class="nc">Loc</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">),</span> <span class="mi">19</span><span class="o">);</span> <span class="o">(</span><span class="nc">Loc</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">),</span> <span class="mi">18</span><span class="o">);</span> <span class="o">(</span><span class="nc">Loc</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">),</span> <span class="mi">17</span><span class="o">);</span>
</span><span id="__span-18-20"><a id="__codelineno-18-20" name="__codelineno-18-20" href="#__codelineno-18-20"></a> <span class="o">(</span><span class="nc">Loc</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">3</span><span class="o">),</span> <span class="mi">16</span><span class="o">);</span> <span class="o">(</span><span class="nc">Loc</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">4</span><span class="o">),</span> <span class="mi">15</span><span class="o">);</span> <span class="o">(</span><span class="nc">Loc</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">0</span><span class="o">),</span> <span class="mi">14</span><span class="o">);</span> <span class="o">(</span><span class="nc">Loc</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">1</span><span class="o">),</span> <span class="mi">13</span><span class="o">);</span>
</span><span id="__span-18-21"><a id="__codelineno-18-21" name="__codelineno-18-21" href="#__codelineno-18-21"></a> <span class="o">(</span><span class="nc">Loc</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">2</span><span class="o">),</span> <span class="mi">12</span><span class="o">);</span> <span class="o">(</span><span class="nc">Loc</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">),</span> <span class="mi">11</span><span class="o">);</span> <span class="o">(</span><span class="nc">Loc</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">4</span><span class="o">),</span> <span class="mi">10</span><span class="o">);</span> <span class="o">(</span><span class="nc">Loc</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">0</span><span class="o">),</span> <span class="mi">9</span><span class="o">);</span>
</span><span id="__span-18-22"><a id="__codelineno-18-22" name="__codelineno-18-22" href="#__codelineno-18-22"></a> <span class="o">(</span><span class="nc">Loc</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">1</span><span class="o">),</span> <span class="mi">8</span><span class="o">);</span> <span class="o">(</span><span class="nc">Loc</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">2</span><span class="o">),</span> <span class="mi">7</span><span class="o">);</span> <span class="o">(</span><span class="nc">Loc</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">3</span><span class="o">),</span> <span class="mi">6</span><span class="o">);</span> <span class="o">(</span><span class="nc">Loc</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">),</span> <span class="mi">5</span><span class="o">);</span>
</span><span id="__span-18-23"><a id="__codelineno-18-23" name="__codelineno-18-23" href="#__codelineno-18-23"></a> <span class="o">(</span><span class="nc">Loc</span> <span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="mi">0</span><span class="o">),</span> <span class="mi">4</span><span class="o">);</span> <span class="o">(</span><span class="nc">Loc</span> <span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="mi">1</span><span class="o">),</span> <span class="mi">3</span><span class="o">);</span> <span class="o">(</span><span class="nc">Loc</span> <span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="mi">2</span><span class="o">),</span> <span class="mi">2</span><span class="o">);</span> <span class="o">(</span><span class="nc">Loc</span> <span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="mi">3</span><span class="o">),</span> <span class="mi">1</span><span class="o">);</span>
</span><span id="__span-18-24"><a id="__codelineno-18-24" name="__codelineno-18-24" href="#__codelineno-18-24"></a> <span class="o">(</span><span class="nc">Loc</span> <span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="mi">4</span><span class="o">),</span> <span class="mi">0</span><span class="o">);</span> <span class="o">(</span><span class="nc">Label</span> <span class="sc">&#39;f&#39;</span><span class="o">,</span> <span class="mi">25</span><span class="o">);</span> <span class="o">(</span><span class="nc">Label</span> <span class="sc">&#39;i&#39;</span><span class="o">,</span> <span class="mi">26</span><span class="o">);</span> <span class="o">(</span><span class="nc">Label</span> <span class="sc">&#39;l&#39;</span><span class="o">,</span> <span class="mi">27</span><span class="o">);</span>
</span><span id="__span-18-25"><a id="__codelineno-18-25" name="__codelineno-18-25" href="#__codelineno-18-25"></a> <span class="o">(</span><span class="nc">Label</span> <span class="sc">&#39;n&#39;</span><span class="o">,</span> <span class="mi">28</span><span class="o">);</span> <span class="o">(</span><span class="nc">Label</span> <span class="sc">&#39;p&#39;</span><span class="o">,</span> <span class="mi">29</span><span class="o">);</span> <span class="o">(</span><span class="nc">Label</span> <span class="sc">&#39;t&#39;</span><span class="o">,</span> <span class="mi">30</span><span class="o">);</span> <span class="o">(</span><span class="nc">Label</span> <span class="sc">&#39;u&#39;</span><span class="o">,</span> <span class="mi">31</span><span class="o">);</span>
</span><span id="__span-18-26"><a id="__codelineno-18-26" name="__codelineno-18-26" href="#__codelineno-18-26"></a> <span class="o">(</span><span class="nc">Label</span> <span class="sc">&#39;v&#39;</span><span class="o">,</span> <span class="mi">32</span><span class="o">);</span> <span class="o">(</span><span class="nc">Label</span> <span class="sc">&#39;w&#39;</span><span class="o">,</span> <span class="mi">33</span><span class="o">);</span> <span class="o">(</span><span class="nc">Label</span> <span class="sc">&#39;x&#39;</span><span class="o">,</span> <span class="mi">34</span><span class="o">);</span> <span class="o">(</span><span class="nc">Label</span> <span class="sc">&#39;y&#39;</span><span class="o">,</span> <span class="mi">35</span><span class="o">);</span>
</span><span id="__span-18-27"><a id="__codelineno-18-27" name="__codelineno-18-27" href="#__codelineno-18-27"></a> <span class="o">(</span><span class="nc">Label</span> <span class="sc">&#39;z&#39;</span><span class="o">,</span> <span class="mi">36</span><span class="o">)]</span>
</span></code></pre></div>
</div>
<p>In the example, we see how, given a location or a label,
we can find the corresponding index in the constraints array.
These indices will also be the column indices in our binary matrix,
which leads us to the last problem!</p>
<h3 id="9-make_binary_matrix_locs">9. <code>make_binary_matrix_locs</code></h3>
<p>[<strong>6 points</strong>]</p>
<p>Now we come to the final function, which is the point of the entire section.
We want to create a binary matrix,
given a list of Pentomino pieces
(again in the string representation)
and a board to place them on.
The output will be a set of (row, column) locations in the binary matrix
(which are the 1s of the binary matrix; all other locations are 0s).</p>
<p>Here is an outline of the algorithm:</p>
<ul>
<li>
<p>Make a piece array from the piece list and the board like you did above.</p>
</li>
<li>
<p>Make a constraints map from the piece list and the board like you did above.</p>
</li>
<li>
<p>For each piece in the piece array, you have its index,
which will be the row index in the binary array.
Take all the locations that the piece occupies,
as well as the character label of the piece,
and make constraints from them.
Look these constraints up in the constraints map
to get the column indices for the binary array
where there are 1s for this row index.
Combine the row index with the column indices
to get the locations in the binary matrix which should be 1s.</p>
</li>
<li>
<p>Concatenate all the binary matrix locations
from the previous step into one big list,
which contains the locations of all the 1s in the binary matrix.
Convert this list into a <code>LocSet</code> and return it.</p>
</li>
</ul>
<div class="admonition examples">
<p class="admonition-title">Examples</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="o">#</span> <span class="k">let</span> <span class="n">board</span> <span class="o">=</span> <span class="o">{</span> <span class="n">nrows</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span> <span class="n">ncols</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span> <span class="n">member</span> <span class="o">=</span> <span class="k">fun</span> <span class="o">_</span> <span class="o">-&gt;</span> <span class="bp">true</span> <span class="o">}</span> <span class="o">;;</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="k">val</span> <span class="n">board</span> <span class="o">:</span> <span class="n">board</span> <span class="o">=</span> <span class="o">{</span><span class="n">nrows</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span> <span class="n">ncols</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span> <span class="n">member</span> <span class="o">=</span> <span class="o">&lt;</span><span class="k">fun</span><span class="o">&gt;}</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="o">#</span> <span class="k">let</span> <span class="n">pl_s</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">X.</span><span class="se">\n</span><span class="s2">X.</span><span class="se">\n</span><span class="s2">X.</span><span class="se">\n</span><span class="s2">XX</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">;;</span>  <span class="c">(* &quot;L&quot; piece *)</span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="k">val</span> <span class="n">pl_s</span> <span class="o">:</span> <span class="kt">string</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">X.</span><span class="se">\n</span><span class="s2">X.</span><span class="se">\n</span><span class="s2">X.</span><span class="se">\n</span><span class="s2">XX</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="o">#</span> <span class="k">let</span> <span class="n">pt_s</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">XXX</span><span class="se">\n</span><span class="s2">.X.</span><span class="se">\n</span><span class="s2">.X.</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">;;</span>   <span class="c">(* &quot;T&quot; piece *)</span>
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a><span class="k">val</span> <span class="n">pt_s</span> <span class="o">:</span> <span class="kt">string</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">XXX</span><span class="se">\n</span><span class="s2">.X.</span><span class="se">\n</span><span class="s2">.X.</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>
</span><span id="__span-19-10"><a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a><span class="o">#</span> <span class="k">let</span> <span class="n">py_s</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">..X.</span><span class="se">\n</span><span class="s2">XXXX</span><span class="se">\n</span><span class="s2">&quot;</span>  <span class="o">;;</span>     <span class="c">(* &quot;Y&quot; piece *)</span>
</span><span id="__span-19-11"><a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a><span class="k">val</span> <span class="n">py_s</span> <span class="o">:</span> <span class="kt">string</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">..X.</span><span class="se">\n</span><span class="s2">XXXX</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="__span-19-12"><a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a>
</span><span id="__span-19-13"><a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a><span class="o">#</span> <span class="k">let</span> <span class="n">pieces</span> <span class="o">=</span> <span class="o">[(</span><span class="sc">&#39;l&#39;</span><span class="o">,</span> <span class="n">pl_s</span><span class="o">);</span> <span class="o">(</span><span class="sc">&#39;t&#39;</span><span class="o">,</span> <span class="n">pt_s</span><span class="o">);</span> <span class="o">(</span><span class="sc">&#39;y&#39;</span><span class="o">,</span> <span class="n">py_s</span><span class="o">)]</span> <span class="o">;;</span>
</span><span id="__span-19-14"><a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a><span class="k">val</span> <span class="n">pieces</span> <span class="o">:</span> <span class="o">(</span><span class="kt">char</span> <span class="o">*</span> <span class="kt">string</span><span class="o">)</span> <span class="kt">list</span> <span class="o">=</span>
</span><span id="__span-19-15"><a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a>  <span class="o">[(</span><span class="sc">&#39;l&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">X.</span><span class="se">\n</span><span class="s2">X.</span><span class="se">\n</span><span class="s2">X.</span><span class="se">\n</span><span class="s2">XX</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">);</span> <span class="o">(</span><span class="sc">&#39;t&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">XXX</span><span class="se">\n</span><span class="s2">.X.</span><span class="se">\n</span><span class="s2">.X.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">);</span>
</span><span id="__span-19-16"><a id="__codelineno-19-16" name="__codelineno-19-16" href="#__codelineno-19-16"></a>   <span class="o">(</span><span class="sc">&#39;y&#39;</span><span class="o">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">..X.</span><span class="se">\n</span><span class="s2">XXXX</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">)]</span>
</span><span id="__span-19-17"><a id="__codelineno-19-17" name="__codelineno-19-17" href="#__codelineno-19-17"></a>
</span><span id="__span-19-18"><a id="__codelineno-19-18" name="__codelineno-19-18" href="#__codelineno-19-18"></a><span class="o">#</span> <span class="n">make_piece_array</span> <span class="n">pieces</span> <span class="n">board</span> <span class="o">;;</span>
</span><span id="__span-19-19"><a id="__codelineno-19-19" name="__codelineno-19-19" href="#__codelineno-19-19"></a><span class="o">-</span> <span class="o">:</span> <span class="n">piece</span> <span class="kt">array</span> <span class="o">=</span>
</span><span id="__span-19-20"><a id="__codelineno-19-20" name="__codelineno-19-20" href="#__codelineno-19-20"></a><span class="o">[|{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;l&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;l&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span>
</span><span id="__span-19-21"><a id="__codelineno-19-21" name="__codelineno-19-21" href="#__codelineno-19-21"></a>  <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;l&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;l&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span>
</span><span id="__span-19-22"><a id="__codelineno-19-22" name="__codelineno-19-22" href="#__codelineno-19-22"></a>  <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;l&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;l&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span>
</span><span id="__span-19-23"><a id="__codelineno-19-23" name="__codelineno-19-23" href="#__codelineno-19-23"></a>  <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;l&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;l&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span>
</span><span id="__span-19-24"><a id="__codelineno-19-24" name="__codelineno-19-24" href="#__codelineno-19-24"></a>  <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;l&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;l&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span>
</span><span id="__span-19-25"><a id="__codelineno-19-25" name="__codelineno-19-25" href="#__codelineno-19-25"></a>  <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;l&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;l&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span>
</span><span id="__span-19-26"><a id="__codelineno-19-26" name="__codelineno-19-26" href="#__codelineno-19-26"></a>  <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;l&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;l&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span>
</span><span id="__span-19-27"><a id="__codelineno-19-27" name="__codelineno-19-27" href="#__codelineno-19-27"></a>  <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;l&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;l&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span>
</span><span id="__span-19-28"><a id="__codelineno-19-28" name="__codelineno-19-28" href="#__codelineno-19-28"></a>  <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;t&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;t&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span>
</span><span id="__span-19-29"><a id="__codelineno-19-29" name="__codelineno-19-29" href="#__codelineno-19-29"></a>  <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;t&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;t&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span>
</span><span id="__span-19-30"><a id="__codelineno-19-30" name="__codelineno-19-30" href="#__codelineno-19-30"></a>  <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;t&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;t&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span>
</span><span id="__span-19-31"><a id="__codelineno-19-31" name="__codelineno-19-31" href="#__codelineno-19-31"></a>  <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;t&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;t&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span>
</span><span id="__span-19-32"><a id="__codelineno-19-32" name="__codelineno-19-32" href="#__codelineno-19-32"></a>  <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;t&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;t&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span>
</span><span id="__span-19-33"><a id="__codelineno-19-33" name="__codelineno-19-33" href="#__codelineno-19-33"></a>  <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;t&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;t&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span>
</span><span id="__span-19-34"><a id="__codelineno-19-34" name="__codelineno-19-34" href="#__codelineno-19-34"></a>  <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;y&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;y&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span>
</span><span id="__span-19-35"><a id="__codelineno-19-35" name="__codelineno-19-35" href="#__codelineno-19-35"></a>  <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;y&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;y&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span>
</span><span id="__span-19-36"><a id="__codelineno-19-36" name="__codelineno-19-36" href="#__codelineno-19-36"></a>  <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;y&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;y&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span>
</span><span id="__span-19-37"><a id="__codelineno-19-37" name="__codelineno-19-37" href="#__codelineno-19-37"></a>  <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;y&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;y&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span>
</span><span id="__span-19-38"><a id="__codelineno-19-38" name="__codelineno-19-38" href="#__codelineno-19-38"></a>  <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;y&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;y&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span>
</span><span id="__span-19-39"><a id="__codelineno-19-39" name="__codelineno-19-39" href="#__codelineno-19-39"></a>  <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;y&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;y&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span>
</span><span id="__span-19-40"><a id="__codelineno-19-40" name="__codelineno-19-40" href="#__codelineno-19-40"></a>  <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;y&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;y&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span>
</span><span id="__span-19-41"><a id="__codelineno-19-41" name="__codelineno-19-41" href="#__codelineno-19-41"></a>  <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;y&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;};</span> <span class="o">{</span><span class="n">label</span> <span class="o">=</span> <span class="sc">&#39;y&#39;</span><span class="o">;</span> <span class="n">locs</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;}|]</span>
</span><span id="__span-19-42"><a id="__codelineno-19-42" name="__codelineno-19-42" href="#__codelineno-19-42"></a>
</span><span id="__span-19-43"><a id="__codelineno-19-43" name="__codelineno-19-43" href="#__codelineno-19-43"></a><span class="o">#</span> <span class="nn">Array</span><span class="p">.</span><span class="n">length</span> <span class="o">(</span><span class="n">make_piece_array</span> <span class="n">pieces</span> <span class="n">board</span><span class="o">)</span> <span class="o">;;</span>
</span><span id="__span-19-44"><a id="__codelineno-19-44" name="__codelineno-19-44" href="#__codelineno-19-44"></a><span class="o">-</span> <span class="o">:</span> <span class="kt">int</span> <span class="o">=</span> <span class="mi">44</span>
</span><span id="__span-19-45"><a id="__codelineno-19-45" name="__codelineno-19-45" href="#__codelineno-19-45"></a>
</span><span id="__span-19-46"><a id="__codelineno-19-46" name="__codelineno-19-46" href="#__codelineno-19-46"></a><span class="o">#</span> <span class="n">make_constraints_array</span> <span class="n">pieces</span> <span class="n">board</span> <span class="o">;;</span>
</span><span id="__span-19-47"><a id="__codelineno-19-47" name="__codelineno-19-47" href="#__codelineno-19-47"></a><span class="o">-</span> <span class="o">:</span> <span class="n">pconstraint</span> <span class="kt">array</span> <span class="o">=</span>
</span><span id="__span-19-48"><a id="__codelineno-19-48" name="__codelineno-19-48" href="#__codelineno-19-48"></a><span class="o">[|</span><span class="nc">Loc</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">4</span><span class="o">);</span> <span class="nc">Loc</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">);</span> <span class="nc">Loc</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span> <span class="nc">Loc</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span> <span class="nc">Loc</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span> <span class="nc">Loc</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">4</span><span class="o">);</span>
</span><span id="__span-19-49"><a id="__codelineno-19-49" name="__codelineno-19-49" href="#__codelineno-19-49"></a>  <span class="nc">Loc</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">3</span><span class="o">);</span> <span class="nc">Loc</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span> <span class="nc">Loc</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span> <span class="nc">Loc</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span> <span class="nc">Loc</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">4</span><span class="o">);</span> <span class="nc">Loc</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">3</span><span class="o">);</span>
</span><span id="__span-19-50"><a id="__codelineno-19-50" name="__codelineno-19-50" href="#__codelineno-19-50"></a>  <span class="nc">Loc</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span> <span class="nc">Loc</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span> <span class="nc">Loc</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span> <span class="nc">Label</span> <span class="sc">&#39;l&#39;</span><span class="o">;</span> <span class="nc">Label</span> <span class="sc">&#39;t&#39;</span><span class="o">;</span> <span class="nc">Label</span> <span class="sc">&#39;y&#39;</span><span class="o">|]</span>
</span><span id="__span-19-51"><a id="__codelineno-19-51" name="__codelineno-19-51" href="#__codelineno-19-51"></a>
</span><span id="__span-19-52"><a id="__codelineno-19-52" name="__codelineno-19-52" href="#__codelineno-19-52"></a><span class="o">#</span> <span class="nn">Array</span><span class="p">.</span><span class="n">length</span> <span class="o">(</span><span class="n">make_constraints_array</span> <span class="n">pieces</span> <span class="n">board</span><span class="o">)</span> <span class="o">;;</span>
</span><span id="__span-19-53"><a id="__codelineno-19-53" name="__codelineno-19-53" href="#__codelineno-19-53"></a><span class="o">-</span> <span class="o">:</span> <span class="kt">int</span> <span class="o">=</span> <span class="mi">18</span>
</span><span id="__span-19-54"><a id="__codelineno-19-54" name="__codelineno-19-54" href="#__codelineno-19-54"></a>
</span><span id="__span-19-55"><a id="__codelineno-19-55" name="__codelineno-19-55" href="#__codelineno-19-55"></a><span class="o">#</span> <span class="k">let</span> <span class="n">locs</span> <span class="o">=</span> <span class="n">make_binary_matrix_locs</span> <span class="n">pieces</span> <span class="n">board</span> <span class="o">;;</span>
</span><span id="__span-19-56"><a id="__codelineno-19-56" name="__codelineno-19-56" href="#__codelineno-19-56"></a><span class="k">val</span> <span class="n">locs</span> <span class="o">:</span> <span class="nn">LocSet</span><span class="p">.</span><span class="n">t</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">abstr</span><span class="o">&gt;</span>
</span><span id="__span-19-57"><a id="__codelineno-19-57" name="__codelineno-19-57" href="#__codelineno-19-57"></a>
</span><span id="__span-19-58"><a id="__codelineno-19-58" name="__codelineno-19-58" href="#__codelineno-19-58"></a><span class="o">#</span> <span class="nn">LocSet</span><span class="p">.</span><span class="n">cardinal</span> <span class="n">locs</span> <span class="o">;;</span>
</span><span id="__span-19-59"><a id="__codelineno-19-59" name="__codelineno-19-59" href="#__codelineno-19-59"></a><span class="o">-</span> <span class="o">:</span> <span class="kt">int</span> <span class="o">=</span> <span class="mi">264</span>
</span><span id="__span-19-60"><a id="__codelineno-19-60" name="__codelineno-19-60" href="#__codelineno-19-60"></a>
</span><span id="__span-19-61"><a id="__codelineno-19-61" name="__codelineno-19-61" href="#__codelineno-19-61"></a><span class="o">#</span> <span class="nn">LocSet</span><span class="p">.</span><span class="n">elements</span> <span class="n">locs</span> <span class="o">;;</span>
</span><span id="__span-19-62"><a id="__codelineno-19-62" name="__codelineno-19-62" href="#__codelineno-19-62"></a><span class="o">-</span> <span class="o">:</span> <span class="n">loc</span> <span class="kt">list</span> <span class="o">=</span>
</span><span id="__span-19-63"><a id="__codelineno-19-63" name="__codelineno-19-63" href="#__codelineno-19-63"></a><span class="o">[(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">9</span><span class="o">);</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">11</span><span class="o">);</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">12</span><span class="o">);</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">13</span><span class="o">);</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">14</span><span class="o">);</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">15</span><span class="o">);</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">6</span><span class="o">);</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">11</span><span class="o">);</span>
</span><span id="__span-19-64"><a id="__codelineno-19-64" name="__codelineno-19-64" href="#__codelineno-19-64"></a> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">12</span><span class="o">);</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">13</span><span class="o">);</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">14</span><span class="o">);</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">15</span><span class="o">);</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">6</span><span class="o">);</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">7</span><span class="o">);</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">8</span><span class="o">);</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">9</span><span class="o">);</span>
</span><span id="__span-19-65"><a id="__codelineno-19-65" name="__codelineno-19-65" href="#__codelineno-19-65"></a> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">14</span><span class="o">);</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">15</span><span class="o">);</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">8</span><span class="o">);</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">10</span><span class="o">);</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">11</span><span class="o">);</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">12</span><span class="o">);</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">13</span><span class="o">);</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">15</span><span class="o">);</span>
</span><span id="__span-19-66"><a id="__codelineno-19-66" name="__codelineno-19-66" href="#__codelineno-19-66"></a> <span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">);</span> <span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="mi">10</span><span class="o">);</span> <span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="mi">11</span><span class="o">);</span> <span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="mi">12</span><span class="o">);</span> <span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="mi">13</span><span class="o">);</span> <span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="mi">15</span><span class="o">);</span> <span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="mi">5</span><span class="o">);</span> <span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">);</span>
</span><span id="__span-19-67"><a id="__codelineno-19-67" name="__codelineno-19-67" href="#__codelineno-19-67"></a> <span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="mi">7</span><span class="o">);</span> <span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="mi">8</span><span class="o">);</span> <span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="mi">13</span><span class="o">);</span> <span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="mi">15</span><span class="o">);</span> <span class="o">(</span><span class="mi">6</span><span class="o">,</span> <span class="mi">6</span><span class="o">);</span> <span class="o">(</span><span class="mi">6</span><span class="o">,</span> <span class="mi">7</span><span class="o">);</span> <span class="o">(</span><span class="mi">6</span><span class="o">,</span> <span class="mi">8</span><span class="o">);</span> <span class="o">(</span><span class="mi">6</span><span class="o">,</span> <span class="mi">9</span><span class="o">);</span> <span class="o">(</span><span class="mi">6</span><span class="o">,</span> <span class="mi">11</span><span class="o">);</span>
</span><span id="__span-19-68"><a id="__codelineno-19-68" name="__codelineno-19-68" href="#__codelineno-19-68"></a> <span class="o">(</span><span class="mi">6</span><span class="o">,</span> <span class="mi">15</span><span class="o">);</span> <span class="o">(</span><span class="mi">7</span><span class="o">,</span> <span class="mi">5</span><span class="o">);</span> <span class="o">(</span><span class="mi">7</span><span class="o">,</span> <span class="mi">6</span><span class="o">);</span> <span class="o">(</span><span class="mi">7</span><span class="o">,</span> <span class="mi">7</span><span class="o">);</span> <span class="o">(</span><span class="mi">7</span><span class="o">,</span> <span class="mi">8</span><span class="o">);</span> <span class="o">(</span><span class="mi">7</span><span class="o">,</span> <span class="mi">10</span><span class="o">);</span> <span class="o">(</span><span class="mi">7</span><span class="o">,</span> <span class="mi">15</span><span class="o">);</span> <span class="o">(</span><span class="mi">8</span><span class="o">,</span> <span class="mi">4</span><span class="o">);</span> <span class="o">(</span><span class="mi">8</span><span class="o">,</span> <span class="mi">6</span><span class="o">);</span>
</span><span id="__span-19-69"><a id="__codelineno-19-69" name="__codelineno-19-69" href="#__codelineno-19-69"></a> <span class="o">(</span><span class="mi">8</span><span class="o">,</span> <span class="mi">7</span><span class="o">);</span> <span class="o">(</span><span class="mi">8</span><span class="o">,</span> <span class="mi">8</span><span class="o">);</span> <span class="o">(</span><span class="mi">8</span><span class="o">,</span> <span class="mi">9</span><span class="o">);</span> <span class="o">(</span><span class="mi">8</span><span class="o">,</span> <span class="mi">15</span><span class="o">);</span> <span class="o">(</span><span class="mi">9</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span> <span class="o">(</span><span class="mi">9</span><span class="o">,</span> <span class="mi">6</span><span class="o">);</span> <span class="o">(</span><span class="mi">9</span><span class="o">,</span> <span class="mi">7</span><span class="o">);</span> <span class="o">(</span><span class="mi">9</span><span class="o">,</span> <span class="mi">8</span><span class="o">);</span> <span class="o">(</span><span class="mi">9</span><span class="o">,</span> <span class="mi">9</span><span class="o">);</span>
</span><span id="__span-19-70"><a id="__codelineno-19-70" name="__codelineno-19-70" href="#__codelineno-19-70"></a> <span class="o">(</span><span class="mi">9</span><span class="o">,</span> <span class="o">...);</span> <span class="o">...]</span>
</span><span id="__span-19-71"><a id="__codelineno-19-71" name="__codelineno-19-71" href="#__codelineno-19-71"></a>
</span><span id="__span-19-72"><a id="__codelineno-19-72" name="__codelineno-19-72" href="#__codelineno-19-72"></a><span class="c">(* And there they are!</span>
</span><span id="__span-19-73"><a id="__codelineno-19-73" name="__codelineno-19-73" href="#__codelineno-19-73"></a><span class="c">   These are the coordinates of the 1s in the binary matrix</span>
</span><span id="__span-19-74"><a id="__codelineno-19-74" name="__codelineno-19-74" href="#__codelineno-19-74"></a><span class="c">   that corresponds to this Pentomino problem.</span>
</span><span id="__span-19-75"><a id="__codelineno-19-75" name="__codelineno-19-75" href="#__codelineno-19-75"></a><span class="c">   Hand this over to the rest of the program for solving. *)</span>
</span></code></pre></div>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy", "navigation.footer", "navigation.top"], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
        <script src="../../../js/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>