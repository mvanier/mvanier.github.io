
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://mvanier.github.io/cs4/Winter2025/book/assignments/4/partC_algebra/">
      
      
        <link rel="prev" href="../partB_more_abstraction/">
      
      
        <link rel="next" href="../../midterm/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>Part C: Algebraic expressions - The CS 4 book (Winter 2025)</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#part-c-miniproject-algebraic-expressions-20-points" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="The CS 4 book (Winter 2025)" class="md-header__button md-logo" aria-label="The CS 4 book (Winter 2025)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            The CS 4 book (Winter 2025)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Part C: Algebraic expressions
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to medium mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to medium mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="medium" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18V6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-2.69L23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="The CS 4 book (Winter 2025)" class="md-nav__button md-logo" aria-label="The CS 4 book (Winter 2025)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    The CS 4 book (Winter 2025)
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Introduction
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../intro/welcome/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome to CS 4!
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../intro/motivation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Motivation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../intro/history/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    History
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Administrative
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Administrative
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../admin/syllabus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Syllabus
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../admin/collab/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Collaboration policies
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Assignments
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Assignments
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../0/assignment0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Assignment 0: Setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Assignment 1: Evaluation and recursion
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Assignment 1: Evaluation and recursion
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1/assignment1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1/ocaml_notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OCaml notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1/partA_exercises/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part A: Exercises
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1/partB_evaluation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part B: Evaluation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1/partC_recursion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part C: Recursion
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Assignment 2: Complexity and HOFs
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Assignment 2: Complexity and HOFs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2/assignment2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2/ocaml_notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OCaml notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2/partA_orders_of_growth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part A: Orders of growth
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2/partB_evaluation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part B: Evaluation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2/partC_higher_order_functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part C: Higher-order functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2/partD_additional_problems/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part D: Additional problems
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Assignment 3: Lists
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Assignment 3: Lists
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3/assignment3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3/ocaml_notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OCaml notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3/partA_lists/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part A: Working with lists
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3/partB_structural_generative_recursion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part B: Structural and Generative Recursion
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3/partC_more_lists/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part C: Some harder problems with lists
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" checked>
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Assignment 4: Data abstraction
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            Assignment 4: Data abstraction
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../assignment4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ocaml_notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OCaml notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../partA_abstraction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part A: Abstraction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../partB_more_abstraction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part B: More abstraction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Part C: Algebraic expressions
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Part C: Algebraic expressions
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-simplification" class="md-nav__link">
    <span class="md-ellipsis">
      1. Simplification
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-differentiation" class="md-nav__link">
    <span class="md-ellipsis">
      2. Differentiation
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Midterm exam
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            Midterm exam
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../midterm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../midterm/ocaml_notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OCaml notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../midterm/partA_complexity/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part A: Complexity
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../midterm/partB_lists_hofs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part B: Lists and HOFs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../midterm/partC_data_structures/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part C: Data structures
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_7" >
        
          
          <label class="md-nav__link" for="__nav_4_7" id="__nav_4_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Assignment 5: Tags and objects
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_7">
            <span class="md-nav__icon md-icon"></span>
            Assignment 5: Tags and objects
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../5/assignment5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../5/ocaml_notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OCaml notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../5/partA_imperative/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part A: Imperative programming
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../5/partB_tagged_data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part B: Tagged data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../5/partC_objects/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part C: Objects
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8" >
        
          
          <label class="md-nav__link" for="__nav_4_8" id="__nav_4_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Assignment 6: Environmentally-friendly
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8">
            <span class="md-nav__icon md-icon"></span>
            Assignment 6: Environmentally-friendly
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6/assignment6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6/ocaml_notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OCaml notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6/partA_environment_model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part A: Environment model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6/partB_imperative_objects/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part B: Imperative objects and classes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6/partC_modules_functors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part C: Modules and functors
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6/partD_special_topics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part D: Special topics
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_9" >
        
          
          <label class="md-nav__link" for="__nav_4_9" id="__nav_4_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Assignment 7: Final exam preparation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_9">
            <span class="md-nav__icon md-icon"></span>
            Assignment 7: Final exam preparation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../7/assignment7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../7/ocaml_notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OCaml notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../7/klotski_game/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    The "Klotski" sliding-block puzzle game
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../7/partA_klotski_board/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part A: the Klotski module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../7/partB_search/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part B: the Search functor
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_10" >
        
          
          <label class="md-nav__link" for="__nav_4_10" id="__nav_4_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Final exam
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_10">
            <span class="md-nav__icon md-icon"></span>
            Final exam
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../final/final_exam/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../final/ocaml_notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OCaml notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../final/background/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Background information
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../final/partA_storage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part A: The Storage module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../final/partB_board/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part B: The Board module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../final/partC_search/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part C: The Search module
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Readings
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Readings
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../readings/ocaml_cheat_sheet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OCaml Cheat Sheet
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../readings/subst/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    The Substitution Model
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-simplification" class="md-nav__link">
    <span class="md-ellipsis">
      1. Simplification
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-differentiation" class="md-nav__link">
    <span class="md-ellipsis">
      2. Differentiation
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="part-c-miniproject-algebraic-expressions-20-points">Part C: Miniproject: Algebraic expressions (20 points)</h1>
<p>(Loosely "derived" from (SICP, exercise 2.56).)</p>
<p>One of the best things about OCaml
is how easy it is to express complicated data structures
using algebraic datatypes.
We will use this facility to represent algebraic expressions
(real algebra, like you learned in high school)
and perform interesting tasks on them.</p>
<p>We will use the type <code>expr</code> to represent algebraic expressions. Its
definition is:</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="k">type</span> <span class="n">expr</span> <span class="o">=</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>  <span class="o">|</span> <span class="nc">Int</span> <span class="k">of</span> <span class="kt">int</span>           <span class="c">(* constant *)</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>  <span class="o">|</span> <span class="nc">Var</span> <span class="k">of</span> <span class="kt">string</span>        <span class="c">(* variable *)</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>  <span class="o">|</span> <span class="nc">Add</span> <span class="k">of</span> <span class="n">expr</span> <span class="o">*</span> <span class="n">expr</span>   <span class="c">(* expr1 + expr2 *)</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>  <span class="o">|</span> <span class="nc">Mul</span> <span class="k">of</span> <span class="n">expr</span> <span class="o">*</span> <span class="n">expr</span>   <span class="c">(* expr1 * expr2 *)</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>  <span class="o">|</span> <span class="nc">Pow</span> <span class="k">of</span> <span class="n">expr</span> <span class="o">*</span> <span class="kt">int</span>    <span class="c">(* expr^n *)</span>
</span></code></pre></div>
<p>There is one non-structural constraint that we will impose on this type:
the exponent in a <code>Pow</code> expression must be a <em>non-negative</em> integer.</p>
<p>Clearly, expressions in this type
can't represent all possible algebraic expressions,
but they can represent a lot of cases of interest
(<em>e.g.</em> polynomials with arbitrary numbers of variables),
and it would be easy to extend this type
to deal with more complex kinds of algebraic expressions.</p>
<p>It's possible to write a parser
from algebraic expressions written in the usual mathematical notation
to this datatype,
but we won't do that here.
Instead,
we will directly use the datatype constructors to build our expressions
(we're not worrying about abstraction here either).
Some example expressions written in this form would be:</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="mi">42</span> <span class="o">--&gt;</span> <span class="nc">Int</span> <span class="mi">42</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="n">x</span> <span class="o">--&gt;</span> <span class="nc">Var</span> <span class="s2">&quot;x&quot;</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="n">x</span> <span class="o">*</span> <span class="n">y</span> <span class="o">--&gt;</span> <span class="nc">Mul</span> <span class="o">(</span><span class="nc">Var</span> <span class="s2">&quot;x&quot;</span><span class="o">,</span> <span class="nc">Var</span> <span class="s2">&quot;y&quot;</span><span class="o">)</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="o">(</span><span class="n">x</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)</span> <span class="o">*</span> <span class="o">(</span><span class="n">y</span> <span class="o">+</span> <span class="n">x</span><span class="o">)</span> <span class="o">--&gt;</span> <span class="nc">Mul</span> <span class="o">(</span><span class="nc">Add</span> <span class="o">(</span><span class="nc">Var</span> <span class="s2">&quot;x&quot;</span><span class="o">,</span> <span class="nc">Int</span> <span class="o">(-</span><span class="mi">1</span><span class="o">)),</span> <span class="nc">Add</span> <span class="o">(</span><span class="nc">Var</span> <span class="s2">&quot;y&quot;</span><span class="o">,</span> <span class="nc">Var</span> <span class="s2">&quot;x&quot;</span><span class="o">))</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="n">x</span><span class="o">**</span><span class="mi">3</span> <span class="o">+</span> <span class="mi">6</span><span class="o">*</span><span class="n">x</span><span class="o">*</span><span class="n">y</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">--&gt;</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>  <span class="nc">Add</span> <span class="o">(</span><span class="nc">Add</span> <span class="o">(</span><span class="nc">Pow</span> <span class="o">(</span><span class="nc">Var</span> <span class="s2">&quot;x&quot;</span><span class="o">,</span> <span class="mi">3</span><span class="o">),</span> <span class="nc">Mul</span> <span class="o">(</span><span class="nc">Int</span> <span class="mi">6</span><span class="o">,</span> <span class="nc">Mul</span> <span class="o">(</span><span class="nc">Var</span> <span class="s2">&quot;x&quot;</span><span class="o">,</span> <span class="nc">Var</span> <span class="s2">&quot;y&quot;</span><span class="o">))),</span> <span class="nc">Int</span> <span class="o">(-</span><span class="mi">1</span><span class="o">))</span>
</span></code></pre></div>
<p>Once we have an algebraic expression in this form,
we can do a number of interesting manipulations on it.
We will do two of these in this section.</p>
<h2 id="1-simplification">1. Simplification</h2>
<p>[<strong>10 points</strong>]</p>
<p>Many algebraic expressions can be converted
into equivalent but simpler algebraic expressions.
This process is called "simplifying" the algebraic expression.
Simplification is a difficult problem in general,
because there can be many mutually-exclusive definitions
of what "simpler" means.
However, some simplifications are universally agreed upon.
For instance:</p>
<ul>
<li>
<p>An expression which adds two integers
can be replaced by a single integer (the sum of the two integers).</p>
</li>
<li>
<p>An expression which multiplies two integers
can be replaced by a single integer (the product of the two integers).</p>
</li>
<li>
<p>An expression which takes an integer to the power of another integer
can be replaced by a single integer (the power of the two integers).</p>
</li>
<li>
<p>An expression which adds zero to another expression E
is just the expression E.</p>
</li>
<li>
<p>An expression which multiplies an expression E by 0 is just 0.</p>
</li>
<li>
<p>An expression which multiplies an expression E by 1 is just E.</p>
</li>
<li>
<p>An expression which raises an expression E to the power of 0
is just 1 (we are ignoring the tricky case of 0 to the power of 0 here).</p>
</li>
<li>
<p>An expression which raises an expression E to the power of 1
is just E.</p>
</li>
</ul>
<p>Write a function called <code>simplify1</code>
which does all of these simplifications
on an algebraic expression represented as a value of the type <code>expr</code>.
Make sure that you consider the cases where <em>e.g.</em>
0 is added to an expression from the left or from the right,
and similarly for other simplifications.
Also, if an expression can't itself be simplified,
try to recursively simplify its subexpressions.
(If you <em>can</em> simplify an expression,
do that and stop; don't recurse on the subexpressions.)</p>
<p>One thing that makes simplification difficult
is that simplifying an expression
can yield another expression which can itself be simplified.
One way to handle this
is to repeat the simplification process
until no more simplifications can be performed.
We are providing you with the following function <code>simplify</code>
which will call your <code>simplify1</code> function to simplify an expression
until no more of the simplifications described above are possible:</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="k">let</span> <span class="k">rec</span> <span class="n">simplify</span> <span class="n">expr</span> <span class="o">=</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>  <span class="k">let</span> <span class="n">e</span> <span class="o">=</span> <span class="n">simplify1</span> <span class="n">expr</span> <span class="k">in</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>    <span class="k">if</span> <span class="n">expr</span> <span class="o">=</span> <span class="n">e</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>      <span class="k">then</span> <span class="n">expr</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>      <span class="k">else</span> <span class="n">simplify</span> <span class="n">e</span>
</span></code></pre></div>
<p>Technically,
we say that <code>simplify</code> computes the <em>fixpoint</em> of <code>simplify1</code>.
This makes the definition of <code>simplify1</code> simpler.
For instance, if you simplify <code>E + 0</code> to just <code>E</code>,
you don't then have to recurse on <code>E</code> in the <code>simplify1</code> function,
because the expression <code>E</code>
will be simplified again by the <code>simplify</code> function
until it can't be simplified any more.
On the other hand, if you have an expression <code>E + F</code>
which <em>can't</em> be simplified by any of the rules above,
you have to recursively simplify the parts (<code>E</code> and <code>F</code>),
because if you don't,
calling <code>simplify1</code> on this expression again won't do anything.</p>
<p>Here are some expressions to test your simplifier.
These represent the results after <code>simplify</code> has been called
(not just <code>simplify1</code>).</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nc">Int</span> <span class="mi">42</span> <span class="o">--&gt;</span> <span class="nc">Int</span> <span class="mi">42</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="nc">Var</span> <span class="s2">&quot;x&quot;</span> <span class="o">--&gt;</span> <span class="nc">Var</span> <span class="s2">&quot;x&quot;</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="nc">Add</span> <span class="o">(</span><span class="nc">Int</span> <span class="mi">32</span><span class="o">,</span> <span class="nc">Int</span> <span class="mi">41</span><span class="o">)</span> <span class="o">--&gt;</span> <span class="nc">Int</span> <span class="mi">73</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="nc">Add</span> <span class="o">(</span><span class="nc">Add</span> <span class="o">(</span><span class="nc">Int</span> <span class="mi">1</span><span class="o">,</span> <span class="nc">Int</span> <span class="mi">2</span><span class="o">),</span> <span class="nc">Add</span> <span class="o">(</span><span class="nc">Int</span> <span class="mi">3</span><span class="o">,</span> <span class="nc">Int</span> <span class="mi">4</span><span class="o">))</span> <span class="o">--&gt;</span> <span class="nc">Int</span> <span class="mi">10</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="nc">Add</span> <span class="o">(</span><span class="nc">Mul</span> <span class="o">(</span><span class="nc">Int</span> <span class="mi">1</span><span class="o">,</span> <span class="nc">Int</span> <span class="mi">2</span><span class="o">),</span> <span class="nc">Mul</span> <span class="o">(</span><span class="nc">Int</span> <span class="mi">3</span><span class="o">,</span> <span class="nc">Int</span> <span class="mi">4</span><span class="o">))</span> <span class="o">--&gt;</span> <span class="nc">Int</span> <span class="mi">14</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="nc">Mul</span> <span class="o">(</span><span class="nc">Mul</span> <span class="o">(</span><span class="nc">Int</span> <span class="mi">1</span><span class="o">,</span> <span class="nc">Int</span> <span class="mi">2</span><span class="o">),</span> <span class="nc">Mul</span> <span class="o">(</span><span class="nc">Int</span> <span class="mi">3</span><span class="o">,</span> <span class="nc">Int</span> <span class="mi">4</span><span class="o">))</span> <span class="o">--&gt;</span> <span class="nc">Int</span> <span class="mi">24</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="nc">Mul</span> <span class="o">(</span><span class="nc">Add</span> <span class="o">(</span><span class="nc">Int</span> <span class="mi">1</span><span class="o">,</span> <span class="nc">Int</span> <span class="mi">2</span><span class="o">),</span> <span class="nc">Mul</span> <span class="o">(</span><span class="nc">Int</span> <span class="mi">3</span><span class="o">,</span> <span class="nc">Int</span> <span class="mi">4</span><span class="o">))</span> <span class="o">--&gt;</span> <span class="nc">Int</span> <span class="mi">36</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="nc">Pow</span> <span class="o">(</span><span class="nc">Int</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span> <span class="o">--&gt;</span> <span class="nc">Int</span> <span class="mi">1</span>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="nc">Pow</span> <span class="o">(</span><span class="nc">Int</span> <span class="mi">10</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span> <span class="o">--&gt;</span> <span class="nc">Int</span> <span class="mi">100</span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="nc">Pow</span> <span class="o">(</span><span class="nc">Add</span> <span class="o">(</span><span class="nc">Int</span> <span class="mi">1</span><span class="o">,</span> <span class="nc">Int</span> <span class="mi">2</span><span class="o">),</span> <span class="mi">2</span><span class="o">)</span> <span class="o">--&gt;</span> <span class="nc">Int</span> <span class="mi">9</span>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="nc">Add</span> <span class="o">(</span><span class="nc">Var</span> <span class="s2">&quot;x&quot;</span><span class="o">,</span> <span class="nc">Int</span> <span class="mi">0</span><span class="o">)</span> <span class="o">--&gt;</span> <span class="nc">Var</span> <span class="s2">&quot;x&quot;</span>
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="nc">Add</span> <span class="o">(</span><span class="nc">Int</span> <span class="mi">0</span><span class="o">,</span> <span class="nc">Var</span> <span class="s2">&quot;x&quot;</span><span class="o">)</span> <span class="o">--&gt;</span> <span class="nc">Var</span> <span class="s2">&quot;x&quot;</span>
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="nc">Mul</span> <span class="o">(</span><span class="nc">Int</span> <span class="mi">0</span><span class="o">,</span> <span class="nc">Var</span> <span class="s2">&quot;y&quot;</span><span class="o">)</span> <span class="o">--&gt;</span> <span class="nc">Int</span> <span class="mi">0</span>
</span><span id="__span-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="nc">Mul</span> <span class="o">(</span><span class="nc">Var</span> <span class="s2">&quot;y&quot;</span><span class="o">,</span> <span class="nc">Int</span> <span class="mi">0</span><span class="o">)</span> <span class="o">--&gt;</span> <span class="nc">Int</span> <span class="mi">0</span>
</span><span id="__span-3-16"><a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a><span class="nc">Mul</span> <span class="o">(</span><span class="nc">Int</span> <span class="mi">1</span><span class="o">,</span> <span class="nc">Var</span> <span class="s2">&quot;z&quot;</span><span class="o">)</span> <span class="o">--&gt;</span> <span class="nc">Var</span> <span class="s2">&quot;z&quot;</span>
</span><span id="__span-3-17"><a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a><span class="nc">Mul</span> <span class="o">(</span><span class="nc">Var</span> <span class="s2">&quot;z&quot;</span><span class="o">,</span> <span class="nc">Int</span> <span class="mi">1</span><span class="o">)</span> <span class="o">--&gt;</span> <span class="nc">Var</span> <span class="s2">&quot;z&quot;</span>
</span><span id="__span-3-18"><a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a><span class="nc">Pow</span> <span class="o">(</span><span class="nc">Var</span> <span class="s2">&quot;x&quot;</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span> <span class="o">--&gt;</span> <span class="nc">Int</span> <span class="mi">1</span>
</span><span id="__span-3-19"><a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a><span class="nc">Pow</span> <span class="o">(</span><span class="nc">Var</span> <span class="s2">&quot;x&quot;</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="o">--&gt;</span> <span class="nc">Var</span> <span class="s2">&quot;x&quot;</span>
</span><span id="__span-3-20"><a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a>
</span><span id="__span-3-21"><a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a><span class="nc">Pow</span> <span class="o">(</span><span class="nc">Add</span> <span class="o">(</span><span class="nc">Var</span> <span class="s2">&quot;x&quot;</span><span class="o">,</span> <span class="nc">Int</span> <span class="mi">0</span><span class="o">),</span> <span class="mi">1</span><span class="o">)</span> <span class="o">--&gt;</span> <span class="nc">Var</span> <span class="s2">&quot;x&quot;</span>
</span><span id="__span-3-22"><a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a><span class="nc">Add</span> <span class="o">(</span><span class="nc">Add</span> <span class="o">(</span><span class="nc">Var</span> <span class="s2">&quot;x&quot;</span><span class="o">,</span> <span class="nc">Int</span> <span class="mi">0</span><span class="o">),</span> <span class="nc">Mul</span> <span class="o">(</span><span class="nc">Var</span> <span class="s2">&quot;y&quot;</span><span class="o">,</span> <span class="nc">Int</span> <span class="mi">0</span><span class="o">))</span> <span class="o">--&gt;</span> <span class="nc">Var</span> <span class="s2">&quot;x&quot;</span>
</span></code></pre></div>
<h2 id="2-differentiation">2. Differentiation</h2>
<p>[<strong>10 points</strong>]</p>
<p>Another fun thing you can do
with algebraic expressions represented programmatically
is to symbolically differentiate them
(<em>i.e.</em> compute their derivatives with respect to some variable).
Specifically, you need to implement the following differentiation rules:</p>
<ol>
<li>
<p>Differentiating any constant gives zero.</p>
</li>
<li>
<p>Differentiating a variable by the same variable gives 1;
for a different variable it gives zero.</p>
</li>
<li>
<p>Differentiating a sum by a variable is done by
differentiating the components of the sum separately and then adding them up.</p>
</li>
<li>
<p>Differentiating a product by a variable uses the
<a href="https://en.wikipedia.org/wiki/Product_rule">product rule</a>:
the derivative of <span class="arithmatex">\(e_1 \times e_2\)</span> by <span class="arithmatex">\(x\)</span> is
<span class="arithmatex">\(\frac{d}{dx} e_1 \times e_2 + e_1 \times \frac{d}{dx} e_2\)</span>.</p>
</li>
<li>
<p>Differentiating an expression
raised to a (positive) integer power uses the
<a href="https://en.wikipedia.org/wiki/Power_rule">power rule</a>:
the derivative of <span class="arithmatex">\(e^n\)</span> by <span class="arithmatex">\(x\)</span> is
<span class="arithmatex">\(n \times e^{n-1} \times \frac{d}{dx} e\)</span>.</p>
</li>
</ol>
<p>Write a function called <code>deriv</code> which implements all of these rules.
It's beneficial if the expression to be differentiated
is simplified before and after computing the derivative,
so use this wrapper function when testing your function:</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="k">let</span> <span class="n">derivative</span> <span class="n">var</span> <span class="n">expr</span> <span class="o">=</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>  <span class="k">let</span> <span class="n">e</span> <span class="o">=</span> <span class="n">simplify</span> <span class="n">expr</span> <span class="k">in</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>  <span class="k">let</span> <span class="n">d</span> <span class="o">=</span> <span class="n">deriv</span> <span class="n">var</span> <span class="n">e</span> <span class="k">in</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>    <span class="n">simplify</span> <span class="n">d</span>
</span></code></pre></div>
<div class="admonition examples">
<p class="admonition-title">Examples</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="n">derivative</span> <span class="s2">&quot;x&quot;</span> <span class="o">(</span><span class="nc">Int</span> <span class="mi">10</span><span class="o">)</span> <span class="o">--&gt;</span> <span class="nc">Int</span> <span class="mi">0</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="n">derivative</span> <span class="s2">&quot;x&quot;</span> <span class="o">(</span><span class="nc">Var</span> <span class="s2">&quot;x&quot;</span><span class="o">)</span> <span class="o">--&gt;</span> <span class="nc">Int</span> <span class="mi">1</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="n">derivative</span> <span class="s2">&quot;x&quot;</span> <span class="o">(</span><span class="nc">Var</span> <span class="s2">&quot;y&quot;</span><span class="o">)</span> <span class="o">--&gt;</span> <span class="nc">Int</span> <span class="mi">0</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="n">derivative</span> <span class="s2">&quot;x&quot;</span> <span class="o">(</span><span class="nc">Add</span> <span class="o">(</span><span class="nc">Var</span> <span class="s2">&quot;x&quot;</span><span class="o">,</span> <span class="nc">Var</span> <span class="s2">&quot;x&quot;</span><span class="o">))</span> <span class="o">--&gt;</span> <span class="nc">Int</span> <span class="mi">2</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="n">derivative</span> <span class="s2">&quot;x&quot;</span> <span class="o">(</span><span class="nc">Add</span> <span class="o">(</span><span class="nc">Add</span> <span class="o">(</span><span class="nc">Var</span> <span class="s2">&quot;x&quot;</span><span class="o">,</span> <span class="nc">Var</span> <span class="s2">&quot;x&quot;</span><span class="o">),</span> <span class="nc">Var</span> <span class="s2">&quot;x&quot;</span><span class="o">))</span> <span class="o">--&gt;</span> <span class="nc">Int</span> <span class="mi">3</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="n">derivative</span> <span class="s2">&quot;x&quot;</span> <span class="o">(</span><span class="nc">Mul</span> <span class="o">(</span><span class="nc">Var</span> <span class="s2">&quot;x&quot;</span><span class="o">,</span> <span class="nc">Int</span> <span class="mi">42</span><span class="o">))</span> <span class="o">--&gt;</span> <span class="nc">Int</span> <span class="mi">42</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="n">derivative</span> <span class="s2">&quot;x&quot;</span> <span class="o">(</span><span class="nc">Mul</span> <span class="o">(</span><span class="nc">Var</span> <span class="s2">&quot;x&quot;</span><span class="o">,</span> <span class="nc">Var</span> <span class="s2">&quot;y&quot;</span><span class="o">))</span> <span class="o">--&gt;</span> <span class="nc">Var</span> <span class="s2">&quot;y&quot;</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="n">derivative</span> <span class="s2">&quot;z&quot;</span> <span class="o">(</span><span class="nc">Mul</span> <span class="o">(</span><span class="nc">Var</span> <span class="s2">&quot;x&quot;</span><span class="o">,</span> <span class="nc">Var</span> <span class="s2">&quot;y&quot;</span><span class="o">))</span> <span class="o">--&gt;</span> <span class="nc">Int</span> <span class="mi">0</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="n">derivative</span> <span class="s2">&quot;x&quot;</span> <span class="o">(</span><span class="nc">Mul</span> <span class="o">(</span><span class="nc">Pow</span> <span class="o">(</span><span class="nc">Var</span> <span class="s2">&quot;x&quot;</span><span class="o">,</span> <span class="mi">2</span><span class="o">),</span> <span class="nc">Mul</span> <span class="o">(</span><span class="nc">Int</span> <span class="mi">3</span><span class="o">,</span> <span class="nc">Var</span> <span class="s2">&quot;x&quot;</span><span class="o">)))</span> <span class="o">--&gt;</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>           <span class="nc">Add</span> <span class="o">(</span><span class="nc">Mul</span> <span class="o">(</span><span class="nc">Mul</span> <span class="o">(</span><span class="nc">Int</span> <span class="mi">2</span><span class="o">,</span> <span class="nc">Var</span> <span class="s2">&quot;x&quot;</span><span class="o">),</span> <span class="nc">Mul</span> <span class="o">(</span><span class="nc">Int</span> <span class="mi">3</span><span class="o">,</span> <span class="nc">Var</span> <span class="s2">&quot;x&quot;</span><span class="o">)),</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>                <span class="nc">Mul</span> <span class="o">(</span><span class="nc">Pow</span> <span class="o">(</span><span class="nc">Var</span> <span class="s2">&quot;x&quot;</span><span class="o">,</span> <span class="mi">2</span><span class="o">),</span> <span class="nc">Int</span> <span class="mi">3</span><span class="o">))</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="n">derivative</span> <span class="s2">&quot;x&quot;</span> <span class="o">(</span><span class="nc">Pow</span> <span class="o">(</span><span class="nc">Var</span> <span class="s2">&quot;y&quot;</span><span class="o">,</span> <span class="mi">1</span><span class="o">))</span> <span class="o">--&gt;</span> <span class="nc">Int</span> <span class="mi">0</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="n">derivative</span> <span class="s2">&quot;x&quot;</span> <span class="o">(</span><span class="nc">Pow</span> <span class="o">(</span><span class="nc">Var</span> <span class="s2">&quot;x&quot;</span><span class="o">,</span> <span class="mi">1</span><span class="o">))</span> <span class="o">--&gt;</span> <span class="nc">Int</span> <span class="mi">1</span>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="n">derivative</span> <span class="s2">&quot;x&quot;</span> <span class="o">(</span><span class="nc">Pow</span> <span class="o">(</span><span class="nc">Var</span> <span class="s2">&quot;x&quot;</span><span class="o">,</span> <span class="mi">2</span><span class="o">))</span> <span class="o">--&gt;</span> <span class="nc">Mul</span> <span class="o">((</span><span class="nc">Int</span> <span class="mi">2</span><span class="o">),</span> <span class="o">(</span><span class="nc">Var</span> <span class="s2">&quot;x&quot;</span><span class="o">))</span>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="n">derivative</span> <span class="s2">&quot;x&quot;</span> <span class="o">(</span><span class="nc">Pow</span> <span class="o">(</span><span class="nc">Mul</span> <span class="o">(</span><span class="nc">Int</span> <span class="mi">3</span><span class="o">,</span> <span class="nc">Var</span> <span class="s2">&quot;x&quot;</span><span class="o">),</span> <span class="mi">3</span><span class="o">))</span> <span class="o">--&gt;</span>
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a>           <span class="nc">Mul</span>
</span><span id="__span-5-17"><a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a>            <span class="o">(</span><span class="nc">Mul</span>
</span><span id="__span-5-18"><a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a>              <span class="o">(</span><span class="nc">Int</span> <span class="mi">3</span><span class="o">,</span>
</span><span id="__span-5-19"><a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a>                <span class="nc">Pow</span> <span class="o">(</span><span class="nc">Mul</span> <span class="o">(</span><span class="nc">Int</span> <span class="mi">3</span><span class="o">,</span> <span class="nc">Var</span> <span class="s2">&quot;x&quot;</span><span class="o">),</span> <span class="mi">2</span><span class="o">)),</span>
</span><span id="__span-5-20"><a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a>              <span class="nc">Int</span> <span class="mi">3</span><span class="o">)</span>
</span><span id="__span-5-21"><a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a><span class="n">derivative</span> <span class="s2">&quot;x&quot;</span> <span class="o">(</span><span class="nc">Add</span> <span class="o">(</span><span class="nc">Mul</span> <span class="o">(</span><span class="nc">Int</span> <span class="mi">4</span><span class="o">,</span> <span class="nc">Pow</span> <span class="o">(</span><span class="nc">Var</span> <span class="s2">&quot;x&quot;</span><span class="o">,</span> <span class="mi">3</span><span class="o">)),</span>
</span><span id="__span-5-22"><a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a>                     <span class="nc">Mul</span> <span class="o">(</span><span class="nc">Int</span> <span class="mi">6</span><span class="o">,</span> <span class="nc">Pow</span> <span class="o">(</span><span class="nc">Var</span> <span class="s2">&quot;x&quot;</span><span class="o">,</span> <span class="mi">2</span><span class="o">))))</span> <span class="o">--&gt;</span>
</span><span id="__span-5-23"><a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a>           <span class="nc">Add</span> <span class="o">(</span><span class="nc">Mul</span> <span class="o">(</span><span class="nc">Int</span> <span class="mi">4</span><span class="o">,</span> <span class="nc">Mul</span> <span class="o">(</span><span class="nc">Int</span> <span class="mi">3</span><span class="o">,</span> <span class="nc">Pow</span> <span class="o">(</span><span class="nc">Var</span> <span class="s2">&quot;x&quot;</span><span class="o">,</span> <span class="mi">2</span><span class="o">))),</span>
</span><span id="__span-5-24"><a id="__codelineno-5-24" name="__codelineno-5-24" href="#__codelineno-5-24"></a>                <span class="nc">Mul</span> <span class="o">(</span><span class="nc">Int</span> <span class="mi">6</span><span class="o">,</span> <span class="nc">Mul</span> <span class="o">(</span><span class="nc">Int</span> <span class="mi">2</span><span class="o">,</span> <span class="nc">Var</span> <span class="s2">&quot;x&quot;</span><span class="o">)))</span>
</span></code></pre></div>
</div>
<p>If your code produces these results,
but with some of the terms rearranged
(<em>e.g.</em> <code>Mul (Var "x", Int 2)</code> instead of <code>Mul (Int 2, Var "x")</code>,
we'll accept it.
However, the results should be equivalent.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The test script may fail on correct answers in this case;
don't assume that there is a bug!
Instead, try the failing examples interactively
and see if your result is reasonable.</p>
<p>You can also try to rewrite your code
to make the tests pass, but even if you don't,
as long as your results are <em>mathematically</em> correct,
you won't lose points.</p>
</div>
<p>Our solution is less than ten lines long.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../partB_more_abstraction/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Part B: More abstraction">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Part B: More abstraction
              </div>
            </div>
          </a>
        
        
          
          <a href="../../midterm/" class="md-footer__link md-footer__link--next" aria-label="Next: Overview">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Overview
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy", "navigation.footer", "navigation.top"], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
        <script src="../../../js/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>