
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://mvanier.github.io/cs4/Winter2026/book/assignments/midterm/partC_data_structures/">
      
      
        <link rel="prev" href="../partB_lists_hofs/">
      
      
        <link rel="next" href="../../../readings/ocaml_cheat_sheet/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Part C: Data structures - The CS 4 book (Winter 2026)</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#part-c-data-structures-avl-trees-40-points" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="The CS 4 book (Winter 2026)" class="md-header__button md-logo" aria-label="The CS 4 book (Winter 2026)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            The CS 4 book (Winter 2026)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Part C: Data structures
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to medium mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to medium mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="medium" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18V6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-2.69L23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="The CS 4 book (Winter 2026)" class="md-nav__button md-logo" aria-label="The CS 4 book (Winter 2026)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    The CS 4 book (Winter 2026)
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Introduction
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../intro/welcome/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Welcome to CS 4!
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../intro/motivation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Motivation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Administrative
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Administrative
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../admin/syllabus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Syllabus
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../admin/collab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Collaboration policies
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Assignments
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Assignments
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../0/assignment0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Assignment 0: Setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Assignment 1: Evaluation and recursion
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Assignment 1: Evaluation and recursion
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1/assignment1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1/ocaml_notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OCaml notes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1/partA_exercises/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part A: Exercises
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1/partB_evaluation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part B: Evaluation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1/partC_recursion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part C: Recursion
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Assignment 2: Complexity and HOFs
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Assignment 2: Complexity and HOFs
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2/assignment2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2/ocaml_notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OCaml notes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2/partA_orders_of_growth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part A: Orders of growth
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2/partB_evaluation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part B: Evaluation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2/partC_higher_order_functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part C: Higher-order functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2/partD_additional_problems/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part D: Additional problems
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Assignment 3: Lists
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Assignment 3: Lists
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3/assignment3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3/ocaml_notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OCaml notes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3/partA_lists/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part A: Working with lists
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3/partB_structural_generative_recursion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part B: Structural and Generative Recursion
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3/partC_more_lists/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part C: Some harder problems with lists
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Assignment 4: Data abstraction
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Assignment 4: Data abstraction
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../4/assignment4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../4/ocaml_notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OCaml notes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../4/partA_abstraction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part A: Abstraction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../4/partB_more_abstraction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part B: More abstraction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../4/partC_algebra/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part C: Algebraic expressions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" checked>
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Midterm exam
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Midterm exam
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ocaml_notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OCaml notes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../partA_complexity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part A: Complexity
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../partB_lists_hofs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part B: Lists and HOFs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Part C: Data structures
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Part C: Data structures
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      
        Introduction
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Examples
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tree-rotations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tree rotations
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inserting-into-an-avl-tree" class="md-nav__link">
    <span class="md-ellipsis">
      
        Inserting into an AVL tree
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ocaml-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      
        OCaml implementation
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions-to-write" class="md-nav__link">
    <span class="md-ellipsis">
      
        Functions to write
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions to write">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-search-4-points" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. search &nbsp; [4 points]
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-left_rotate-and-right_rotate-16-points" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. left_rotate and right_rotate &nbsp; [16 points]
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. left_rotate and right_rotate   [16 points]">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#examples_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Examples
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-insert-20-points" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. insert &nbsp; [20 points]
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visualizing-your-trees" class="md-nav__link">
    <span class="md-ellipsis">
      
        Visualizing your trees
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Readings
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Readings
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../readings/ocaml_cheat_sheet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OCaml Cheat Sheet
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../readings/subst/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    The Substitution Model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      
        Introduction
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Examples
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tree-rotations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tree rotations
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inserting-into-an-avl-tree" class="md-nav__link">
    <span class="md-ellipsis">
      
        Inserting into an AVL tree
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ocaml-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      
        OCaml implementation
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions-to-write" class="md-nav__link">
    <span class="md-ellipsis">
      
        Functions to write
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions to write">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-search-4-points" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. search &nbsp; [4 points]
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-left_rotate-and-right_rotate-16-points" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. left_rotate and right_rotate &nbsp; [16 points]
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. left_rotate and right_rotate   [16 points]">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#examples_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Examples
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-insert-20-points" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. insert &nbsp; [20 points]
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visualizing-your-trees" class="md-nav__link">
    <span class="md-ellipsis">
      
        Visualizing your trees
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="part-c-data-structures-avl-trees-40-points">Part C: Data structures: AVL trees (40 points)</h1>
<h2 id="introduction">Introduction</h2>
<p>In this section, we are going to implement a non-trivial data structure called
an "AVL tree".  The name "AVL" comes from the inventors of the data structure,
the Russian computer scientists G. M. Adelson-Velsky (AV) and E. M. Landis (L),
who published a paper on it in 1962.  An AVL tree is technically a
"self-balancing binary search tree", and it was the first such data structure
to be invented.  Others, such as red-black trees, 2-3 trees, B-trees, <em>etc.</em>
came along later.</p>
<p>Before we get into the details of this data structure, let's explain why such a
thing is desirable.  Many practical applications of interest require set-like
or map-like collections of values which have (at least!) the following
requirements:</p>
<ul>
<li>
<p>You have to be able to find a particular value in the collection as quickly as
possible (or report that it isn't there).</p>
</li>
<li>
<p>You have to be able to add a new value to the collection as quickly as
possible.</p>
</li>
<li>
<p>The collection mustn't duplicate the values searched over.</p>
</li>
</ul>
<p>The difference between a set and a map is that sets are just the values in the
collection, while maps have an associated value for each "key" value in the
map.  Our AVL trees will implement sets of integers, which is about as simple
as it gets.</p>
<p>If we didn't care about efficiency, we could easily implement a set of integers
using a list of integers.  To find whether a particular integer is in the set,
we just have to search through the list.  This is a <span class="arithmatex">\(\Theta(N)\)</span> operation,
where <span class="arithmatex">\(N\)</span> is the length of the list, so it's rather slow.  To add a value to
the list (making sure there are no duplicates), we can just search for the
value in the list; if it's found, there is no need to add it, and if not, we
can add it to the front of the list.  This is also <span class="arithmatex">\(\Theta(N)\)</span> .  (If we don't
mind repeated elements, we can just add it to the front of the list without
searching, which is <span class="arithmatex">\(\Theta(1)\)</span>.)</p>
<p>Somewhere along the line, someone realized that if we arranged the data in a
binary tree-like data structure, we can potentially get much faster searches
(<span class="arithmatex">\(\Theta(log\ N)\)</span> instead of <span class="arithmatex">\(\Theta(N)\)</span>) and also get <span class="arithmatex">\(\Theta(log\ N)\)</span>
insertions.  To do this, we create nodes containing three things: a data value,
a left subtree, and a right subtree.  A subtree can be a leaf (no data) or
another node.  In OCaml, such a data structure would look like this:</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c">(* Assume we are storing only integers in the tree. *)</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="k">type</span> <span class="n">tree</span> <span class="o">=</span> 
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>  <span class="o">|</span> <span class="nc">Leaf</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>  <span class="o">|</span> <span class="nc">Node</span> <span class="k">of</span> <span class="kt">int</span> <span class="o">*</span> <span class="n">tree</span> <span class="o">*</span> <span class="n">tree</span>   <span class="c">(* data value, left subtree, right subtree *)</span>
</span></code></pre></div>
<p>We further stipulate that all the values in the left subtree of a node are
strictly less than the value at the node, and all the values in the right
subtree are strictly greater than the value at the node (this makes the tree an
<em>ordered binary tree</em>).  Clearly, this will only work if the values stored in
the tree are orderable (like integers).  This also implies that the tree has no
duplicate values.</p>
<p>Searching through a tree like this is easy (you'll write the code below).
Insertion is also easy: you simply walk down the tree until you reach a leaf
where the new value ought to go, and then replace the leaf with a node whose
two subtrees are leaves.  If the tree is roughly balanced (the left and right
subtrees of all nodes are about the same size), then looking up a value in the
tree or inserting a value into the tree is <span class="arithmatex">\(\Theta(log\ N)\)</span>, where N is the
number of values stored in the tree.  That's because on average, going to a
left or right subtree of a node gets rid of about half of the values in the
tree, and after <span class="arithmatex">\(log_2(N)\)</span> divisions by two you will end up at a leaf.</p>
<p>Unfortunately, if you insert elements into the tree naively (<em>i.e.</em> according
to the simple rule given above), you can easily end up with an unbalanced tree,
where some branches of the tree are empty and others have large numbers of
nodes.  In the worst case, the tree will only have nodes on one side (left or
right) and then it's no better than a linked list. There needs to be some way
to make sure that the tree stays balanced when you add new values to it.  If
you can guarantee that the tree stays balanced, you can guarantee that
searching for values in the tree and adding new values to the tree are
<span class="arithmatex">\(\Theta(log\ N)\)</span> operations, which is acceptably fast for many applications.</p>
<p>The idea that Adelson-Velsky and Landis had was to store additional data in
each node representing the "depth" of the tree.  The depth of the tree is
defined as follows: </p>
<div class="admonition note">
<p class="admonition-title">AVL tree depth</p>
<ul>
<li>A leaf has depth 0.</li>
<li>A node has depth one more than the maximum depth of its subtrees
  (left and right).</li>
</ul>
</div>
<p>In addtion, they specified that an AVL tree has to obey a particular rule (also
known as an <em>invariant</em>):</p>
<div class="admonition note">
<p class="admonition-title">AVL tree invariant</p>
<p>Every node's subtrees' depths must differ by no more than 1.  </p>
</div>
<p>So if a particular node has a left subtree with depth 3 and a right
subtree with depth 2, 3, or 4, it's OK, but a smaller or larger depth in the
right subtree is not allowed, because that would mean that the tree was
unbalanced.  The way that AVL trees preserve balance when adding new values is
to first add the new value naively and then rebalance the tree (if
necessary) by doing "rotations" on parts of the tree. These rotations move the
tree nodes around in particular ways so as to make sure that the tree is
balanced and is still an ordered binary tree.</p>
<p>OK, so let's look at the actual definition of the AVL tree:</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="k">type</span> <span class="n">tree</span> <span class="o">=</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>  <span class="o">|</span> <span class="nc">Leaf</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>  <span class="o">|</span> <span class="nc">Node</span> <span class="k">of</span> <span class="kt">int</span> <span class="o">*</span> <span class="kt">int</span> <span class="o">*</span> <span class="n">tree</span> <span class="o">*</span> <span class="n">tree</span>   <span class="c">(* depth, value, left/right subtrees *)</span>
</span></code></pre></div>
<p>This is the same as the definition given above, except that there is an extra
<code>int</code> value stored at each node representing the depth of the node.  Note that
the first <code>int</code> value in the node is the depth and the second one is the
integer value being stored at the node. <strong>(Don't confuse them!)</strong> After that
comes the left and right subtrees of the node, which can be <code>Leaf</code> nodes or
not.</p>
<p>To reiterate what we said informally above: an AVL tree must satisfy the
following conditions:</p>
<ol>
<li>
<p>A node's value must be strictly larger than any value stored in its left
subtree and strictly smaller than any value stored in its right subtree. (This
is the order invariant.)  This also implies that the tree contains no duplicate
values.</p>
</li>
<li>
<p>The depth of a <code>Leaf</code> is zero, while the depth of a <code>Node</code> is one more than
the maximum of the depths of its left and right subtree.</p>
</li>
<li>
<p>The depth of a <code>Node</code>'s left and right subtrees must differ by no more than 1.
(This is the balance invariant.)</p>
</li>
</ol>
<p>The AVL trees we will be working with are purely functional, so (for instance)
inserting an integer into a tree will yield a new tree instead of changing the
old one.</p>
<p>Note that the structure of the tree is defined by the <code>tree</code> algebraic
datatype, but the invariants (order and balance) are not structural, so they
have to be maintained by the functions that act on the tree.  OCaml's algebraic
datatypes are great, but they can't do everything you might want them to do!
This is where <em>you</em> come in.</p>
<h2 id="examples">Examples</h2>
<p>Let's look at some AVL trees.  We'll insert the integers 1 through 10 into an
empty AVL tree and see what the resulting trees look like.  In some cases,
inserting a number into a tree in a naive way would result in an unbalanced
tree; in that case, we will look at the tree before and after balancing, so you
can get an idea of what the balancing operation does before we describe the
code you will need to write.</p>
<p><img alt="" src="../images/test_0.svg" width="50" /></p>
<p>This is a leaf node.  It doesn't store any data. It has depth 0.  There's not
much else to say about it.</p>
<p><img alt="" src="../images/test_1.svg" width="150" /></p>
<p>Adding the integer <code>1</code> creates a node whose two subtrees are both leaves. The
<code>1</code> is the value stored in the node.  The <code>(d1)</code> says that this node has depth
1, which should be obvious since a leaf has depth 0.</p>
<p><img alt="" src="../images/test_2.svg" width="200" /></p>
<p>Adding the integer <code>5</code> creates a new node on the right subtree of the node
containing <code>1</code>.  No rebalancing is needed.  Notice that the tree is not exactly
balanced (because the left subtree of the <code>1</code> node has depth 0 and the right
subtree has depth 1), but the depth difference is only 1, which is OK for an
AVL tree.</p>
<p><img alt="" src="../images/test_3_naive.svg" width="250" /></p>
<p>This image shows what happens when we naively add the number <code>9</code> to the tree.
It has to go to the right of the <code>1</code> node and the <code>5</code> node in order to maintain
the order invariant, but now the tree is unbalanced because the <code>1</code> node has a
left subtree of depth 0 and a right subtree of depth 2.  We need to rebalance
the tree.</p>
<p><img alt="" src="../images/test_3.svg" width="300" /></p>
<p>This is what happens after we have rebalanced the tree.  We have taken the <code>5</code>
node and "pulled it up" to the root of the tree, moving the <code>1</code> node to its
left subtree and keeping the <code>9</code> node as its right subtree.  The old left
subtree of the <code>5</code> node (which is just a leaf) becomes the new right subtree of
the <code>1</code> node.  Notice also that the <code>9</code> node doesn't change.</p>
<p>This kind of reshuffling is called a "tree rotation".  There are two different
kinds of rotations; this one is called a "left rotation".  We'll describe
rotations in detail below; right now we just want you to get a feel for what
they do.</p>
<p>The kind of unbalanced tree that is balanced by a single left rotation is
called a "right-right case", which is the case here.  "Right-right" means that,
starting from the first unbalanced node (the <code>1</code> node here), you go first to
the right (to the <code>5</code> node) and then again to the right (to the <code>9</code> node) to
get the nodes that participate in the rotation.  (There are three other cases,
called "left-left", "left-right", and "right-left".)</p>
<p><img alt="" src="../images/test_4.svg" width="350" /></p>
<p>Adding the number 4 doesn't make the tree unbalanced.</p>
<p><img alt="" src="../images/test_5.svg" width="400" /></p>
<p>Adding the number 8 also doesn't make the tree unbalanced.  Notice also that
the order invariant is still maintained, because 8 is to the right of 5 but to
the left of 9.</p>
<p><img alt="" src="../images/test_6_naive.svg" width="450" /></p>
<p>Adding the number 2 does make the tree unbalanced, so we need to do a rotation
on the first unbalanced node up from the <code>2</code> node, which is the <code>1</code> node (left
subtree: depth 0; right subtree; depth 2).</p>
<p>This kind of imbalance is called the "right-left case", since the imbalanced
nodes go down to the right from the <code>1</code> node (to get to the <code>4</code> node) and the
left to the <code>2</code> node.  To rebalance it we need to do <em>two</em> rotations: a right
rotation around the <code>4</code> node and then a left rotation around the <code>1</code> node.</p>
<p><img alt="" src="../images/test_6.svg" width="500" /></p>
<p>Here is what it looks like after the two rotations are complete.
(Don't worry if you don't understand how this happened;
we'll get into the details below.)</p>
<p><img alt="" src="../images/test_7.svg" width="500" /></p>
<p>Adding the number 3 doesn't make the tree unbalanced.</p>
<p><img alt="" src="../images/test_8_naive.svg" width="500" /></p>
<p>Adding the number 6 makes the tree unbalanced.  We need to balance around the
<code>9</code> node.  This is an example of a "left-left case", since the unbalanced nodes
start at the <code>9</code> node and go left and then left again.  A right rotation
balances it.</p>
<p><img alt="" src="../images/test_8.svg" width="550" /></p>
<p>Now it's balanced.</p>
<p><img alt="" src="../images/test_9.svg" width="600" /></p>
<p>Adding the number 7 doesn't unbalance the tree.</p>
<p><img alt="" src="../images/test_10.svg" width="650" /></p>
<p>Neither does adding the number 10.  That's all the insertions we're doing to
do.  We've seen all the cases except the "left-right" case which is a mirror
image of the "right-left" case.</p>
<h2 id="tree-rotations">Tree rotations</h2>
<p>In the examples given above, we've seen that there are a number of "rotations"
that are done to balance a tree.  In addition to balancing the tree, a rotation
also has to preserve the order invariant.  What kind of rotation you do depends
on the way in which the tree is unbalanced.  Each of the four cases requires a
different rotation or rotations to balance the tree:</p>
<ul>
<li>
<p>left-left case: a right rotation</p>
</li>
<li>
<p>left-right case: a left rotation on the left subtree and then a right rotation</p>
</li>
<li>
<p>right-left case: a right rotation on the right subtree and then a left rotation</p>
</li>
<li>
<p>right-right case: a left rotation</p>
</li>
</ul>
<p>When you do these rotations in each case, the tree will become balanced and the
order invariant will be preserved.  (We aren't going to prove that; we have to
leave <em>something</em> for CS 38!)</p>
<p>Here is what a left rotation looks like.  Starting from this:</p>
<p><img alt="" src="../images/left_rotation1.svg" width="500" /></p>
<p>We go to this:</p>
<p><img alt="" src="../images/left_rotation2.svg" width="500" /></p>
<p>Notice that the Y node gets pulled up to the root of the tree, and the X node
becomes its left child.  The previous left child of the Y node (T2) becomes the
right child of the X node.  T1, T2, and T3 are arbitrary balanced trees.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Before going further, you should convince yourself that this rotation
preserves the order invariant.</p>
</div>
<p>A right rotation is the inverse of a left rotation.  Starting from this:</p>
<p><img alt="" src="../images/right_rotation1.svg" width="500" /></p>
<p>We go to this:</p>
<p><img alt="" src="../images/right_rotation2.svg" width="500" /></p>
<p>This rotation also preserves the order invariant.</p>
<p>That's all we have to say about rotations!</p>
<h2 id="inserting-into-an-avl-tree">Inserting into an AVL tree</h2>
<p>With rotations, it's fairly easy to implement insertions into a tree so as to
keep the tree balanced.  Here is an outline of the algorithm.</p>
<ol>
<li>
<p>Insert the new value into the tree by following the branches based on
the value to be inserted and the values at the nodes. </p>
</li>
<li>
<p>If the new value is smaller than the node value,
   insert it into the left subtree,
   if it's larger, insert it into the right subtree,
   and if it's the same, then the new value is already in the tree
   so do nothing.</p>
</li>
<li>
<p>Once you get to a leaf, replace it with a new node with the new value
   and two leaves as children.</p>
</li>
</ol>
<p>This is the naive insertion algorithm. (We haven't balanced the tree yet.)</p>
<p>Of course, we want to do this functionally, so we aren't really replacing
anything; we are buliding up a new tree as we go along out of the parts of the
old tree.  Therefore, the "replacement" step is to put in a new node with the
new value in place of what was a leaf in the original tree; this new node has
leaves for children.</p>
<p>Now that we have the new value in the tree, we need to make sure that the tree
is balanced, and if not, we need to balance it.  The new node we just created
is obviously balanced (it has two leaves as children, both of which have depth
0), so we look at the parent of that node, and then the parent of that node,
and so on until we reach an unbalanced node or until we reach the root of the
tree.  If we find an unbalanced node, we figure out which case it is
(left-left, left-right, right-left, or right-right) and do the necessary
rotations for that case, which balances the tree.</p>
<p>That completes our description of AVL trees.  Now we have to implement this
in OCaml!</p>
<h2 id="ocaml-implementation">OCaml implementation</h2>
<p>Recall the definition of the <code>tree</code> type given above:</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="k">type</span> <span class="n">tree</span> <span class="o">=</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>  <span class="o">|</span> <span class="nc">Leaf</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>  <span class="o">|</span> <span class="nc">Node</span> <span class="k">of</span> <span class="kt">int</span> <span class="o">*</span> <span class="kt">int</span> <span class="o">*</span> <span class="n">tree</span> <span class="o">*</span> <span class="n">tree</span>   <span class="c">(* depth, value, left/right subtrees *)</span>
</span></code></pre></div>
<p>We will also find it useful to have a few helper functions.  Here they are:</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c">(* Depth of an AVL tree. *)</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="k">let</span> <span class="n">depth</span> <span class="o">=</span> <span class="k">function</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>  <span class="o">|</span> <span class="nc">Leaf</span> <span class="o">-&gt;</span> <span class="mi">0</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>  <span class="o">|</span> <span class="nc">Node</span> <span class="o">(</span><span class="n">d</span><span class="o">,</span> <span class="o">_,</span> <span class="o">_,</span> <span class="o">_)</span> <span class="o">-&gt;</span> <span class="n">d</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="c">(* Extract the data value from a node. *)</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="k">let</span> <span class="n">data</span> <span class="o">=</span> <span class="k">function</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>  <span class="o">|</span> <span class="nc">Leaf</span> <span class="o">-&gt;</span> <span class="n">failwith</span> <span class="s2">&quot;no data&quot;</span>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>  <span class="o">|</span> <span class="nc">Node</span> <span class="o">(_,</span> <span class="n">v</span><span class="o">,</span> <span class="o">_,</span> <span class="o">_)</span> <span class="o">-&gt;</span> <span class="n">v</span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="c">(* Create a new node from two subtrees and a data value.</span>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="c">   This assumes that the ordering invariant holds i.e.</span>
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="c">   that v is greater than any value in the left subtree</span>
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="c">   and is smaller than any value in the right subtree. *)</span>
</span><span id="__span-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="k">let</span> <span class="n">make_node</span> <span class="n">v</span> <span class="n">l</span> <span class="n">r</span> <span class="o">=</span> 
</span><span id="__span-3-16"><a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a>  <span class="k">let</span> <span class="n">d</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">max</span> <span class="o">(</span><span class="n">depth</span> <span class="n">l</span><span class="o">)</span> <span class="o">(</span><span class="n">depth</span> <span class="n">r</span><span class="o">)</span> <span class="k">in</span>  <span class="c">(* compute the correct depth *)</span>
</span><span id="__span-3-17"><a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>    <span class="nc">Node</span> <span class="o">(</span><span class="n">d</span><span class="o">,</span> <span class="n">v</span><span class="o">,</span> <span class="n">l</span><span class="o">,</span> <span class="n">r</span><span class="o">)</span>
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Notice that this forms a partial abstraction layer for our tree representation.
To complete the abstraction layer, we would need to have functions to get the
left and right subtrees of a node, and also to test if a node is a leaf or not.
We won't do this, because we want to be able to use the pattern-matching
facilities of OCaml to make our code more concise.</p>
</div>
<h2 id="functions-to-write">Functions to write</h2>
<p>Here are the functions we want you to write.</p>
<h3 id="1-search-4-points">1. <code>search</code> &nbsp; [<strong>4 points</strong>]</h3>
<p>Write a function called <code>search</code> that takes two arguments: an <code>int</code> and a
<code>tree</code>, and returns <code>true</code> if the <code>int</code> is present in the tree, or <code>false</code>
otherwise.</p>
<p><em>Note:</em> The depth of the trees don't matter for this function.</p>
<h3 id="2-left_rotate-and-right_rotate-16-points">2. <code>left_rotate</code> and <code>right_rotate</code> &nbsp; [<strong>16 points</strong>]</h3>
<p>Write two functions called <code>left_rotate</code> and <code>right_rotate</code> that do left or
right rotations as described above.  Note that not all trees can be left or
right-rotated; if you can't do the rotation use the <code>failwith</code> function to
signal an error along with the error message <code>"can't left rotate"</code> or <code>"can't
right rotate"</code>.</p>
<p>Both of these functions can be written in four lines of code each (three if
you don't mind having long lines).  You will want to use OCaml's
pattern-matching capabilities on <code>Node</code> constructors.  Remember that
pattern-matches on recursive datatypes can be more than one level.  For
instance, a pattern match on a <code>Node</code> constructor doesn't have to be just:</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>  <span class="o">...</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>  <span class="o">|</span> <span class="nc">Node</span> <span class="o">(</span><span class="n">d</span><span class="o">,</span> <span class="n">v</span><span class="o">,</span> <span class="n">left</span><span class="o">,</span> <span class="n">right</span><span class="o">)</span> <span class="o">-&gt;</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>  <span class="o">...</span>
</span></code></pre></div>
<p>If <code>left</code> and/or <code>right</code> are also <code>Node</code>s, you can put them right into the
pattern-match.  For instance:</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>  <span class="o">...</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>  <span class="o">|</span> <span class="nc">Node</span> <span class="o">(</span><span class="n">d</span><span class="o">,</span> <span class="n">v</span><span class="o">,</span> <span class="nc">Node</span> <span class="o">(</span><span class="n">d2</span><span class="o">,</span> <span class="n">v2</span><span class="o">,</span> <span class="n">ll</span><span class="o">,</span> <span class="n">lr</span><span class="o">),</span> <span class="nc">Node</span><span class="o">(</span><span class="n">d3</span><span class="o">,</span> <span class="n">v3</span><span class="o">,</span> <span class="n">rl</span><span class="o">,</span> <span class="n">rr</span><span class="o">))</span> <span class="o">-&gt;</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>  <span class="o">...</span>
</span></code></pre></div>
<p>If the subtrees are not <code>Node</code>s, the pattern won't match.  Of course, you
don't have to do this sort of thing, but it can shorten the code you need to
write.</p>
<p>You should also use the <code>make_node</code> helper function to create new nodes from a
value and two subtrees; this guarantees that the depth field of the new nodes
are set correctly.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Having an abstraction layer (calling <code>make_node</code> to make a node instead of just
using the <code>Node</code> constructor) is a real benefit in this case, because the
<code>make_node</code> constructor function can do more than the <code>Node</code> constructor itself
can.</p>
</div>
<p>When you convert the diagrams given above to the rotation code, make sure to
notice which parts of the trees change and which parts don't.  This can also
shorten the code.</p>
<!--
TODO: Use programmed examples if I use this next time (as in part A).
-->

<h4 id="examples_1">Examples</h4>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="k">let</span> <span class="n">t1</span> <span class="o">=</span> <span class="nc">Node</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">35</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">,</span> <span class="nc">Node</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">42</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">));;</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="k">let</span> <span class="n">t2</span> <span class="o">=</span> <span class="nc">Node</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">35</span><span class="o">,</span> <span class="nc">Node</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">42</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">),</span> <span class="nc">Leaf</span><span class="o">);;</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="k">let</span> <span class="n">t3</span> <span class="o">=</span> <span class="nc">Node</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">21</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">,</span> <span class="nc">Node</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">35</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">,</span> <span class="nc">Node</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">42</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">)));;</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="k">let</span> <span class="n">t4</span> <span class="o">=</span> <span class="nc">Node</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">21</span><span class="o">,</span> <span class="nc">Node</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">35</span><span class="o">,</span> <span class="nc">Node</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">42</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">),</span> <span class="nc">Leaf</span><span class="o">),</span> <span class="nc">Leaf</span><span class="o">);;</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="o">#</span> <span class="n">t1</span><span class="o">;;</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="o">-</span> <span class="o">:</span> <span class="n">tree</span> <span class="o">=</span> <span class="nc">Node</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">35</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">,</span> <span class="nc">Node</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">42</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">))</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="o">#</span> <span class="n">left_rotate</span> <span class="n">t1</span><span class="o">;;</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="o">-</span> <span class="o">:</span> <span class="n">tree</span> <span class="o">=</span> <span class="nc">Node</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">42</span><span class="o">,</span> <span class="nc">Node</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">35</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">),</span> <span class="nc">Leaf</span><span class="o">)</span>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="o">#</span> <span class="n">right_rotate</span> <span class="n">t1</span><span class="o">;;</span>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="nc">Exception</span><span class="o">:</span> <span class="nc">Failure</span> <span class="s2">&quot;can&#39;t right rotate&quot;</span><span class="o">.</span>
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="o">#</span> <span class="n">t2</span><span class="o">;;</span>
</span><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="o">-</span> <span class="o">:</span> <span class="n">tree</span> <span class="o">=</span> <span class="nc">Node</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">35</span><span class="o">,</span> <span class="nc">Node</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">42</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">),</span> <span class="nc">Leaf</span><span class="o">)</span>
</span><span id="__span-6-15"><a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a><span class="o">#</span> <span class="n">right_rotate</span> <span class="n">t2</span><span class="o">;;</span>
</span><span id="__span-6-16"><a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a><span class="o">-</span> <span class="o">:</span> <span class="n">tree</span> <span class="o">=</span> <span class="nc">Node</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">42</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">,</span> <span class="nc">Node</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">35</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">))</span>
</span><span id="__span-6-17"><a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a><span class="o">#</span> <span class="n">left_rotate</span> <span class="n">t2</span><span class="o">;;</span>
</span><span id="__span-6-18"><a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a><span class="nc">Exception</span><span class="o">:</span> <span class="nc">Failure</span> <span class="s2">&quot;can&#39;t left rotate&quot;</span><span class="o">.</span>
</span><span id="__span-6-19"><a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a>
</span><span id="__span-6-20"><a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a><span class="c">(* Tree t3 is unbalanced on the right, so it needs a left rotation. *)</span>
</span><span id="__span-6-21"><a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a><span class="o">#</span> <span class="n">t3</span><span class="o">;;</span>
</span><span id="__span-6-22"><a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a><span class="o">-</span> <span class="o">:</span> <span class="n">tree</span> <span class="o">=</span> <span class="nc">Node</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">21</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">,</span> <span class="nc">Node</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">35</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">,</span> <span class="nc">Node</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">42</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">)))</span>
</span><span id="__span-6-23"><a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a><span class="c">(* t3 is not balanced. *)</span>
</span><span id="__span-6-24"><a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a>
</span><span id="__span-6-25"><a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a><span class="o">#</span> <span class="k">let</span> <span class="n">t3&#39;</span> <span class="o">=</span> <span class="n">left_rotate</span> <span class="n">t3</span><span class="o">;;</span>
</span><span id="__span-6-26"><a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a><span class="k">val</span> <span class="n">t3&#39;</span> <span class="o">:</span> <span class="n">tree</span> <span class="o">=</span> <span class="nc">Node</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">35</span><span class="o">,</span> <span class="nc">Node</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">21</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">),</span> <span class="nc">Node</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">42</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">))</span>
</span><span id="__span-6-27"><a id="__codelineno-6-27" name="__codelineno-6-27" href="#__codelineno-6-27"></a><span class="c">(* t3&#39; is balanced. *)</span>
</span><span id="__span-6-28"><a id="__codelineno-6-28" name="__codelineno-6-28" href="#__codelineno-6-28"></a>
</span><span id="__span-6-29"><a id="__codelineno-6-29" name="__codelineno-6-29" href="#__codelineno-6-29"></a><span class="c">(* Tree t4 is unbalanced on the left, so it needs a right rotation. *)</span>
</span><span id="__span-6-30"><a id="__codelineno-6-30" name="__codelineno-6-30" href="#__codelineno-6-30"></a><span class="o">#</span> <span class="n">t4</span><span class="o">;;</span>
</span><span id="__span-6-31"><a id="__codelineno-6-31" name="__codelineno-6-31" href="#__codelineno-6-31"></a><span class="o">-</span> <span class="o">:</span> <span class="n">tree</span> <span class="o">=</span> <span class="nc">Node</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">21</span><span class="o">,</span> <span class="nc">Node</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">35</span><span class="o">,</span> <span class="nc">Node</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">42</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">),</span> <span class="nc">Leaf</span><span class="o">),</span> <span class="nc">Leaf</span><span class="o">)</span>
</span><span id="__span-6-32"><a id="__codelineno-6-32" name="__codelineno-6-32" href="#__codelineno-6-32"></a><span class="c">(* t4 is not balanced. *)</span>
</span><span id="__span-6-33"><a id="__codelineno-6-33" name="__codelineno-6-33" href="#__codelineno-6-33"></a>
</span><span id="__span-6-34"><a id="__codelineno-6-34" name="__codelineno-6-34" href="#__codelineno-6-34"></a><span class="o">#</span> <span class="k">let</span> <span class="n">t4&#39;</span> <span class="o">=</span> <span class="n">right_rotate</span> <span class="n">t4</span><span class="o">;;</span>
</span><span id="__span-6-35"><a id="__codelineno-6-35" name="__codelineno-6-35" href="#__codelineno-6-35"></a><span class="k">val</span> <span class="n">t4&#39;</span> <span class="o">:</span> <span class="n">tree</span> <span class="o">=</span> <span class="nc">Node</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">35</span><span class="o">,</span> <span class="nc">Node</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">42</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">),</span> <span class="nc">Node</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">21</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">))</span>
</span><span id="__span-6-36"><a id="__codelineno-6-36" name="__codelineno-6-36" href="#__codelineno-6-36"></a><span class="c">(* t4&#39; is balanced. *)</span>
</span></code></pre></div>
<h3 id="3-insert-20-points">3. <code>insert</code> &nbsp; [<strong>20 points</strong>]</h3>
<p>For this problem, you have to complete a partial implementation of insertion of
an <code>int</code> into an AVL tree.  You don't have to start from scratch, because our
old friend Ben Bitfiddle spent a few hours trying unsuccessfully to implement
it himself.  His friend Eva Lu Ator found him fast asleep on his desk, snoring
loudly.  On his computer was the following code:</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="k">let</span> <span class="k">rec</span> <span class="n">insert</span> <span class="n">v</span> <span class="n">t</span> <span class="o">=</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>  <span class="k">match</span> <span class="n">t</span> <span class="k">with</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>    <span class="o">|</span> <span class="nc">Leaf</span> <span class="o">-&gt;</span> <span class="nc">Node</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">v</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">)</span>  <span class="c">(* base case *)</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>    <span class="o">|</span> <span class="nc">Node</span> <span class="o">(_,</span> <span class="n">v&#39;</span><span class="o">,</span> <span class="n">l</span><span class="o">,</span> <span class="n">r</span><span class="o">)</span> <span class="o">-&gt;</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>      <span class="k">begin</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>        <span class="k">match</span> <span class="bp">()</span> <span class="k">with</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>          <span class="o">|</span> <span class="o">_</span> <span class="k">when</span> <span class="n">v</span> <span class="o">&lt;</span> <span class="n">v&#39;</span> <span class="o">-&gt;</span>   <span class="c">(* insert into left subtree *)</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>            <span class="k">let</span> <span class="n">l&#39;</span> <span class="o">=</span> <span class="n">insert</span> <span class="n">v</span> <span class="n">l</span> <span class="k">in</span>  <span class="c">(* new left subtree *)</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>              <span class="k">if</span> <span class="n">depth</span> <span class="n">l&#39;</span> <span class="o">-</span> <span class="n">depth</span> <span class="n">r</span> <span class="o">=</span> <span class="mi">2</span>  <span class="c">(* tree is now unbalanced *)</span>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>                <span class="k">then</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>                  <span class="k">if</span> <span class="n">v</span> <span class="o">&lt;</span> <span class="n">data</span> <span class="n">l&#39;</span>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>                    <span class="k">then</span>  <span class="c">(* left-left case *)</span>
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>                      <span class="c">(* new value v is in the left subtree of l&#39;;</span>
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a><span class="c">                         need to make a new tree</span>
</span><span id="__span-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a><span class="c">                         and do a right rotation on it. *)</span>
</span><span id="__span-7-16"><a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a>                      <span class="n">failwith</span> <span class="s2">&quot;TODO&quot;</span>
</span><span id="__span-7-17"><a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a>                    <span class="k">else</span>  <span class="c">(* left-right case *)</span>
</span><span id="__span-7-18"><a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a>                      <span class="c">(* new value v is in the right subtree of l&#39;;</span>
</span><span id="__span-7-19"><a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a><span class="c">                         need to do a left rotation on l&#39;,</span>
</span><span id="__span-7-20"><a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a><span class="c">                         make a new tree and do a right rotation on it. *)</span>
</span><span id="__span-7-21"><a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a>                      <span class="n">failwith</span> <span class="s2">&quot;TODO&quot;</span>
</span><span id="__span-7-22"><a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a>                <span class="k">else</span> 
</span><span id="__span-7-23"><a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a>                  <span class="n">make_node</span> <span class="n">v&#39;</span> <span class="n">l&#39;</span> <span class="n">r</span>  <span class="c">(* already balanced *)</span>
</span><span id="__span-7-24"><a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a>          <span class="o">|</span> <span class="o">_</span> <span class="k">when</span> <span class="n">v</span> <span class="o">&gt;</span> <span class="n">v&#39;</span> <span class="o">-&gt;</span>   <span class="c">(* insert into right subtree *)</span>
</span><span id="__span-7-25"><a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a>              <span class="n">failwith</span> <span class="s2">&quot;TODO&quot;</span>
</span><span id="__span-7-26"><a id="__codelineno-7-26" name="__codelineno-7-26" href="#__codelineno-7-26"></a>          <span class="o">|</span> <span class="o">_</span> <span class="o">-&gt;</span> <span class="n">t</span>  <span class="c">(* already in tree *)</span>
</span><span id="__span-7-27"><a id="__codelineno-7-27" name="__codelineno-7-27" href="#__codelineno-7-27"></a>      <span class="k">end</span>
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Notice that Ben is using the</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="k">match</span> <span class="bp">()</span> <span class="k">with</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>  <span class="o">|</span> <span class="o">_</span> <span class="k">when</span> <span class="o">...</span> <span class="o">-&gt;</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>  <span class="o">|</span> <span class="o">_</span> <span class="k">when</span> <span class="o">...</span> <span class="o">-&gt;</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>  <span class="o">|</span> <span class="o">_</span> <span class="o">-&gt;</span> <span class="o">...</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>  <span class="c">(* etc. *)</span>
</span></code></pre></div>
<p>idiom to get the effect of <code>if</code>/<code>else if</code>/<code>else if</code>/<code>...</code>/<code>else</code> inside a single
<code>match</code> expression.</p>
</div>
<p>Fortunately, Ben's comments made it clear what he still needed to do.  Eva Lu
looked at the code for a while, and finally said: "This is all correct so far."
However, she didn't have time to finish the code herself, and Ben looks like he
won't be up for several more hours, so it's your job to finish the code by
removing the <code>failwith "TODO"</code> lines in <code>insert</code> and replacing them with the
correct code. (It's about 15 more lines of code in all.)</p>
<p>There are a few other things about this code that are worth highlighting.</p>
<p>Let's assume you are inserting a value into the left subtree of a tree.  When
you recursively insert the value into the left subtree, you know that the
resulting tree will be balanced (assuming the <code>insert</code> function works
correctly!).  You also know that, before you inserted the new value into the
left subtree, the depth of the left subtree was either equal to the depth of
the right subtree, or one more or one less than the right subtree's depth.
After inserting the new value, the new left subtree's depth is either the same
as it was before (in which case the tree is still balanced) or it is one
larger.  If the left subtree originally had a depth one less than the right
subtree, or equal to the right subtree, adding a new value wouldn't unbalance
the tree.  However, if the left subtree originally had a depth one more than
the right subtree, and if adding a new value to the left subtree made its depth
one larger, then the new left subtree would have a depth 2 greater than the
right subtree, which is unbalanced.  That's why there is the line <code>if depth l'
- depth r = 2</code> to check for an unbalanced tree; it's the only way the tree
could become unbalanced.</p>
<p>Also, here is a very subtle point.  In this code:</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>  <span class="o">|</span> <span class="o">_</span> <span class="k">when</span> <span class="n">v</span> <span class="o">&lt;</span> <span class="n">v&#39;</span> <span class="o">-&gt;</span>   <span class="c">(* insert into left subtree *)</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>    <span class="k">let</span> <span class="n">l&#39;</span> <span class="o">=</span> <span class="n">insert</span> <span class="n">v</span> <span class="n">l</span> <span class="k">in</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>      <span class="k">if</span> <span class="n">depth</span> <span class="n">l&#39;</span> <span class="o">-</span> <span class="n">depth</span> <span class="n">r</span> <span class="o">=</span> <span class="mi">2</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>        <span class="k">then</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>          <span class="k">if</span> <span class="n">v</span> <span class="o">&lt;</span> <span class="n">data</span> <span class="n">l&#39;</span>    <span class="c">(* &lt;---- NOTE *)</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>            <span class="k">then</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>              <span class="n">failwith</span> <span class="s2">&quot;TODO&quot;</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>            <span class="k">else</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a>              <span class="n">failwith</span> <span class="s2">&quot;TODO&quot;</span>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a>        <span class="k">else</span> 
</span><span id="__span-9-11"><a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a>          <span class="n">make_node</span> <span class="n">v&#39;</span> <span class="n">l&#39;</span> <span class="n">r</span>
</span></code></pre></div>
<p>in the location marked <code>(* &lt;---- NOTE *)</code>, <code>v</code> is either going to be less than
<code>data l'</code> (the <code>then</code> case) or greater than <code>data l'</code> (the <code>else</code> case).
Why couldn't it be equal to <code>data l'</code>?</p>
<p>There are only two ways for <code>v</code> (the new value to be added) to be the same
as <code>data l'</code> (the top-most value in the tree <code>l'</code>):</p>
<ol>
<li>
<p>The value <code>v</code> was already in the left subtree <code>l</code>, so <code>insert v l</code> is just
   <code>l</code>.  In that case, <code>depth l' - depth r</code> is the same as <code>depth l - depth r</code>
   before insertion, and that number can't be greater than 1 because it would
   have violated the AVL tree balance invariant.  So this case doesn't come up
   at the location marked <code>&lt;---- NOTE</code>.</p>
</li>
<li>
<p>The left subtree <code>l</code> is just a <code>Leaf</code>. 
   That means that the depth of the left subtree
   could not have been one greater than the right subtree,
   because leaves have depth 0, so even after inserting the new value the
   condition <code>depth l' - depth r = 2</code> cannot be true.  So this case also
   doesn't come up.</p>
</li>
</ol>
<p>Sophisticated data structure code is hard! <img alt="😄" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f604.svg" title=":smile:" /></p>
<h2 id="testing">Testing</h2>
<p>Use the test script to check if your code runs correctly.  Here are some
functions that might be useful to you when testing interactively:</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="c">(* Find the minimum value in an AVL tree. *)</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="k">let</span> <span class="k">rec</span> <span class="n">min_avl_tree</span> <span class="o">=</span> <span class="k">function</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>  <span class="o">|</span> <span class="nc">Leaf</span> <span class="o">-&gt;</span> <span class="nc">None</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>  <span class="o">|</span> <span class="nc">Node</span> <span class="o">(_,</span> <span class="n">v</span><span class="o">,</span> <span class="n">l</span><span class="o">,</span> <span class="o">_)</span> <span class="o">-&gt;</span> 
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>    <span class="k">begin</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>      <span class="k">match</span> <span class="n">min_avl_tree</span> <span class="n">l</span> <span class="k">with</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>        <span class="o">|</span> <span class="nc">None</span> <span class="o">-&gt;</span> <span class="nc">Some</span> <span class="n">v</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>        <span class="o">|</span> <span class="nc">Some</span> <span class="n">l&#39;</span> <span class="o">-&gt;</span> <span class="nc">Some</span> <span class="n">l&#39;</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>    <span class="k">end</span>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="c">(* Find the maximum value in an AVL tree. *)</span>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="k">let</span> <span class="k">rec</span> <span class="n">max_avl_tree</span> <span class="o">=</span> <span class="k">function</span>
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a>  <span class="o">|</span> <span class="nc">Leaf</span> <span class="o">-&gt;</span> <span class="nc">None</span>
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a>  <span class="o">|</span> <span class="nc">Node</span> <span class="o">(_,</span> <span class="n">v</span><span class="o">,</span> <span class="o">_,</span> <span class="n">r</span><span class="o">)</span> <span class="o">-&gt;</span> 
</span><span id="__span-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a>    <span class="k">begin</span>
</span><span id="__span-10-16"><a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a>      <span class="k">match</span> <span class="n">max_avl_tree</span> <span class="n">r</span> <span class="k">with</span>
</span><span id="__span-10-17"><a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a>        <span class="o">|</span> <span class="nc">None</span> <span class="o">-&gt;</span> <span class="nc">Some</span> <span class="n">v</span>
</span><span id="__span-10-18"><a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a>        <span class="o">|</span> <span class="nc">Some</span> <span class="n">r&#39;</span> <span class="o">-&gt;</span> <span class="nc">Some</span> <span class="n">r&#39;</span>
</span><span id="__span-10-19"><a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a>    <span class="k">end</span>
</span><span id="__span-10-20"><a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a>
</span><span id="__span-10-21"><a id="__codelineno-10-21" name="__codelineno-10-21" href="#__codelineno-10-21"></a><span class="c">(* Return true if a tree is a valid AVL tree. *)</span>
</span><span id="__span-10-22"><a id="__codelineno-10-22" name="__codelineno-10-22" href="#__codelineno-10-22"></a><span class="k">let</span> <span class="k">rec</span> <span class="n">is_avl_tree</span> <span class="o">=</span> <span class="k">function</span>
</span><span id="__span-10-23"><a id="__codelineno-10-23" name="__codelineno-10-23" href="#__codelineno-10-23"></a>  <span class="o">|</span> <span class="nc">Leaf</span> <span class="o">-&gt;</span> <span class="bp">true</span>
</span><span id="__span-10-24"><a id="__codelineno-10-24" name="__codelineno-10-24" href="#__codelineno-10-24"></a>  <span class="o">|</span> <span class="nc">Node</span> <span class="o">(</span><span class="n">d</span><span class="o">,</span> <span class="n">v</span><span class="o">,</span> <span class="n">l</span><span class="o">,</span> <span class="n">r</span><span class="o">)</span> <span class="o">-&gt;</span>
</span><span id="__span-10-25"><a id="__codelineno-10-25" name="__codelineno-10-25" href="#__codelineno-10-25"></a>    <span class="k">let</span> <span class="n">dl</span> <span class="o">=</span> <span class="n">depth</span> <span class="n">l</span> <span class="k">in</span>
</span><span id="__span-10-26"><a id="__codelineno-10-26" name="__codelineno-10-26" href="#__codelineno-10-26"></a>    <span class="k">let</span> <span class="n">dr</span> <span class="o">=</span> <span class="n">depth</span> <span class="n">r</span> <span class="k">in</span>
</span><span id="__span-10-27"><a id="__codelineno-10-27" name="__codelineno-10-27" href="#__codelineno-10-27"></a>    <span class="k">if</span> <span class="n">is_avl_tree</span> <span class="n">l</span> 
</span><span id="__span-10-28"><a id="__codelineno-10-28" name="__codelineno-10-28" href="#__codelineno-10-28"></a>      <span class="o">&amp;&amp;</span> <span class="n">is_avl_tree</span> <span class="n">r</span> 
</span><span id="__span-10-29"><a id="__codelineno-10-29" name="__codelineno-10-29" href="#__codelineno-10-29"></a>      <span class="o">&amp;&amp;</span> <span class="n">d</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">max</span> <span class="n">dl</span> <span class="n">dr</span>
</span><span id="__span-10-30"><a id="__codelineno-10-30" name="__codelineno-10-30" href="#__codelineno-10-30"></a>      <span class="o">&amp;&amp;</span> <span class="n">abs</span> <span class="o">(</span><span class="n">dl</span> <span class="o">-</span> <span class="n">dr</span><span class="o">)</span> <span class="o">&lt;</span> <span class="mi">2</span>
</span><span id="__span-10-31"><a id="__codelineno-10-31" name="__codelineno-10-31" href="#__codelineno-10-31"></a>      <span class="k">then</span>  <span class="c">(* check order invariant *)</span>
</span><span id="__span-10-32"><a id="__codelineno-10-32" name="__codelineno-10-32" href="#__codelineno-10-32"></a>        <span class="k">match</span> <span class="o">(</span><span class="n">max_avl_tree</span> <span class="n">l</span><span class="o">,</span> <span class="n">min_avl_tree</span> <span class="n">r</span><span class="o">)</span> <span class="k">with</span>
</span><span id="__span-10-33"><a id="__codelineno-10-33" name="__codelineno-10-33" href="#__codelineno-10-33"></a>          <span class="o">|</span> <span class="o">(</span><span class="nc">None</span><span class="o">,</span> <span class="nc">None</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="bp">true</span>
</span><span id="__span-10-34"><a id="__codelineno-10-34" name="__codelineno-10-34" href="#__codelineno-10-34"></a>          <span class="o">|</span> <span class="o">(</span><span class="nc">None</span><span class="o">,</span> <span class="nc">Some</span> <span class="n">rmin</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">v</span> <span class="o">&lt;=</span> <span class="n">rmin</span>
</span><span id="__span-10-35"><a id="__codelineno-10-35" name="__codelineno-10-35" href="#__codelineno-10-35"></a>          <span class="o">|</span> <span class="o">(</span><span class="nc">Some</span> <span class="n">lmax</span><span class="o">,</span> <span class="nc">None</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">v</span> <span class="o">&gt;=</span> <span class="n">lmax</span>
</span><span id="__span-10-36"><a id="__codelineno-10-36" name="__codelineno-10-36" href="#__codelineno-10-36"></a>          <span class="o">|</span> <span class="o">(</span><span class="nc">Some</span> <span class="n">lmax</span><span class="o">,</span> <span class="nc">Some</span> <span class="n">rmin</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">v</span> <span class="o">&gt;=</span> <span class="n">lmax</span> <span class="o">&amp;&amp;</span> <span class="n">v</span> <span class="o">&lt;=</span> <span class="n">rmin</span>
</span><span id="__span-10-37"><a id="__codelineno-10-37" name="__codelineno-10-37" href="#__codelineno-10-37"></a>      <span class="k">else</span> <span class="bp">false</span>
</span></code></pre></div>
<p>You don't need to use these in your submitted code, though.</p>
<h2 id="visualizing-your-trees">Visualizing your trees</h2>
<p>It's easiest to see what's going on in your code if you can visualize
the trees generated by your code.  We imagine that at this point, the one
thought that is burning in your head is "how did they make those cool diagrams
of the AVL trees?".  Well, now we'll tell you so you can do the same to your
own trees (nothing beats looking at pictures of data structures when debugging
complex algorithms).  First, start up a terminal and enter these commands (if
you're running Linux or Windows with WSL):</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>$ sudo apt update
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>$ sudo apt install graphviz
</span></code></pre></div>
<p>or these commands (if you're running MacOS with <a href="https://brew.sh">Homebrew</a>:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>$ brew update
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>$ brew install graphviz
</span></code></pre></div>
<p>Once this is done, you will have installed the <code>graphviz</code> package, which
will include a very useful program called <code>dot</code>.  <code>dot</code> is an interpreter for
a mini-language used to represent graphs.  The details of this language aren't
important, but for instance, here's a "dot file" (a file ending in the extension
<code>.dot</code>) corresponding to the graph displayed above containing all the numbers
from 1 to 10:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>digraph tree {
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>  0[label=&quot;5 (d4)&quot;]
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>  0 -&gt; 1
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>  0 -&gt; 10
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>  1[label=&quot;2 (d3)&quot;]
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>  1 -&gt; 2
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>  1 -&gt; 5
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>  2[label=&quot;1 (d1)&quot;]
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>  2 -&gt; 3
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>  2 -&gt; 4
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a>  3[shape=&quot;point&quot;,width=0.2]
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a>  4[shape=&quot;point&quot;,width=0.2]
</span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a>  5[label=&quot;4 (d2)&quot;]
</span><span id="__span-13-14"><a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a>  5 -&gt; 6
</span><span id="__span-13-15"><a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a>  5 -&gt; 9
</span><span id="__span-13-16"><a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a>  6[label=&quot;3 (d1)&quot;]
</span><span id="__span-13-17"><a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a>  6 -&gt; 7
</span><span id="__span-13-18"><a id="__codelineno-13-18" name="__codelineno-13-18" href="#__codelineno-13-18"></a>  6 -&gt; 8
</span><span id="__span-13-19"><a id="__codelineno-13-19" name="__codelineno-13-19" href="#__codelineno-13-19"></a>  7[shape=&quot;point&quot;,width=0.2]
</span><span id="__span-13-20"><a id="__codelineno-13-20" name="__codelineno-13-20" href="#__codelineno-13-20"></a>  8[shape=&quot;point&quot;,width=0.2]
</span><span id="__span-13-21"><a id="__codelineno-13-21" name="__codelineno-13-21" href="#__codelineno-13-21"></a>  9[shape=&quot;point&quot;,width=0.2]
</span><span id="__span-13-22"><a id="__codelineno-13-22" name="__codelineno-13-22" href="#__codelineno-13-22"></a>  10[label=&quot;8 (d3)&quot;]
</span><span id="__span-13-23"><a id="__codelineno-13-23" name="__codelineno-13-23" href="#__codelineno-13-23"></a>  10 -&gt; 11
</span><span id="__span-13-24"><a id="__codelineno-13-24" name="__codelineno-13-24" href="#__codelineno-13-24"></a>  10 -&gt; 16
</span><span id="__span-13-25"><a id="__codelineno-13-25" name="__codelineno-13-25" href="#__codelineno-13-25"></a>  11[label=&quot;6 (d2)&quot;]
</span><span id="__span-13-26"><a id="__codelineno-13-26" name="__codelineno-13-26" href="#__codelineno-13-26"></a>  11 -&gt; 12
</span><span id="__span-13-27"><a id="__codelineno-13-27" name="__codelineno-13-27" href="#__codelineno-13-27"></a>  11 -&gt; 13
</span><span id="__span-13-28"><a id="__codelineno-13-28" name="__codelineno-13-28" href="#__codelineno-13-28"></a>  12[shape=&quot;point&quot;,width=0.2]
</span><span id="__span-13-29"><a id="__codelineno-13-29" name="__codelineno-13-29" href="#__codelineno-13-29"></a>  13[label=&quot;7 (d1)&quot;]
</span><span id="__span-13-30"><a id="__codelineno-13-30" name="__codelineno-13-30" href="#__codelineno-13-30"></a>  13 -&gt; 14
</span><span id="__span-13-31"><a id="__codelineno-13-31" name="__codelineno-13-31" href="#__codelineno-13-31"></a>  13 -&gt; 15
</span><span id="__span-13-32"><a id="__codelineno-13-32" name="__codelineno-13-32" href="#__codelineno-13-32"></a>  14[shape=&quot;point&quot;,width=0.2]
</span><span id="__span-13-33"><a id="__codelineno-13-33" name="__codelineno-13-33" href="#__codelineno-13-33"></a>  15[shape=&quot;point&quot;,width=0.2]
</span><span id="__span-13-34"><a id="__codelineno-13-34" name="__codelineno-13-34" href="#__codelineno-13-34"></a>  16[label=&quot;9 (d2)&quot;]
</span><span id="__span-13-35"><a id="__codelineno-13-35" name="__codelineno-13-35" href="#__codelineno-13-35"></a>  16 -&gt; 17
</span><span id="__span-13-36"><a id="__codelineno-13-36" name="__codelineno-13-36" href="#__codelineno-13-36"></a>  16 -&gt; 18
</span><span id="__span-13-37"><a id="__codelineno-13-37" name="__codelineno-13-37" href="#__codelineno-13-37"></a>  17[shape=&quot;point&quot;,width=0.2]
</span><span id="__span-13-38"><a id="__codelineno-13-38" name="__codelineno-13-38" href="#__codelineno-13-38"></a>  18[label=&quot;10 (d1)&quot;]
</span><span id="__span-13-39"><a id="__codelineno-13-39" name="__codelineno-13-39" href="#__codelineno-13-39"></a>  18 -&gt; 19
</span><span id="__span-13-40"><a id="__codelineno-13-40" name="__codelineno-13-40" href="#__codelineno-13-40"></a>  18 -&gt; 20
</span><span id="__span-13-41"><a id="__codelineno-13-41" name="__codelineno-13-41" href="#__codelineno-13-41"></a>  19[shape=&quot;point&quot;,width=0.2]
</span><span id="__span-13-42"><a id="__codelineno-13-42" name="__codelineno-13-42" href="#__codelineno-13-42"></a>  20[shape=&quot;point&quot;,width=0.2]
</span></code></pre></div>
<p>If you're curious about the dot language, you can check out <a href="http://www.graphviz.org/doc/info/index.html">this
page</a>.  Now we'll show you how to
generate these dot files from your OCaml AVL trees.  Use these functions:</p>
<div class="language-ocaml highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="c">(* Convert a tree to a string in &quot;dot&quot; format. *)</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="k">let</span> <span class="n">dot_string_of_tree</span> <span class="n">t</span> <span class="o">=</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>  <span class="k">let</span> <span class="n">sp</span> <span class="o">=</span> <span class="nn">Printf</span><span class="p">.</span><span class="n">sprintf</span> <span class="k">in</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>  <span class="k">let</span> <span class="k">rec</span> <span class="n">aux</span> <span class="n">t</span> <span class="n">i</span> <span class="o">=</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>    <span class="k">match</span> <span class="n">t</span> <span class="k">with</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>      <span class="o">|</span> <span class="nc">Leaf</span> <span class="o">-&gt;</span> <span class="o">(</span><span class="n">sp</span> <span class="s2">&quot;  %d[shape=</span><span class="se">\&quot;</span><span class="s2">point</span><span class="se">\&quot;</span><span class="s2">,width=0.2]</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="n">i</span><span class="o">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>      <span class="o">|</span> <span class="nc">Node</span> <span class="o">(</span><span class="n">d</span><span class="o">,</span> <span class="n">v</span><span class="o">,</span> <span class="n">l</span><span class="o">,</span> <span class="n">r</span><span class="o">)</span> <span class="o">-&gt;</span> 
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>          <span class="k">let</span> <span class="o">(</span><span class="n">ls</span><span class="o">,</span> <span class="n">j</span><span class="o">)</span> <span class="o">=</span> <span class="n">aux</span> <span class="n">l</span> <span class="o">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span> <span class="k">in</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>          <span class="k">let</span> <span class="o">(</span><span class="n">rs</span><span class="o">,</span> <span class="n">k</span><span class="o">)</span> <span class="o">=</span> <span class="n">aux</span> <span class="n">r</span> <span class="n">j</span> <span class="k">in</span>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a>          <span class="k">let</span> <span class="n">curr</span> <span class="o">=</span>
</span><span id="__span-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a>            <span class="n">sp</span> <span class="s2">&quot;  %d[label=</span><span class="se">\&quot;</span><span class="s2">%d (d%d)</span><span class="se">\&quot;</span><span class="s2">]</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="n">i</span> <span class="n">v</span> <span class="n">d</span> <span class="o">^</span>
</span><span id="__span-14-12"><a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a>            <span class="n">sp</span> <span class="s2">&quot;  %d -&gt; %d</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="n">i</span> <span class="o">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">^</span>
</span><span id="__span-14-13"><a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a>            <span class="n">sp</span> <span class="s2">&quot;  %d -&gt; %d</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="n">i</span> <span class="n">j</span> <span class="k">in</span>
</span><span id="__span-14-14"><a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a>          <span class="k">let</span> <span class="n">body</span> <span class="o">=</span> <span class="n">curr</span> <span class="o">^</span> <span class="n">ls</span> <span class="o">^</span> <span class="n">rs</span> <span class="k">in</span>
</span><span id="__span-14-15"><a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a>            <span class="o">(</span><span class="n">body</span><span class="o">,</span> <span class="n">k</span><span class="o">)</span>
</span><span id="__span-14-16"><a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a>  <span class="k">in</span>
</span><span id="__span-14-17"><a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a>  <span class="k">let</span> <span class="n">header</span> <span class="o">=</span> <span class="s2">&quot;digraph tree {</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="k">in</span>
</span><span id="__span-14-18"><a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a>  <span class="k">let</span> <span class="o">(</span><span class="n">body</span><span class="o">,</span> <span class="o">_)</span> <span class="o">=</span> <span class="n">aux</span> <span class="n">t</span> <span class="mi">0</span> <span class="k">in</span>
</span><span id="__span-14-19"><a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a>    <span class="n">header</span> <span class="o">^</span> <span class="n">body</span> <span class="o">^</span> <span class="s2">&quot;}</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="__span-14-20"><a id="__codelineno-14-20" name="__codelineno-14-20" href="#__codelineno-14-20"></a>
</span><span id="__span-14-21"><a id="__codelineno-14-21" name="__codelineno-14-21" href="#__codelineno-14-21"></a><span class="c">(* Print a tree to a file in &quot;dot&quot; format. *)</span>
</span><span id="__span-14-22"><a id="__codelineno-14-22" name="__codelineno-14-22" href="#__codelineno-14-22"></a><span class="k">let</span> <span class="n">print_dotfile</span> <span class="n">filename</span> <span class="n">t</span> <span class="o">=</span>
</span><span id="__span-14-23"><a id="__codelineno-14-23" name="__codelineno-14-23" href="#__codelineno-14-23"></a>  <span class="k">let</span> <span class="n">outfile</span> <span class="o">=</span> <span class="n">open_out</span> <span class="o">(</span><span class="n">filename</span> <span class="o">^</span> <span class="s2">&quot;.dot&quot;</span><span class="o">)</span> <span class="k">in</span>
</span><span id="__span-14-24"><a id="__codelineno-14-24" name="__codelineno-14-24" href="#__codelineno-14-24"></a>    <span class="k">begin</span>
</span><span id="__span-14-25"><a id="__codelineno-14-25" name="__codelineno-14-25" href="#__codelineno-14-25"></a>      <span class="nn">Printf</span><span class="p">.</span><span class="n">fprintf</span> <span class="n">outfile</span> <span class="s2">&quot;%s&quot;</span> <span class="o">(</span><span class="n">dot_string_of_tree</span> <span class="n">t</span><span class="o">);</span>
</span><span id="__span-14-26"><a id="__codelineno-14-26" name="__codelineno-14-26" href="#__codelineno-14-26"></a>      <span class="n">close_out</span> <span class="n">outfile</span>
</span><span id="__span-14-27"><a id="__codelineno-14-27" name="__codelineno-14-27" href="#__codelineno-14-27"></a>    <span class="k">end</span>
</span></code></pre></div>
<p>Then, if you have a tree called <code>mytree</code> and you want to save it to a file
in dot format, you can do this from inside OCaml:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a># print_dotfile &quot;mytree&quot; mytree ;;
</span></code></pre></div>
<p>and when you exit OCaml, you should see a file called <code>mytree.dot</code> in the
same directory you were in.  To convert this to a PNG image for viewing, do this
in the terminal:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>$ dot -Tpng -o mytree.png mytree.dot
</span></code></pre></div>
<p>This should output a file called <code>mytree.png</code>.  You can look at the file in a
web browser or in any program that can view images (<em>e.g.</em> Preview on a Mac).
If you do this, you should see a display of your tree in a nice graphical
format like what you've seen above.</p>
<p>We want to emphasize that you don't <em>have</em> to use <code>dot</code> if you don't want to;
you won't be marked on it, for instance.  However, it's very useful for
debugging and it's very satisfying to see a data structure you created
represented graphically, so we encourage you to try it.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../partB_lists_hofs/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Part B: Lists and HOFs">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Part B: Lists and HOFs
              </div>
            </div>
          </a>
        
        
          
          <a href="../../../readings/ocaml_cheat_sheet/" class="md-footer__link md-footer__link--next" aria-label="Next: OCaml Cheat Sheet">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                OCaml Cheat Sheet
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["content.code.copy", "navigation.footer", "navigation.top"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../../js/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>